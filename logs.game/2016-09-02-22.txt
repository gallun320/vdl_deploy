02.09 22:00:05 TIMER: Check auto-disconnect...
02.09 22:00:07 STATS: vdl.0 cache, locks:2
02.09 22:01:05 TIMER: Check auto-disconnect...
02.09 22:01:07 STATS: vdl.0 cache, locks:2
02.09 22:01:45 NET: Client (conid:38380116) connected to vdl.0 (clients:2)
02.09 22:01:46 NET: Client (name:null conid:38380116 TCP) disconnected from vdl.0 (clients:1)
02.09 22:01:46 NET: Client (conid:38338119) connected to vdl.0 (clients:2)
02.09 22:01:55 ++ NET: null req: user.login { password => test, name => test2, messageType => user.login }
02.09 22:01:55 DB: SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = E'test2' AND Password = E'test'
02.09 22:01:55 ->>-: core/server.query { q => SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = E'test2' AND Password = E'test', _type => core/server.query }
02.09 22:01:55 -<<-: core/server.query { list => {{ name => test2, networkid => , isbanned => false, id => 4 }}, errorCode => ok, _type => core/server.query }
02.09 22:01:55 STATS: vdl.0 cache connection, 1050 calls, total 0.908226490020752 sec spent, avg 0.86 ms
02.09 22:01:55 ->>-: core/user.isOnlineID { id => 4, _type => core/user.isOnlineID }
02.09 22:01:55 -<<-: core/user.isOnlineID { isOnline => false, errorCode => ok, _type => core/user.isOnlineID }
02.09 22:01:55 ->>-: core/cache.get { type => user, v => -1, id => 4, _type => core/cache.get }
02.09 22:01:55 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {chemrating => 0, biorating => 0, networktype =>   , level => 0, sex => male, networkid => , skinbase => {"body_skin": 1, "head_skin": 1, "hair": 1, "eyes": 1, "mouth": 1}, informaticrating => 0, isbanned => false, params => { attrs => { _lastTime.24hr => 1472845193, lastLoginDate => 246, lastLoadDate => 903 }, effects => { list => [] } }, name => test2, skinaddavaliable => {"head : null; dress : null; weapon : null; acess : null"}, deleted => false, historyrating => 0, school => 1, rang => 0, georating => 0, password => test, language => en, region => 1, skinadditional => {"head": 0, "dress": 0, "acces": 0, "weapon": 0}, rangname => новичок                       , rusrating => 0, email => , mathrating => 0, regdate => 2016-09-02 18:16:11.11368+00, expirience => 0, city => 1, physrating => 0}, version => 0, id => 4 } }
02.09 22:01:55 ->>-: core/cache.get { type => questdata, v => -1, id => 4, _type => core/cache.get }
02.09 22:01:55 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {params => { quests => { list => [] } }}, version => 0, id => 4 } }
02.09 22:01:55 NET: Client login (conid:38338119, id:4, name:test2)
02.09 22:01:55 ->>-: core/user.loginPost { lang => en, networkid => , platform => web, networktype =>   , id => 4, _type => core/user.loginPost, ipAddr => 188.162.39.231 }
02.09 22:01:55 -<<-: core/user.loginPost { _type => core/user.loginPost }
02.09 22:01:55 == NET: test2 ret: user.login { name => test2, type => user.login, errorCode => ok, id => 4 }
02.09 22:01:55 == NET: test1 ret: user.join { name => test2, type => user.join }
02.09 22:01:55 == NET: test2 ret: user.join { name => test1, type => user.join }
02.09 22:01:55 == NET: test2 ret: user.join { name => test2, type => user.join }
02.09 22:01:56 ++ NET: test2 req: battle.find { messageType => battle.find }
02.09 22:01:56 ->>-: vdl/cache.battle.find { _type => vdl/cache.battle.find }
02.09 22:01:56 -<<-: vdl/cache.battle.find { list => [{ id => 33, first => 3 }], count => 1, errorCode => ok, _type => vdl/cache.battle.find }
02.09 22:01:56 ->>-: vdl/cache.battle.join { roomId => 33, selfId => 4, _type => vdl/cache.battle.join }
02.09 22:01:56 -<<-: vdl/cache.battle.join { room => 33, errorCode => true, _type => vdl/cache.battle.join, player => 2 }
02.09 22:01:56 DB: SELECT name FROM users WHERE id=4
02.09 22:01:56 ->>-: core/server.query { q => SELECT name FROM users WHERE id=4, _type => core/server.query }
02.09 22:01:56 -<<-: core/server.query { list => {{ name => test2 }}, errorCode => ok, _type => core/server.query }
02.09 22:01:56 DB: SELECT name FROM users WHERE id=3
02.09 22:01:56 ->>-: core/server.query { q => SELECT name FROM users WHERE id=3, _type => core/server.query }
02.09 22:01:56 -<<-: core/server.query { list => {{ name => test1 }}, errorCode => ok, _type => core/server.query }
02.09 22:01:56 TIME: battle.find 3.77 ms
02.09 22:01:56 == NET: test2 ret: battle.enemy { name => test2, type => battle.enemy, enemy.id => 4, enemy.name => test1, enemy.num => 1 }
02.09 22:01:56 == NET: test2 ret: battle.find { room => 33, type => battle.find, errorCode => true, _type => vdl/cache.battle.join, player => 2 }
02.09 22:01:56 == NET: test1 ret: battle.enemy { name => test1, type => battle.enemy, enemy.id => 3, enemy.name => test2, enemy.num => 2 }
02.09 22:02:02 ->>-: core/cache.update { diff => {language => en}, type => user, unlock => false, id => 4, _type => core/cache.update }
02.09 22:02:02 -<<-: core/cache.update { errorCode => ok, version => 1, _type => core/cache.update }
02.09 22:02:05 TIMER: Check auto-disconnect...
02.09 22:02:07 STATS: vdl.0 cache, locks:4
02.09 22:02:07 ++ NET: test1 req: battle.sendtask { dice => 0, from => (0.0, 0.0), roomId => 33, name => throw, side => 2, dices => 024325, messageType => battle.sendtask, to => (0.0, 0.0), diceID => 0 }
02.09 22:02:07 ->>-: vdl/cache.battle.infoRoom { roomId => 33, _type => vdl/cache.battle.infoRoom }
02.09 22:02:07 -<<-: vdl/cache.battle.infoRoom { secondId => 4, firstId => 3, _type => vdl/cache.battle.infoRoom, turnId => 3 }
02.09 22:02:07 TIME: battle.sendtask 0.29 ms
02.09 22:02:07 == NET: test1 ret: battle.sendtask { type => battle.sendtask, errorCode => true }
02.09 22:02:07 == NET: test2 ret: battle.task { dice => 0, from => (0.0, 0.0), roomId => 33, name => throw, side => 2, type => battle.task, dices => 024325, to => (0.0, 0.0), diceID => 0 }
02.09 22:02:11 ++ NET: test1 req: battle.sendtask { dice => 5, from => (0.0, 0.0), roomId => 33, name => choose, side => 2, dices => null, messageType => battle.sendtask, to => (0.0, 0.0), diceID => 5 }
02.09 22:02:11 ->>-: vdl/cache.battle.infoRoom { roomId => 33, _type => vdl/cache.battle.infoRoom }
02.09 22:02:11 -<<-: vdl/cache.battle.infoRoom { secondId => 4, firstId => 3, _type => vdl/cache.battle.infoRoom, turnId => 3 }
02.09 22:02:11 TIME: battle.sendtask 0.28 ms
02.09 22:02:11 == NET: test1 ret: battle.sendtask { type => battle.sendtask, errorCode => true }
02.09 22:02:11 == NET: test2 ret: battle.task { dice => 5, from => (0.0, 0.0), roomId => 33, name => choose, side => 2, type => battle.task, dices => null, to => (0.0, 0.0), diceID => 5 }
02.09 22:02:12 ++ NET: test1 req: battle.sendtask { dice => 5, from => (7.0, 3.0), roomId => 33, name => take, side => 2, dices => null, messageType => battle.sendtask, to => (0.0, 0.0), diceID => 5 }
02.09 22:02:12 ->>-: vdl/cache.battle.infoRoom { roomId => 33, _type => vdl/cache.battle.infoRoom }
02.09 22:02:12 -<<-: vdl/cache.battle.infoRoom { secondId => 4, firstId => 3, _type => vdl/cache.battle.infoRoom, turnId => 3 }
02.09 22:02:12 TIME: battle.sendtask 0.26 ms
02.09 22:02:12 == NET: test1 ret: battle.sendtask { type => battle.sendtask, errorCode => true }
02.09 22:02:12 == NET: test2 ret: battle.task { dice => 5, from => (7.0, 3.0), roomId => 33, name => take, side => 2, type => battle.task, dices => null, to => (0.0, 0.0), diceID => 5 }
02.09 22:02:12 ++ NET: test1 req: battle.sendtask { dice => 5, from => (7.0, 3.0), roomId => 33, name => swap, side => 2, dices => null, messageType => battle.sendtask, to => (8.0, 3.0), diceID => 0 }
02.09 22:02:12 ->>-: vdl/cache.battle.infoRoom { roomId => 33, _type => vdl/cache.battle.infoRoom }
02.09 22:02:12 -<<-: vdl/cache.battle.infoRoom { secondId => 4, firstId => 3, _type => vdl/cache.battle.infoRoom, turnId => 3 }
02.09 22:02:12 == NET: test1 ret: battle.sendtask { type => battle.sendtask, errorCode => true }
02.09 22:02:12 TIME: battle.sendtask 0.27 ms
02.09 22:02:12 == NET: test2 ret: battle.task { dice => 5, from => (7.0, 3.0), roomId => 33, name => swap, side => 2, type => battle.task, dices => null, to => (8.0, 3.0), diceID => 0 }
02.09 22:02:14 ++ NET: test1 req: battle.sendtask { dice => 3, from => (7.0, 4.0), roomId => 33, name => take, side => 2, dices => null, messageType => battle.sendtask, to => (0.0, 0.0), diceID => 3 }
02.09 22:02:14 ->>-: vdl/cache.battle.infoRoom { roomId => 33, _type => vdl/cache.battle.infoRoom }
02.09 22:02:14 -<<-: vdl/cache.battle.infoRoom { secondId => 4, firstId => 3, _type => vdl/cache.battle.infoRoom, turnId => 3 }
02.09 22:02:14 TIME: battle.sendtask 0.26 ms
02.09 22:02:14 == NET: test1 ret: battle.sendtask { type => battle.sendtask, errorCode => true }
02.09 22:02:14 == NET: test2 ret: battle.task { dice => 3, from => (7.0, 4.0), roomId => 33, name => take, side => 2, type => battle.task, dices => null, to => (0.0, 0.0), diceID => 3 }
02.09 22:02:14 ++ NET: test1 req: battle.sendtask { dice => 3, from => (7.0, 4.0), roomId => 33, name => swap, side => 2, dices => null, messageType => battle.sendtask, to => (8.0, 4.0), diceID => 0 }
02.09 22:02:14 ->>-: vdl/cache.battle.infoRoom { roomId => 33, _type => vdl/cache.battle.infoRoom }
02.09 22:02:14 -<<-: vdl/cache.battle.infoRoom { secondId => 4, firstId => 3, _type => vdl/cache.battle.infoRoom, turnId => 3 }
02.09 22:02:14 TIME: battle.sendtask 0.3 ms
02.09 22:02:14 == NET: test1 ret: battle.sendtask { type => battle.sendtask, errorCode => true }
02.09 22:02:14 == NET: test2 ret: battle.task { dice => 3, from => (7.0, 4.0), roomId => 33, name => swap, side => 2, type => battle.task, dices => null, to => (8.0, 4.0), diceID => 0 }
02.09 22:02:16 ++ NET: test1 req: battle.sendtask { dice => 2, from => (7.0, 4.0), roomId => 33, name => take, side => 2, dices => null, messageType => battle.sendtask, to => (0.0, 0.0), diceID => 1 }
02.09 22:02:16 ->>-: vdl/cache.battle.infoRoom { roomId => 33, _type => vdl/cache.battle.infoRoom }
02.09 22:02:16 -<<-: vdl/cache.battle.infoRoom { secondId => 4, firstId => 3, _type => vdl/cache.battle.infoRoom, turnId => 3 }
02.09 22:02:16 TIME: battle.sendtask 0.28 ms
02.09 22:02:16 == NET: test1 ret: battle.sendtask { type => battle.sendtask, errorCode => true }
02.09 22:02:16 == NET: test2 ret: battle.task { dice => 2, from => (7.0, 4.0), roomId => 33, name => take, side => 2, type => battle.task, dices => null, to => (0.0, 0.0), diceID => 1 }
02.09 22:02:16 ++ NET: test1 req: battle.sendtask { dice => 2, from => (7.0, 4.0), roomId => 33, name => swap, side => 2, dices => null, messageType => battle.sendtask, to => (8.0, 4.0), diceID => 0 }
02.09 22:02:16 ->>-: vdl/cache.battle.infoRoom { roomId => 33, _type => vdl/cache.battle.infoRoom }
02.09 22:02:16 -<<-: vdl/cache.battle.infoRoom { secondId => 4, firstId => 3, _type => vdl/cache.battle.infoRoom, turnId => 3 }
02.09 22:02:16 TIME: battle.sendtask 0.26 ms
02.09 22:02:16 == NET: test1 ret: battle.sendtask { type => battle.sendtask, errorCode => true }
02.09 22:02:16 == NET: test2 ret: battle.task { dice => 2, from => (7.0, 4.0), roomId => 33, name => swap, side => 2, type => battle.task, dices => null, to => (8.0, 4.0), diceID => 0 }
02.09 22:02:21 ++ NET: test1 req: battle.sendtask { dice => 0, from => (0.0, 0.0), roomId => 33, name => skip, side => 2, dices => null, messageType => battle.sendtask, to => (0.0, 0.0), diceID => 0 }
02.09 22:02:21 ->>-: vdl/cache.battle.infoRoom { roomId => 33, _type => vdl/cache.battle.infoRoom }
02.09 22:02:21 -<<-: vdl/cache.battle.infoRoom { secondId => 4, firstId => 3, _type => vdl/cache.battle.infoRoom, turnId => 3 }
02.09 22:02:21 TIME: battle.sendtask 0.33 ms
02.09 22:02:21 == NET: test1 ret: battle.sendtask { type => battle.sendtask, errorCode => true }
02.09 22:02:21 == NET: test2 ret: battle.task { dice => 0, from => (0.0, 0.0), roomId => 33, name => skip, side => 2, type => battle.task, dices => null, to => (0.0, 0.0), diceID => 0 }
02.09 22:02:25 ++ NET: test2 req: battle.sendtask { dice => 0, from => (0.0, 0.0), roomId => 33, name => throw, side => 1, dices => 433053, messageType => battle.sendtask, to => (0.0, 0.0), diceID => 0 }
02.09 22:02:25 ->>-: vdl/cache.battle.infoRoom { roomId => 33, _type => vdl/cache.battle.infoRoom }
02.09 22:02:25 -<<-: vdl/cache.battle.infoRoom { secondId => 4, firstId => 3, _type => vdl/cache.battle.infoRoom, turnId => 3 }
02.09 22:02:25 TIME: battle.sendtask 0.28 ms
02.09 22:02:25 == NET: test2 ret: battle.sendtask { type => battle.sendtask, errorCode => true }
02.09 22:02:25 == NET: test1 ret: battle.task { dice => 0, from => (0.0, 0.0), roomId => 33, name => throw, side => 1, type => battle.task, dices => 433053, to => (0.0, 0.0), diceID => 0 }
02.09 22:02:28 ++ NET: test2 req: battle.sendtask { dice => 5, from => (8.0, 4.0), roomId => 33, name => take, side => 1, dices => null, messageType => battle.sendtask, to => (0.0, 0.0), diceID => 4 }
02.09 22:02:28 ->>-: vdl/cache.battle.infoRoom { roomId => 33, _type => vdl/cache.battle.infoRoom }
02.09 22:02:28 -<<-: vdl/cache.battle.infoRoom { secondId => 4, firstId => 3, _type => vdl/cache.battle.infoRoom, turnId => 3 }
02.09 22:02:28 TIME: battle.sendtask 0.26 ms
02.09 22:02:28 == NET: test2 ret: battle.sendtask { type => battle.sendtask, errorCode => true }
02.09 22:02:28 == NET: test1 ret: battle.task { dice => 5, from => (8.0, 4.0), roomId => 33, name => take, side => 1, type => battle.task, dices => null, to => (0.0, 0.0), diceID => 4 }
02.09 22:02:29 ++ NET: test2 req: battle.sendtask { dice => 5, from => (8.0, 4.0), roomId => 33, name => swap, side => 1, dices => null, messageType => battle.sendtask, to => (9.0, 4.0), diceID => 0 }
02.09 22:02:29 ->>-: vdl/cache.battle.infoRoom { roomId => 33, _type => vdl/cache.battle.infoRoom }
02.09 22:02:29 -<<-: vdl/cache.battle.infoRoom { secondId => 4, firstId => 3, _type => vdl/cache.battle.infoRoom, turnId => 3 }
02.09 22:02:29 TIME: battle.sendtask 0.29 ms
02.09 22:02:29 == NET: test2 ret: battle.sendtask { type => battle.sendtask, errorCode => true }
02.09 22:02:29 == NET: test1 ret: battle.task { dice => 5, from => (8.0, 4.0), roomId => 33, name => swap, side => 1, type => battle.task, dices => null, to => (9.0, 4.0), diceID => 0 }
02.09 22:02:30 ++ NET: test2 req: battle.sendtask { dice => 3, from => (8.0, 3.0), roomId => 33, name => take, side => 1, dices => null, messageType => battle.sendtask, to => (0.0, 0.0), diceID => 1 }
02.09 22:02:30 ->>-: vdl/cache.battle.infoRoom { roomId => 33, _type => vdl/cache.battle.infoRoom }
02.09 22:02:30 -<<-: vdl/cache.battle.infoRoom { secondId => 4, firstId => 3, _type => vdl/cache.battle.infoRoom, turnId => 3 }
02.09 22:02:30 TIME: battle.sendtask 0.31 ms
02.09 22:02:30 == NET: test2 ret: battle.sendtask { type => battle.sendtask, errorCode => true }
02.09 22:02:30 == NET: test1 ret: battle.task { dice => 3, from => (8.0, 3.0), roomId => 33, name => take, side => 1, type => battle.task, dices => null, to => (0.0, 0.0), diceID => 1 }
02.09 22:02:30 ++ NET: test2 req: battle.sendtask { dice => 3, from => (8.0, 3.0), roomId => 33, name => swap, side => 1, dices => null, messageType => battle.sendtask, to => (9.0, 3.0), diceID => 0 }
02.09 22:02:30 ->>-: vdl/cache.battle.infoRoom { roomId => 33, _type => vdl/cache.battle.infoRoom }
02.09 22:02:30 -<<-: vdl/cache.battle.infoRoom { secondId => 4, firstId => 3, _type => vdl/cache.battle.infoRoom, turnId => 3 }
02.09 22:02:30 TIME: battle.sendtask 0.23 ms
02.09 22:02:30 == NET: test2 ret: battle.sendtask { type => battle.sendtask, errorCode => true }
02.09 22:02:30 == NET: test1 ret: battle.task { dice => 3, from => (8.0, 3.0), roomId => 33, name => swap, side => 1, type => battle.task, dices => null, to => (9.0, 3.0), diceID => 0 }
02.09 22:02:51 ++ NET: test2 req: battle.sendtask { dice => 0, from => (0.0, 0.0), roomId => 33, name => skip, side => 1, dices => null, messageType => battle.sendtask, to => (0.0, 0.0), diceID => 0 }
02.09 22:02:51 ->>-: vdl/cache.battle.infoRoom { roomId => 33, _type => vdl/cache.battle.infoRoom }
02.09 22:02:51 -<<-: vdl/cache.battle.infoRoom { secondId => 4, firstId => 3, _type => vdl/cache.battle.infoRoom, turnId => 3 }
02.09 22:02:51 TIME: battle.sendtask 0.41 ms
02.09 22:02:51 == NET: test2 ret: battle.sendtask { type => battle.sendtask, errorCode => true }
02.09 22:02:51 == NET: test1 ret: battle.task { dice => 0, from => (0.0, 0.0), roomId => 33, name => skip, side => 1, type => battle.task, dices => null, to => (0.0, 0.0), diceID => 0 }
02.09 22:03:05 TIMER: Check auto-disconnect...
02.09 22:03:07 STATS: vdl.0 cache, locks:4
02.09 22:04:05 TIMER: Check auto-disconnect...
02.09 22:04:07 STATS: vdl.0 cache, locks:4
02.09 22:04:57 ++ NET: test1 req: battle.end { roomId => 33, scoreSecondPlayer => 1, messageType => battle.end, scoreFirstPlayer => 0 }
02.09 22:04:57 ->>-: vdl/cache.battle.infoRoom { roomId => 33, _type => vdl/cache.battle.infoRoom }
02.09 22:04:57 -<<-: vdl/cache.battle.infoRoom { secondId => 4, firstId => 3, _type => vdl/cache.battle.infoRoom, turnId => 3 }
02.09 22:04:57 STATS: vdl.0 cache connection, 1075 calls, total 0.917373180389404 sec spent, avg 0.85 ms
02.09 22:04:57 DB: INSERT INTO statistics (id, firstid,secondid, roomid, params) VALUES ('', 3,4,33,{ scoresSecond => null, scoresFirst => null })
02.09 22:04:57 ->>-: core/server.query { q => INSERT INTO statistics (id, firstid,secondid, roomid, params) VALUES ('', 3,4,33,{ scoresSecond => null, scoresFirst => null }), _type => core/server.query }
02.09 22:04:57 -<<-: core/server.query { errorCode => ok, _type => core/server.query }
02.09 22:04:57 ->>-: vdl/cache.battle.finishRoom { roomId => 33, _type => vdl/cache.battle.finishRoom }
02.09 22:04:57 -<<-: vdl/cache.battle.finishRoom { errorCode => true, _type => vdl/cache.battle.finishRoom }
02.09 22:04:57 ->>-: vdl/cache.battle.deleteRoom { roomId => 33, _type => vdl/cache.battle.deleteRoom }
02.09 22:04:57 -<<-: vdl/cache.battle.deleteRoom { errorCode => true, _type => vdl/cache.battle.deleteRoom }
02.09 22:04:57 TIME: battle.end 16.73 ms
02.09 22:04:57 == NET: test1 ret: battle.end { type => battle.end, errorCode => ok }
02.09 22:04:57 ++ NET: test1 req: user.logout { messageType => user.logout }
02.09 22:04:57 TRACE: user.logout : No such module: user
02.09 22:04:57 TRACE: user.logout : 
Called from snipe/slave/Server.hx line 1186
02.09 22:04:57 == NET: test2 ret: battle.end { type => battle.end }
02.09 22:04:57 NET: Client (name:test1 conid:61317928 TCP) disconnected from vdl.0 (clients:1)
02.09 22:04:57 DB: SELECT id FROM battle WHERE firstid=3 OR secondid=3 AND finished <> true
02.09 22:04:57 ->>-: core/server.query { q => SELECT id FROM battle WHERE firstid=3 OR secondid=3 AND finished <> true, _type => core/server.query }
02.09 22:04:57 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
02.09 22:04:57 ->>-: vdl/cache.battle.deleteRoom { roomId => 0, _type => vdl/cache.battle.deleteRoom }
02.09 22:04:57 -<<-: vdl/cache.battle.deleteRoom { errorCode => true, _type => vdl/cache.battle.deleteRoom }
02.09 22:04:57 ->>-: core/cache.update { diff => {}, type => user, unlock => true, id => 3, _type => core/cache.update }
02.09 22:04:57 -<<-: core/cache.update { errorCode => ok, version => 2, _type => core/cache.update }
02.09 22:04:57 ->>-: core/cache.update { diff => {}, type => questdata, unlock => true, id => 3, _type => core/cache.update }
02.09 22:04:57 -<<-: core/cache.update { errorCode => ok, version => 1, _type => core/cache.update }
02.09 22:04:57 ->>-: core/user.logoutPost { networkid => , networktype =>   , id => 3, _type => core/user.logoutPost }
02.09 22:04:57 -<<-: core/user.logoutPost { errorCode => ok, _type => core/user.logoutPost }
02.09 22:05:05 TIMER: Check auto-disconnect...
02.09 22:05:07 STATS: vdl.0 cache, locks:2
02.09 22:05:09 NET: Client (conid:25795778) connected to vdl.0 (clients:2)
02.09 22:05:15 ++ NET: null req: user.login { password => test, name => test1, messageType => user.login }
02.09 22:05:15 DB: SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = E'test1' AND Password = E'test'
02.09 22:05:15 ->>-: core/server.query { q => SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = E'test1' AND Password = E'test', _type => core/server.query }
02.09 22:05:15 -<<-: core/server.query { list => {{ name => test1, networkid => , isbanned => false, id => 3 }}, errorCode => ok, _type => core/server.query }
02.09 22:05:15 ->>-: core/user.isOnlineID { id => 3, _type => core/user.isOnlineID }
02.09 22:05:15 -<<-: core/user.isOnlineID { isOnline => false, errorCode => ok, _type => core/user.isOnlineID }
02.09 22:05:15 ->>-: core/cache.get { type => user, v => -1, id => 3, _type => core/cache.get }
02.09 22:05:15 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {chemrating => 0, biorating => 0, networktype =>   , level => 0, sex => male, networkid => , skinbase => {"body_skin": 1, "head_skin": 1, "hair": 1, "eyes": 1, "mouth": 1}, informaticrating => 0, isbanned => false, params => { attrs => { _lastTime.24hr => 1472843470, lastLoginDate => 246, lastLoadDate => 903 }, effects => { list => [] } }, name => test1, skinaddavaliable => {"head : null; dress : null; weapon : null; acess : null"}, deleted => false, historyrating => 0, school => 1, rang => 0, georating => 0, password => test, language => en, region => 1, skinadditional => {"head": 0, "dress": 0, "acces": 0, "weapon": 0}, rangname => новичок                       , rusrating => 0, email => , mathrating => 0, regdate => 2016-09-02 18:16:02.951845+00, expirience => 0, city => 1, physrating => 0}, version => 0, id => 3 } }
02.09 22:05:15 ->>-: core/cache.get { type => questdata, v => -1, id => 3, _type => core/cache.get }
02.09 22:05:15 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {params => { quests => { list => [] } }}, version => 0, id => 3 } }
02.09 22:05:15 NET: Client login (conid:25795778, id:3, name:test1)
02.09 22:05:15 ->>-: core/user.loginPost { lang => en, networkid => , platform => web, networktype =>   , id => 3, _type => core/user.loginPost, ipAddr => 188.162.39.54 }
02.09 22:05:15 -<<-: core/user.loginPost { _type => core/user.loginPost }
02.09 22:05:15 == NET: test1 ret: user.login { name => test1, type => user.login, errorCode => ok, id => 3 }
02.09 22:05:15 == NET: test1 ret: user.join { name => test2, type => user.join }
02.09 22:05:15 == NET: test1 ret: user.join { name => test1, type => user.join }
02.09 22:05:15 == NET: test2 ret: user.join { name => test1, type => user.join }
02.09 22:05:16 ++ NET: test1 req: battle.find { messageType => battle.find }
02.09 22:05:16 ->>-: vdl/cache.battle.find { _type => vdl/cache.battle.find }
02.09 22:05:16 -<<-: vdl/cache.battle.find { list => {}, count => 0, errorCode => not, _type => vdl/cache.battle.find }
02.09 22:05:16 ->>-: vdl/cache.battle.create { selfId => 3, _type => vdl/cache.battle.create }
02.09 22:05:16 -<<-: vdl/cache.battle.create { room => 34, errorCode => ok, _type => vdl/cache.battle.create, player => 1 }
02.09 22:05:16 TIME: battle.find 12.27 ms
02.09 22:05:16 == NET: test1 ret: battle.find { room => 34, type => battle.find, errorCode => ok, _type => vdl/cache.battle.create, player => 1 }
02.09 22:05:22 ->>-: core/cache.update { diff => {language => en}, type => user, unlock => false, id => 3, _type => core/cache.update }
02.09 22:05:22 -<<-: core/cache.update { errorCode => ok, version => 1, _type => core/cache.update }
02.09 22:05:23 ++ NET: test2 req: battle.end { roomId => 33, scoreSecondPlayer => 1, messageType => battle.end, scoreFirstPlayer => 0 }
02.09 22:05:23 ->>-: vdl/cache.battle.infoRoom { roomId => 33, _type => vdl/cache.battle.infoRoom }
02.09 22:05:23 -<<-: vdl/cache.battle.infoRoom { errorCode => _requestException, _type => vdl/cache.battle.infoRoom }
02.09 22:05:23 TRACE: battle.end : cacheRequest exception { roomId => 33, _type => vdl/cache.battle.infoRoom }
02.09 22:05:23 TRACE: battle.end : 
Called from snipe/slave/CacheConnection.hx line 199
Called from modules/VDLBattleModule.hx line 195
Called from modules/VDLBattleModule.hx line 51
Called from modules/VDLBattleModule.hx line 33
Called from snipe/slave/Server.hx line 1203
02.09 22:05:33 NET: Client (name:test2 conid:38338119 TCP) disconnected from vdl.0 (clients:1)
02.09 22:05:33 DB: SELECT id FROM battle WHERE firstid=4 OR secondid=4 AND finished <> true
02.09 22:05:33 ->>-: core/server.query { q => SELECT id FROM battle WHERE firstid=4 OR secondid=4 AND finished <> true, _type => core/server.query }
02.09 22:05:33 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
02.09 22:05:33 ->>-: vdl/cache.battle.deleteRoom { roomId => 0, _type => vdl/cache.battle.deleteRoom }
02.09 22:05:33 -<<-: vdl/cache.battle.deleteRoom { errorCode => true, _type => vdl/cache.battle.deleteRoom }
02.09 22:05:33 ->>-: core/cache.update { diff => {}, type => user, unlock => true, id => 4, _type => core/cache.update }
02.09 22:05:33 -<<-: core/cache.update { errorCode => ok, version => 2, _type => core/cache.update }
02.09 22:05:33 ->>-: core/cache.update { diff => {}, type => questdata, unlock => true, id => 4, _type => core/cache.update }
02.09 22:05:33 -<<-: core/cache.update { errorCode => ok, version => 1, _type => core/cache.update }
02.09 22:05:33 ->>-: core/user.logoutPost { networkid => , networktype =>   , id => 4, _type => core/user.logoutPost }
02.09 22:05:33 -<<-: core/user.logoutPost { errorCode => ok, _type => core/user.logoutPost }
02.09 22:05:34 NET: Client (conid:78789361) connected to vdl.0 (clients:2)
02.09 22:05:35 ++ NET: null req: user.login { password => test, name => test2, messageType => user.login }
02.09 22:05:35 DB: SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = E'test2' AND Password = E'test'
02.09 22:05:35 ->>-: core/server.query { q => SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = E'test2' AND Password = E'test', _type => core/server.query }
02.09 22:05:35 -<<-: core/server.query { list => {{ name => test2, networkid => , isbanned => false, id => 4 }}, errorCode => ok, _type => core/server.query }
02.09 22:05:35 ->>-: core/user.isOnlineID { id => 4, _type => core/user.isOnlineID }
02.09 22:05:35 -<<-: core/user.isOnlineID { isOnline => false, errorCode => ok, _type => core/user.isOnlineID }
02.09 22:05:35 ->>-: core/cache.get { type => user, v => -1, id => 4, _type => core/cache.get }
02.09 22:05:35 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {chemrating => 0, biorating => 0, networktype =>   , level => 0, sex => male, networkid => , skinbase => {"body_skin": 1, "head_skin": 1, "hair": 1, "eyes": 1, "mouth": 1}, informaticrating => 0, isbanned => false, params => { attrs => { _lastTime.24hr => 1472845193, lastLoginDate => 246, lastLoadDate => 903 }, effects => { list => [] } }, name => test2, skinaddavaliable => {"head : null; dress : null; weapon : null; acess : null"}, deleted => false, historyrating => 0, school => 1, rang => 0, georating => 0, password => test, language => en, region => 1, skinadditional => {"head": 0, "dress": 0, "acces": 0, "weapon": 0}, rangname => новичок                       , rusrating => 0, email => , mathrating => 0, regdate => 2016-09-02 18:16:11.11368+00, expirience => 0, city => 1, physrating => 0}, version => 2, id => 4 } }
02.09 22:05:35 ->>-: core/cache.get { type => questdata, v => -1, id => 4, _type => core/cache.get }
02.09 22:05:35 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {params => { quests => { list => [] } }}, version => 1, id => 4 } }
02.09 22:05:35 NET: Client login (conid:78789361, id:4, name:test2)
02.09 22:05:35 ->>-: core/user.loginPost { lang => en, networkid => , platform => web, networktype =>   , id => 4, _type => core/user.loginPost, ipAddr => 188.162.39.231 }
02.09 22:05:35 -<<-: core/user.loginPost { _type => core/user.loginPost }
02.09 22:05:35 == NET: test2 ret: user.login { name => test2, type => user.login, errorCode => ok, id => 4 }
02.09 22:05:35 == NET: test1 ret: user.join { name => test2, type => user.join }
02.09 22:05:35 == NET: test2 ret: user.join { name => test1, type => user.join }
02.09 22:05:35 == NET: test2 ret: user.join { name => test2, type => user.join }
02.09 22:05:35 ++ NET: test2 req: battle.find { messageType => battle.find }
02.09 22:05:35 ->>-: vdl/cache.battle.find { _type => vdl/cache.battle.find }
02.09 22:05:35 -<<-: vdl/cache.battle.find { list => [{ id => 34, first => 3 }], count => 1, errorCode => ok, _type => vdl/cache.battle.find }
02.09 22:05:35 ->>-: vdl/cache.battle.join { roomId => 34, selfId => 4, _type => vdl/cache.battle.join }
02.09 22:05:35 -<<-: vdl/cache.battle.join { room => 34, errorCode => true, _type => vdl/cache.battle.join, player => 2 }
02.09 22:05:35 DB: SELECT name FROM users WHERE id=4
02.09 22:05:35 ->>-: core/server.query { q => SELECT name FROM users WHERE id=4, _type => core/server.query }
02.09 22:05:35 -<<-: core/server.query { list => {{ name => test2 }}, errorCode => ok, _type => core/server.query }
02.09 22:05:35 DB: SELECT name FROM users WHERE id=3
02.09 22:05:35 ->>-: core/server.query { q => SELECT name FROM users WHERE id=3, _type => core/server.query }
02.09 22:05:35 -<<-: core/server.query { list => {{ name => test1 }}, errorCode => ok, _type => core/server.query }
02.09 22:05:35 TIME: battle.find 2.88 ms
02.09 22:05:35 == NET: test2 ret: battle.enemy { name => test2, type => battle.enemy, enemy.id => 4, enemy.name => test1, enemy.num => 1 }
02.09 22:05:35 == NET: test2 ret: battle.find { room => 34, type => battle.find, errorCode => true, _type => vdl/cache.battle.join, player => 2 }
02.09 22:05:35 == NET: test1 ret: battle.enemy { name => test1, type => battle.enemy, enemy.id => 3, enemy.name => test2, enemy.num => 2 }
02.09 22:05:42 ->>-: core/cache.update { diff => {language => en}, type => user, unlock => false, id => 4, _type => core/cache.update }
02.09 22:05:42 -<<-: core/cache.update { errorCode => ok, version => 3, _type => core/cache.update }
02.09 22:06:05 TIMER: Check auto-disconnect...
02.09 22:06:07 STATS: vdl.0 cache, locks:4
02.09 22:06:41 NET: Client (name:test1 conid:25795778 TCP) disconnected from vdl.0 (clients:1)
02.09 22:06:41 DB: SELECT id FROM battle WHERE firstid=3 OR secondid=3 AND finished <> true
02.09 22:06:41 ->>-: core/server.query { q => SELECT id FROM battle WHERE firstid=3 OR secondid=3 AND finished <> true, _type => core/server.query }
02.09 22:06:41 -<<-: core/server.query { list => {{ id => 34 }}, errorCode => ok, _type => core/server.query }
02.09 22:06:41 STATS: vdl.0 cache connection, 1108 calls, total 0.96388053894043 sec spent, avg 0.87 ms
02.09 22:06:41 ->>-: vdl/cache.battle.deleteRoom { roomId => 34, _type => vdl/cache.battle.deleteRoom }
02.09 22:06:41 -<<-: vdl/cache.battle.deleteRoom { errorCode => true, _type => vdl/cache.battle.deleteRoom }
02.09 22:06:41 ->>-: core/cache.update { diff => {}, type => user, unlock => true, id => 3, _type => core/cache.update }
02.09 22:06:41 -<<-: core/cache.update { errorCode => ok, version => 2, _type => core/cache.update }
02.09 22:06:41 ->>-: core/cache.update { diff => {}, type => questdata, unlock => true, id => 3, _type => core/cache.update }
02.09 22:06:41 -<<-: core/cache.update { errorCode => ok, version => 1, _type => core/cache.update }
02.09 22:06:41 ->>-: core/user.logoutPost { networkid => , networktype =>   , id => 3, _type => core/user.logoutPost }
02.09 22:06:41 -<<-: core/user.logoutPost { errorCode => ok, _type => core/user.logoutPost }
02.09 22:07:05 TIMER: Check auto-disconnect...
02.09 22:07:07 STATS: vdl.0 cache, locks:2
02.09 22:07:47 NET: Client (conid:48137192) connected to vdl.0 (clients:2)
02.09 22:07:51 ++ NET: null req: user.login { password => test, name => test1, messageType => user.login }
02.09 22:07:51 DB: SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = E'test1' AND Password = E'test'
02.09 22:07:51 ->>-: core/server.query { q => SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = E'test1' AND Password = E'test', _type => core/server.query }
02.09 22:07:51 -<<-: core/server.query { list => {{ name => test1, networkid => , isbanned => false, id => 3 }}, errorCode => ok, _type => core/server.query }
02.09 22:07:51 STATS: vdl.0 cache connection, 1113 calls, total 0.968600273132324 sec spent, avg 0.87 ms
02.09 22:07:51 ->>-: core/user.isOnlineID { id => 3, _type => core/user.isOnlineID }
02.09 22:07:51 -<<-: core/user.isOnlineID { isOnline => false, errorCode => ok, _type => core/user.isOnlineID }
02.09 22:07:51 ->>-: core/cache.get { type => user, v => -1, id => 3, _type => core/cache.get }
02.09 22:07:51 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {chemrating => 0, biorating => 0, networktype =>   , level => 0, sex => male, networkid => , skinbase => {"body_skin": 1, "head_skin": 1, "hair": 1, "eyes": 1, "mouth": 1}, informaticrating => 0, isbanned => false, params => { attrs => { _lastTime.24hr => 1472843470, lastLoginDate => 246, lastLoadDate => 903 }, effects => { list => [] } }, name => test1, skinaddavaliable => {"head : null; dress : null; weapon : null; acess : null"}, deleted => false, historyrating => 0, school => 1, rang => 0, georating => 0, password => test, language => en, region => 1, skinadditional => {"head": 0, "dress": 0, "acces": 0, "weapon": 0}, rangname => новичок                       , rusrating => 0, email => , mathrating => 0, regdate => 2016-09-02 18:16:02.951845+00, expirience => 0, city => 1, physrating => 0}, version => 0, id => 3 } }
02.09 22:07:52 ->>-: core/cache.get { type => questdata, v => -1, id => 3, _type => core/cache.get }
02.09 22:07:52 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {params => { quests => { list => [] } }}, version => 0, id => 3 } }
02.09 22:07:52 NET: Client login (conid:48137192, id:3, name:test1)
02.09 22:07:52 ->>-: core/user.loginPost { lang => en, networkid => , platform => web, networktype =>   , id => 3, _type => core/user.loginPost, ipAddr => 188.162.39.54 }
02.09 22:07:52 -<<-: core/user.loginPost { _type => core/user.loginPost }
02.09 22:07:52 == NET: test1 ret: user.login { name => test1, type => user.login, errorCode => ok, id => 3 }
02.09 22:07:52 == NET: test2 ret: user.join { name => test1, type => user.join }
02.09 22:07:52 == NET: test1 ret: user.join { name => test2, type => user.join }
02.09 22:07:52 == NET: test1 ret: user.join { name => test1, type => user.join }
02.09 22:07:52 ++ NET: test1 req: battle.find { messageType => battle.find }
02.09 22:07:52 ->>-: vdl/cache.battle.find { _type => vdl/cache.battle.find }
02.09 22:07:52 -<<-: vdl/cache.battle.find { list => {}, count => 0, errorCode => not, _type => vdl/cache.battle.find }
02.09 22:07:52 ->>-: vdl/cache.battle.create { selfId => 3, _type => vdl/cache.battle.create }
02.09 22:07:52 -<<-: vdl/cache.battle.create { room => 35, errorCode => ok, _type => vdl/cache.battle.create, player => 1 }
02.09 22:07:52 TIME: battle.find 2.81 ms
02.09 22:07:52 == NET: test1 ret: battle.find { room => 35, type => battle.find, errorCode => ok, _type => vdl/cache.battle.create, player => 1 }
02.09 22:07:57 ->>-: core/cache.update { diff => {language => en}, type => user, unlock => false, id => 3, _type => core/cache.update }
02.09 22:07:57 -<<-: core/cache.update { errorCode => ok, version => 1, _type => core/cache.update }
02.09 22:08:05 TIMER: Check auto-disconnect...
02.09 22:08:07 STATS: vdl.0 cache, locks:4
02.09 22:08:24 NET: Client (name:test2 conid:78789361 TCP) disconnected from vdl.0 (clients:1)
02.09 22:08:24 DB: SELECT id FROM battle WHERE firstid=4 OR secondid=4 AND finished <> true
02.09 22:08:24 ->>-: core/server.query { q => SELECT id FROM battle WHERE firstid=4 OR secondid=4 AND finished <> true, _type => core/server.query }
02.09 22:08:24 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
02.09 22:08:24 ->>-: vdl/cache.battle.deleteRoom { roomId => 0, _type => vdl/cache.battle.deleteRoom }
02.09 22:08:24 -<<-: vdl/cache.battle.deleteRoom { errorCode => true, _type => vdl/cache.battle.deleteRoom }
02.09 22:08:24 ->>-: core/cache.update { diff => {}, type => user, unlock => true, id => 4, _type => core/cache.update }
02.09 22:08:24 -<<-: core/cache.update { errorCode => ok, version => 4, _type => core/cache.update }
02.09 22:08:24 ->>-: core/cache.update { diff => {}, type => questdata, unlock => true, id => 4, _type => core/cache.update }
02.09 22:08:24 -<<-: core/cache.update { errorCode => ok, version => 2, _type => core/cache.update }
02.09 22:08:24 ->>-: core/user.logoutPost { networkid => , networktype =>   , id => 4, _type => core/user.logoutPost }
02.09 22:08:24 -<<-: core/user.logoutPost { errorCode => ok, _type => core/user.logoutPost }
02.09 22:08:41 NET: Client (conid:58427847) connected to vdl.0 (clients:2)
02.09 22:08:42 NET: Client (name:null conid:58427847 TCP) disconnected from vdl.0 (clients:1)
02.09 22:08:42 NET: Client (conid:7318147) connected to vdl.0 (clients:2)
02.09 22:08:53 ++ NET: null req: user.login { password => test, name => test2, messageType => user.login }
02.09 22:08:53 DB: SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = E'test2' AND Password = E'test'
02.09 22:08:53 ->>-: core/server.query { q => SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = E'test2' AND Password = E'test', _type => core/server.query }
02.09 22:08:53 -<<-: core/server.query { list => {{ name => test2, networkid => , isbanned => false, id => 4 }}, errorCode => ok, _type => core/server.query }
02.09 22:08:53 STATS: vdl.0 cache connection, 1126 calls, total 0.976490020751953 sec spent, avg 0.87 ms
02.09 22:08:53 ->>-: core/user.isOnlineID { id => 4, _type => core/user.isOnlineID }
02.09 22:08:53 -<<-: core/user.isOnlineID { isOnline => false, errorCode => ok, _type => core/user.isOnlineID }
02.09 22:08:53 ->>-: core/cache.get { type => user, v => -1, id => 4, _type => core/cache.get }
02.09 22:08:53 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {chemrating => 0, biorating => 0, networktype =>   , level => 0, sex => male, networkid => , skinbase => {"body_skin": 1, "head_skin": 1, "hair": 1, "eyes": 1, "mouth": 1}, informaticrating => 0, isbanned => false, params => { attrs => { _lastTime.24hr => 1472845193, lastLoginDate => 246, lastLoadDate => 903 }, effects => { list => [] } }, name => test2, skinaddavaliable => {"head : null; dress : null; weapon : null; acess : null"}, deleted => false, historyrating => 0, school => 1, rang => 0, georating => 0, password => test, language => en, region => 1, skinadditional => {"head": 0, "dress": 0, "acces": 0, "weapon": 0}, rangname => новичок                       , rusrating => 0, email => , mathrating => 0, regdate => 2016-09-02 18:16:11.11368+00, expirience => 0, city => 1, physrating => 0}, version => 0, id => 4 } }
02.09 22:08:53 ->>-: core/cache.get { type => questdata, v => -1, id => 4, _type => core/cache.get }
02.09 22:08:53 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {params => { quests => { list => [] } }}, version => 0, id => 4 } }
02.09 22:08:53 NET: Client login (conid:7318147, id:4, name:test2)
02.09 22:08:53 ->>-: core/user.loginPost { lang => en, networkid => , platform => web, networktype =>   , id => 4, _type => core/user.loginPost, ipAddr => 188.162.39.231 }
02.09 22:08:53 -<<-: core/user.loginPost { _type => core/user.loginPost }
02.09 22:08:53 == NET: test2 ret: user.login { name => test2, type => user.login, errorCode => ok, id => 4 }
02.09 22:08:53 == NET: test1 ret: user.join { name => test2, type => user.join }
02.09 22:08:53 == NET: test2 ret: user.join { name => test1, type => user.join }
02.09 22:08:53 == NET: test2 ret: user.join { name => test2, type => user.join }
02.09 22:08:53 ++ NET: test2 req: battle.find { messageType => battle.find }
02.09 22:08:53 ->>-: vdl/cache.battle.find { _type => vdl/cache.battle.find }
02.09 22:08:53 -<<-: vdl/cache.battle.find { list => [{ id => 35, first => 3 }], count => 1, errorCode => ok, _type => vdl/cache.battle.find }
02.09 22:08:53 ->>-: vdl/cache.battle.join { roomId => 35, selfId => 4, _type => vdl/cache.battle.join }
02.09 22:08:53 -<<-: vdl/cache.battle.join { room => 35, errorCode => true, _type => vdl/cache.battle.join, player => 2 }
02.09 22:08:53 DB: SELECT name FROM users WHERE id=4
02.09 22:08:53 ->>-: core/server.query { q => SELECT name FROM users WHERE id=4, _type => core/server.query }
02.09 22:08:53 -<<-: core/server.query { list => {{ name => test2 }}, errorCode => ok, _type => core/server.query }
02.09 22:08:53 DB: SELECT name FROM users WHERE id=3
02.09 22:08:53 ->>-: core/server.query { q => SELECT name FROM users WHERE id=3, _type => core/server.query }
02.09 22:08:53 -<<-: core/server.query { list => {{ name => test1 }}, errorCode => ok, _type => core/server.query }
02.09 22:08:53 TIME: battle.find 2.28 ms
02.09 22:08:53 == NET: test2 ret: battle.enemy { name => test2, type => battle.enemy, enemy.id => 4, enemy.name => test1, enemy.num => 1 }
02.09 22:08:53 == NET: test1 ret: battle.enemy { name => test1, type => battle.enemy, enemy.id => 3, enemy.name => test2, enemy.num => 2 }
02.09 22:08:53 == NET: test2 ret: battle.find { room => 35, type => battle.find, errorCode => true, _type => vdl/cache.battle.join, player => 2 }
02.09 22:09:01 ++ NET: test1 req: battle.sendtask { dice => 0, from => (0.0, 0.0), roomId => 35, name => throw, side => 2, dices => 451211, messageType => battle.sendtask, to => (0.0, 0.0), diceID => 0 }
02.09 22:09:01 ->>-: vdl/cache.battle.infoRoom { roomId => 35, _type => vdl/cache.battle.infoRoom }
02.09 22:09:01 -<<-: vdl/cache.battle.infoRoom { secondId => 4, firstId => 3, _type => vdl/cache.battle.infoRoom, turnId => 3 }
02.09 22:09:01 TIME: battle.sendtask 0.27 ms
02.09 22:09:01 == NET: test1 ret: battle.sendtask { type => battle.sendtask, errorCode => true }
02.09 22:09:01 == NET: test2 ret: battle.task { dice => 0, from => (0.0, 0.0), roomId => 35, name => throw, side => 2, type => battle.task, dices => 451211, to => (0.0, 0.0), diceID => 0 }
02.09 22:09:02 ->>-: core/cache.update { diff => {language => en}, type => user, unlock => false, id => 4, _type => core/cache.update }
02.09 22:09:02 -<<-: core/cache.update { errorCode => ok, version => 1, _type => core/cache.update }
02.09 22:09:05 ++ NET: test1 req: battle.sendtask { dice => 5, from => (7.0, 3.0), roomId => 35, name => take, side => 2, dices => null, messageType => battle.sendtask, to => (0.0, 0.0), diceID => 1 }
02.09 22:09:05 ->>-: vdl/cache.battle.infoRoom { roomId => 35, _type => vdl/cache.battle.infoRoom }
02.09 22:09:05 -<<-: vdl/cache.battle.infoRoom { secondId => 4, firstId => 3, _type => vdl/cache.battle.infoRoom, turnId => 3 }
02.09 22:09:05 TIME: battle.sendtask 0.26 ms
02.09 22:09:05 == NET: test1 ret: battle.sendtask { type => battle.sendtask, errorCode => true }
02.09 22:09:05 == NET: test2 ret: battle.task { dice => 5, from => (7.0, 3.0), roomId => 35, name => take, side => 2, type => battle.task, dices => null, to => (0.0, 0.0), diceID => 1 }
02.09 22:09:05 ++ NET: test1 req: battle.sendtask { dice => 5, from => (7.0, 3.0), roomId => 35, name => swap, side => 2, dices => null, messageType => battle.sendtask, to => (8.0, 3.0), diceID => 0 }
02.09 22:09:05 ->>-: vdl/cache.battle.infoRoom { roomId => 35, _type => vdl/cache.battle.infoRoom }
02.09 22:09:05 -<<-: vdl/cache.battle.infoRoom { secondId => 4, firstId => 3, _type => vdl/cache.battle.infoRoom, turnId => 3 }
02.09 22:09:05 TIME: battle.sendtask 0.27 ms
02.09 22:09:05 == NET: test1 ret: battle.sendtask { type => battle.sendtask, errorCode => true }
02.09 22:09:05 == NET: test2 ret: battle.task { dice => 5, from => (7.0, 3.0), roomId => 35, name => swap, side => 2, type => battle.task, dices => null, to => (8.0, 3.0), diceID => 0 }
02.09 22:09:05 TIMER: Check auto-disconnect...
02.09 22:09:07 STATS: vdl.0 cache, locks:4
02.09 22:09:10 ++ NET: test1 req: battle.sendtask { dice => 0, from => (0.0, 0.0), roomId => 35, name => skip, side => 2, dices => null, messageType => battle.sendtask, to => (0.0, 0.0), diceID => 0 }
02.09 22:09:10 ->>-: vdl/cache.battle.infoRoom { roomId => 35, _type => vdl/cache.battle.infoRoom }
02.09 22:09:10 -<<-: vdl/cache.battle.infoRoom { secondId => 4, firstId => 3, _type => vdl/cache.battle.infoRoom, turnId => 3 }
02.09 22:09:10 TIME: battle.sendtask 0.26 ms
02.09 22:09:10 == NET: test1 ret: battle.sendtask { type => battle.sendtask, errorCode => true }
02.09 22:09:10 == NET: test2 ret: battle.task { dice => 0, from => (0.0, 0.0), roomId => 35, name => skip, side => 2, type => battle.task, dices => null, to => (0.0, 0.0), diceID => 0 }
02.09 22:09:15 ++ NET: test1 req: battle.end { roomId => 35, scoreSecondPlayer => 0, messageType => battle.end, scoreFirstPlayer => 0 }
02.09 22:09:15 NET: Client (name:test1 conid:48137192 TCP) disconnected from vdl.0 (clients:1)
02.09 22:09:15 ->>-: vdl/cache.battle.infoRoom { roomId => 35, _type => vdl/cache.battle.infoRoom }
02.09 22:09:15 -<<-: vdl/cache.battle.infoRoom { secondId => 4, firstId => 3, _type => vdl/cache.battle.infoRoom, turnId => 3 }
02.09 22:09:15 DB: INSERT INTO statistics (id, firstid,secondid, roomid, params) VALUES ('', 3,4,35,{ scoresSecond => null, scoresFirst => null })
02.09 22:09:15 ->>-: core/server.query { q => INSERT INTO statistics (id, firstid,secondid, roomid, params) VALUES ('', 3,4,35,{ scoresSecond => null, scoresFirst => null }), _type => core/server.query }
02.09 22:09:15 -<<-: core/server.query { errorCode => ok, _type => core/server.query }
02.09 22:09:15 ->>-: vdl/cache.battle.finishRoom { roomId => 35, _type => vdl/cache.battle.finishRoom }
02.09 22:09:15 -<<-: vdl/cache.battle.finishRoom { errorCode => true, _type => vdl/cache.battle.finishRoom }
02.09 22:09:15 ->>-: vdl/cache.battle.deleteRoom { roomId => 35, _type => vdl/cache.battle.deleteRoom }
02.09 22:09:15 -<<-: vdl/cache.battle.deleteRoom { errorCode => true, _type => vdl/cache.battle.deleteRoom }
02.09 22:09:15 TIME: battle.end 17.34 ms
02.09 22:09:15 ++ NET: test1 req: user.logout { messageType => user.logout }
02.09 22:09:15 == NET: test1 ret: battle.end { type => battle.end, errorCode => ok }
02.09 22:09:15 TRACE: user.logout : No such module: user
02.09 22:09:15 TRACE: user.logout : 
Called from snipe/slave/Server.hx line 1186
02.09 22:09:15 DB: SELECT id FROM battle WHERE firstid=3 OR secondid=3 AND finished <> true
02.09 22:09:15 ->>-: core/server.query { q => SELECT id FROM battle WHERE firstid=3 OR secondid=3 AND finished <> true, _type => core/server.query }
02.09 22:09:15 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
02.09 22:09:15 ->>-: vdl/cache.battle.deleteRoom { roomId => 0, _type => vdl/cache.battle.deleteRoom }
02.09 22:09:15 -<<-: vdl/cache.battle.deleteRoom { errorCode => true, _type => vdl/cache.battle.deleteRoom }
02.09 22:09:15 ->>-: core/cache.update { diff => {}, type => user, unlock => true, id => 3, _type => core/cache.update }
02.09 22:09:15 -<<-: core/cache.update { errorCode => ok, version => 2, _type => core/cache.update }
02.09 22:09:15 ->>-: core/cache.update { diff => {}, type => questdata, unlock => true, id => 3, _type => core/cache.update }
02.09 22:09:15 -<<-: core/cache.update { errorCode => ok, version => 1, _type => core/cache.update }
02.09 22:09:15 ->>-: core/user.logoutPost { networkid => , networktype =>   , id => 3, _type => core/user.logoutPost }
02.09 22:09:15 -<<-: core/user.logoutPost { errorCode => ok, _type => core/user.logoutPost }
02.09 22:09:15 == NET: test2 ret: battle.end { type => battle.end }
02.09 22:09:15 ++ NET: test2 req: battle.end { roomId => 35, scoreSecondPlayer => 0, messageType => battle.end, scoreFirstPlayer => 0 }
02.09 22:09:15 ->>-: vdl/cache.battle.infoRoom { roomId => 35, _type => vdl/cache.battle.infoRoom }
02.09 22:09:15 -<<-: vdl/cache.battle.infoRoom { secondId => 4, firstId => 3, _type => vdl/cache.battle.infoRoom, turnId => 3 }
02.09 22:09:15 DB: INSERT INTO statistics (id, firstid,secondid, roomid, params) VALUES ('', 4,4,35,{ scoresSecond => null, scoresFirst => null })
02.09 22:09:15 ->>-: core/server.query { q => INSERT INTO statistics (id, firstid,secondid, roomid, params) VALUES ('', 4,4,35,{ scoresSecond => null, scoresFirst => null }), _type => core/server.query }
02.09 22:09:15 -<<-: core/server.query { errorCode => ok, _type => core/server.query }
02.09 22:09:15 ->>-: vdl/cache.battle.finishRoom { roomId => 35, _type => vdl/cache.battle.finishRoom }
02.09 22:09:15 -<<-: vdl/cache.battle.finishRoom { errorCode => true, _type => vdl/cache.battle.finishRoom }
02.09 22:09:15 ->>-: vdl/cache.battle.deleteRoom { roomId => 35, _type => vdl/cache.battle.deleteRoom }
02.09 22:09:15 -<<-: vdl/cache.battle.deleteRoom { errorCode => true, _type => vdl/cache.battle.deleteRoom }
02.09 22:09:15 TIME: battle.end 13.21 ms
02.09 22:09:15 == NET: test2 ret: battle.end { type => battle.end, errorCode => ok }
02.09 22:09:15 == NET: test2 ret: battle.end { type => battle.end }
02.09 22:09:36 NET: Client (name:test2 conid:7318147 TCP) disconnected from vdl.0 (clients:0)
02.09 22:09:36 DB: SELECT id FROM battle WHERE firstid=4 OR secondid=4 AND finished <> true
02.09 22:09:36 ->>-: core/server.query { q => SELECT id FROM battle WHERE firstid=4 OR secondid=4 AND finished <> true, _type => core/server.query }
02.09 22:09:36 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
02.09 22:09:36 ->>-: vdl/cache.battle.deleteRoom { roomId => 0, _type => vdl/cache.battle.deleteRoom }
02.09 22:09:36 -<<-: vdl/cache.battle.deleteRoom { errorCode => true, _type => vdl/cache.battle.deleteRoom }
02.09 22:09:36 ->>-: core/cache.update { diff => {}, type => user, unlock => true, id => 4, _type => core/cache.update }
02.09 22:09:36 -<<-: core/cache.update { errorCode => ok, version => 2, _type => core/cache.update }
02.09 22:09:36 ->>-: core/cache.update { diff => {}, type => questdata, unlock => true, id => 4, _type => core/cache.update }
02.09 22:09:36 -<<-: core/cache.update { errorCode => ok, version => 1, _type => core/cache.update }
02.09 22:09:36 ->>-: core/user.logoutPost { networkid => , networktype =>   , id => 4, _type => core/user.logoutPost }
02.09 22:09:36 -<<-: core/user.logoutPost { errorCode => ok, _type => core/user.logoutPost }
02.09 22:09:36 NET: Client (conid:81993818) connected to vdl.0 (clients:1)
02.09 22:10:05 TIMER: Check auto-disconnect...
02.09 22:10:07 STATS: vdl.0 cache, locks:0
02.09 22:10:45 NET: Client (name:null conid:81993818 TCP) disconnected from vdl.0 (clients:0)
02.09 22:10:45 NET: Client (conid:43488708) connected to vdl.0 (clients:1)
02.09 22:11:00 NET: Client (name:null conid:43488708 TCP) disconnected from vdl.0 (clients:0)
02.09 22:11:05 TIMER: Check auto-disconnect...
02.09 22:11:07 STATS: vdl.0 cache, locks:0
02.09 22:12:05 TIMER: Check auto-disconnect...
02.09 22:12:07 STATS: vdl.0 cache, locks:0
02.09 22:13:05 TIMER: Check auto-disconnect...
02.09 22:13:07 STATS: vdl.0 cache, locks:0
02.09 22:14:05 TIMER: Check auto-disconnect...
02.09 22:14:07 STATS: vdl.0 cache, locks:0
02.09 22:15:05 TIMER: Check auto-disconnect...
02.09 22:15:07 STATS: vdl.0 cache, locks:0
02.09 22:16:05 TIMER: Check auto-disconnect...
02.09 22:16:07 STATS: vdl.0 cache, locks:0
02.09 22:17:05 TIMER: Check auto-disconnect...
02.09 22:17:07 STATS: vdl.0 cache, locks:0
02.09 22:17:08 NET: Client (conid:35156201) connected to vdl.0 (clients:1)
02.09 22:17:08 NET: Client (name:null conid:35156201 TCP) disconnected from vdl.0 (clients:0)
02.09 22:17:08 NET: Client (conid:50225603) connected to vdl.0 (clients:1)
02.09 22:17:12 ++ NET: null req: battle.end { roomId => 0, scoreSecondPlayer => 0, messageType => battle.end, scoreFirstPlayer => 0 }
02.09 22:17:12 TRACE: User not logon yet.
02.09 22:17:14 NET: Client (name:null conid:50225603 TCP) disconnected from vdl.0 (clients:0)
02.09 22:17:14 NET: Client (conid:49504679) connected to vdl.0 (clients:1)
02.09 22:18:01 NET: Client (name:null conid:49504679 TCP) disconnected from vdl.0 (clients:0)
02.09 22:18:05 TIMER: Check auto-disconnect...
02.09 22:18:07 STATS: vdl.0 cache, locks:0
02.09 22:19:05 TIMER: Check auto-disconnect...
02.09 22:19:07 STATS: vdl.0 cache, locks:0
02.09 22:20:05 TIMER: Check auto-disconnect...
02.09 22:20:07 STATS: vdl.0 cache, locks:0
02.09 22:21:05 TIMER: Check auto-disconnect...
02.09 22:21:07 STATS: vdl.0 cache, locks:0
02.09 22:22:05 TIMER: Check auto-disconnect...
02.09 22:22:07 STATS: vdl.0 cache, locks:0
02.09 22:23:05 TIMER: Check auto-disconnect...
02.09 22:23:07 STATS: vdl.0 cache, locks:0
02.09 22:24:05 TIMER: Check auto-disconnect...
02.09 22:24:07 STATS: vdl.0 cache, locks:0
02.09 22:25:05 TIMER: Check auto-disconnect...
02.09 22:25:07 STATS: vdl.0 cache, locks:0
02.09 22:26:05 TIMER: Check auto-disconnect...
02.09 22:26:07 STATS: vdl.0 cache, locks:0
02.09 22:27:05 TIMER: Check auto-disconnect...
02.09 22:27:07 STATS: vdl.0 cache, locks:0
02.09 22:28:05 TIMER: Check auto-disconnect...
02.09 22:28:07 STATS: vdl.0 cache, locks:0
02.09 22:29:05 TIMER: Check auto-disconnect...
02.09 22:29:07 STATS: vdl.0 cache, locks:0
02.09 22:30:05 TIMER: Check auto-disconnect...
02.09 22:30:07 STATS: vdl.0 cache, locks:0
02.09 22:31:05 TIMER: Check auto-disconnect...
02.09 22:31:07 STATS: vdl.0 cache, locks:0
02.09 22:32:05 TIMER: Check auto-disconnect...
02.09 22:32:07 STATS: vdl.0 cache, locks:0
02.09 22:33:05 TIMER: Check auto-disconnect...
02.09 22:33:07 STATS: vdl.0 cache, locks:0
02.09 22:34:05 TIMER: Check auto-disconnect...
02.09 22:34:07 STATS: vdl.0 cache, locks:0
02.09 22:35:05 TIMER: Check auto-disconnect...
02.09 22:35:07 STATS: vdl.0 cache, locks:0
02.09 22:36:05 TIMER: Check auto-disconnect...
02.09 22:36:07 STATS: vdl.0 cache, locks:0
02.09 22:37:05 TIMER: Check auto-disconnect...
02.09 22:37:07 STATS: vdl.0 cache, locks:0
02.09 22:38:05 TIMER: Check auto-disconnect...
02.09 22:38:07 STATS: vdl.0 cache, locks:0
02.09 22:39:05 TIMER: Check auto-disconnect...
02.09 22:39:07 STATS: vdl.0 cache, locks:0
02.09 22:40:05 TIMER: Check auto-disconnect...
02.09 22:40:07 STATS: vdl.0 cache, locks:0
02.09 22:41:05 TIMER: Check auto-disconnect...
02.09 22:41:07 STATS: vdl.0 cache, locks:0
02.09 22:42:05 TIMER: Check auto-disconnect...
02.09 22:42:07 STATS: vdl.0 cache, locks:0
02.09 22:43:05 TIMER: Check auto-disconnect...
02.09 22:43:07 STATS: vdl.0 cache, locks:0
02.09 22:44:05 TIMER: Check auto-disconnect...
02.09 22:44:07 STATS: vdl.0 cache, locks:0
02.09 22:45:05 TIMER: Check auto-disconnect...
02.09 22:45:07 STATS: vdl.0 cache, locks:0
02.09 22:46:05 TIMER: Check auto-disconnect...
02.09 22:46:07 STATS: vdl.0 cache, locks:0
02.09 22:47:05 TIMER: Check auto-disconnect...
02.09 22:47:07 STATS: vdl.0 cache, locks:0
02.09 22:48:05 TIMER: Check auto-disconnect...
02.09 22:48:07 STATS: vdl.0 cache, locks:0
02.09 22:49:05 TIMER: Check auto-disconnect...
02.09 22:49:07 STATS: vdl.0 cache, locks:0
02.09 22:50:05 TIMER: Check auto-disconnect...
02.09 22:50:07 STATS: vdl.0 cache, locks:0
02.09 22:51:05 TIMER: Check auto-disconnect...
02.09 22:51:07 STATS: vdl.0 cache, locks:0
02.09 22:52:05 TIMER: Check auto-disconnect...
02.09 22:52:07 STATS: vdl.0 cache, locks:0
02.09 22:53:05 TIMER: Check auto-disconnect...
02.09 22:53:07 STATS: vdl.0 cache, locks:0
02.09 22:54:05 TIMER: Check auto-disconnect...
02.09 22:54:07 STATS: vdl.0 cache, locks:0
02.09 22:55:05 TIMER: Check auto-disconnect...
02.09 22:55:07 STATS: vdl.0 cache, locks:0
02.09 22:56:05 TIMER: Check auto-disconnect...
02.09 22:56:07 STATS: vdl.0 cache, locks:0
02.09 22:57:05 TIMER: Check auto-disconnect...
02.09 22:57:07 STATS: vdl.0 cache, locks:0
02.09 22:58:05 TIMER: Check auto-disconnect...
02.09 22:58:07 STATS: vdl.0 cache, locks:0
02.09 22:59:05 TIMER: Check auto-disconnect...
02.09 22:59:07 STATS: vdl.0 cache, locks:0
