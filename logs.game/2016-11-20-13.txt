20.11 13:00:08 TIMER: Check auto-disconnect...
20.11 13:00:14 STATS: vdl.0 cache, locks:0
20.11 13:01:08 TIMER: Check auto-disconnect...
20.11 13:01:14 STATS: vdl.0 cache, locks:0
20.11 13:02:08 TIMER: Check auto-disconnect...
20.11 13:02:14 STATS: vdl.0 cache, locks:0
20.11 13:03:08 TIMER: Check auto-disconnect...
20.11 13:03:14 STATS: vdl.0 cache, locks:0
20.11 13:04:08 TIMER: Check auto-disconnect...
20.11 13:04:14 STATS: vdl.0 cache, locks:0
20.11 13:05:08 TIMER: Check auto-disconnect...
20.11 13:05:14 STATS: vdl.0 cache, locks:0
20.11 13:06:08 TIMER: Check auto-disconnect...
20.11 13:06:14 STATS: vdl.0 cache, locks:0
20.11 13:07:08 TIMER: Check auto-disconnect...
20.11 13:07:14 STATS: vdl.0 cache, locks:0
20.11 13:08:08 TIMER: Check auto-disconnect...
20.11 13:08:14 STATS: vdl.0 cache, locks:0
20.11 13:09:08 TIMER: Check auto-disconnect...
20.11 13:09:14 STATS: vdl.0 cache, locks:0
20.11 13:10:08 TIMER: Check auto-disconnect...
20.11 13:10:14 STATS: vdl.0 cache, locks:0
20.11 13:11:08 TIMER: Check auto-disconnect...
20.11 13:11:14 STATS: vdl.0 cache, locks:0
20.11 13:12:08 TIMER: Check auto-disconnect...
20.11 13:12:14 STATS: vdl.0 cache, locks:0
20.11 13:13:08 TIMER: Check auto-disconnect...
20.11 13:13:14 STATS: vdl.0 cache, locks:0
20.11 13:14:08 TIMER: Check auto-disconnect...
20.11 13:14:14 STATS: vdl.0 cache, locks:0
20.11 13:15:08 TIMER: Check auto-disconnect...
20.11 13:15:14 STATS: vdl.0 cache, locks:0
20.11 13:16:08 TIMER: Check auto-disconnect...
20.11 13:16:14 STATS: vdl.0 cache, locks:0
20.11 13:17:08 TIMER: Check auto-disconnect...
20.11 13:17:14 STATS: vdl.0 cache, locks:0
20.11 13:18:08 TIMER: Check auto-disconnect...
20.11 13:18:14 STATS: vdl.0 cache, locks:0
20.11 13:19:08 TIMER: Check auto-disconnect...
20.11 13:19:14 STATS: vdl.0 cache, locks:0
20.11 13:20:08 TIMER: Check auto-disconnect...
20.11 13:20:14 STATS: vdl.0 cache, locks:0
20.11 13:21:08 TIMER: Check auto-disconnect...
20.11 13:21:14 STATS: vdl.0 cache, locks:0
20.11 13:22:08 TIMER: Check auto-disconnect...
20.11 13:22:14 STATS: vdl.0 cache, locks:0
20.11 13:23:08 TIMER: Check auto-disconnect...
20.11 13:23:14 STATS: vdl.0 cache, locks:0
20.11 13:24:08 TIMER: Check auto-disconnect...
20.11 13:24:14 STATS: vdl.0 cache, locks:0
20.11 13:25:08 TIMER: Check auto-disconnect...
20.11 13:25:14 STATS: vdl.0 cache, locks:0
20.11 13:26:08 TIMER: Check auto-disconnect...
20.11 13:26:14 STATS: vdl.0 cache, locks:0
20.11 13:27:08 TIMER: Check auto-disconnect...
20.11 13:27:14 STATS: vdl.0 cache, locks:0
20.11 13:28:08 TIMER: Check auto-disconnect...
20.11 13:28:14 STATS: vdl.0 cache, locks:0
20.11 13:29:08 TIMER: Check auto-disconnect...
20.11 13:29:14 STATS: vdl.0 cache, locks:0
20.11 13:30:08 TIMER: Check auto-disconnect...
20.11 13:30:14 STATS: vdl.0 cache, locks:0
20.11 13:31:08 TIMER: Check auto-disconnect...
20.11 13:31:14 STATS: vdl.0 cache, locks:0
20.11 13:32:08 TIMER: Check auto-disconnect...
20.11 13:32:14 STATS: vdl.0 cache, locks:0
20.11 13:33:08 TIMER: Check auto-disconnect...
20.11 13:33:14 STATS: vdl.0 cache, locks:0
20.11 13:34:08 TIMER: Check auto-disconnect...
20.11 13:34:14 STATS: vdl.0 cache, locks:0
20.11 13:35:08 TIMER: Check auto-disconnect...
20.11 13:35:14 STATS: vdl.0 cache, locks:0
20.11 13:36:08 TIMER: Check auto-disconnect...
20.11 13:36:14 STATS: vdl.0 cache, locks:0
20.11 13:36:16 NET: Client (conid:38384743) connected to vdl.0 (clients:1)
20.11 13:36:16 NET: Client (conid:38384743) switched protocol to WS
20.11 13:36:20 ++ NET: null req: user.register { messageType => user.register }
20.11 13:36:20 DB: SELECT * FROM users
20.11 13:36:20 ->>-: core/server.query { q => SELECT * FROM users, _type => core/server.query }
20.11 13:36:20 -<<-: core/server.query { list => {{ city => , password => , name => --- DEFAULT ATTRIBUTES ---, year => , networkid => , params => {"attrs":{},"inventory":{"list":[]}}, "info": {"city":"", "year": "", "email": ""}, networktype =>   , email => , isbanned => false, regdate => 2016-11-10 11:48:59.9391+00, language =>   , id => 1, deleted => false }, { city => , password => uid16, name => uid16, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479544800,"lastLoginDate":324,"lastLoadDate":1120},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-19 08:37:10.286209+00, language => en, id => 16, deleted => false }, { city => , password => uid2, name => uid2, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1478779175,"lastLoginDate":315,"lastLoadDate":1111},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 11:56:09.590311+00, language => en, id => 2, deleted => false }, { city => , password => uid3, name => uid3, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 12:08:05.144895+00, language =>   , id => 3, deleted => false }, { city => , password => uid4, name => uid4, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 12:24:23.638304+00, language =>   , id => 4, deleted => false }, { city => , password => uid5, name => uid5, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 12:28:38.741567+00, language =>   , id => 5, deleted => false }, { city => , password => uid11, name => uid11, year => null, networkid => , params => {"info":{"city":"","year":null,"email":null},"inventory":{"list":[]},"vars":{},"attrs":{"_lastTime.24hr":1479627940,"lastLoginDate":325,"lastLoadDate":1121},"effects":{"list":[]}}, networktype =>   , email => null, isbanned => false, regdate => 2016-11-13 20:03:37.670616+00, language => en, id => 11, deleted => false }, { city => , password => uid6, name => uid6, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479119901,"lastLoginDate":319,"lastLoadDate":1115},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 12:31:41.286497+00, language => en, id => 6, deleted => false }, { city => , password => uid13, name => uid13, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-16 11:16:26.870358+00, language =>   , id => 13, deleted => false }, { city => , password => uid14, name => uid14, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-16 11:17:20.119377+00, language =>   , id => 14, deleted => false }, { city => , password => uid7, name => uid7, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 13:32:51.765479+00, language =>   , id => 7, deleted => false }, { city => , password => uid17, name => uid17, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479557423,"lastLoginDate":324,"lastLoadDate":1120},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-19 12:06:11.008729+00, language => en, id => 17, deleted => false }, { city => , password => uid19, name => uid19, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-19 12:43:31.432703+00, language =>   , id => 19, deleted => false }, { city => , password => uid18, name => uid18, year => null, networkid => , params => {"info":{"city":"","year":null,"email":null},"inventory":{"list":[]},"vars":{},"attrs":{"_lastTime.24hr":1479558241,"lastLoginDate":324,"lastLoadDate":1120},"effects":{"list":[]}}, networktype =>   , email => null, isbanned => false, regdate => 2016-11-19 12:24:01.448243+00, language => en, id => 18, deleted => false }, { city => , password => uid20, name => uid20, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-19 15:34:13.927466+00, language =>   , id => 20, deleted => false }, { city => , password => uid21, name => uid21, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-19 16:38:50.046266+00, language =>   , id => 21, deleted => false }, { city => , password => uid22, name => uid22, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-19 19:28:32.319424+00, language =>   , id => 22, deleted => false }, { city => , password => uid12, name => uid12, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479299358,"lastLoginDate":321,"lastLoadDate":1117},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-14 12:05:08.368578+00, language => en, id => 12, deleted => false }, { city => , password => uid8, name => uid8, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479405440,"lastLoginDate":322,"lastLoadDate":1118},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 15:37:47.142701+00, language => en, id => 8, deleted => false }, { city => , password => uid10, name => uid10, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1478975056,"lastLoginDate":318,"lastLoadDate":1114},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-11 16:44:40.114978+00, language => en, id => 10, deleted => false }, { city => , password => uid9, name => uid9, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479481494,"lastLoginDate":323,"lastLoadDate":1119},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-11 07:57:55.30687+00, language => en, id => 9, deleted => false }, { city => , password => uid15, name => uid15, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-18 15:18:55.183965+00, language =>   , id => 15, deleted => false }}, errorCode => ok, _type => core/server.query }
20.11 13:36:20 STATS: vdl.0 cache connection, 212 calls, total 0.11993932723999 sec spent, avg 0.57 ms
20.11 13:36:20 == NET: null ret: user.auth { type => user.auth, token => dWlkMjM= }
20.11 13:36:20 DB: SELECT ID FROM Users WHERE Name = 'uid23'
20.11 13:36:20 ->>-: core/server.query { q => SELECT ID FROM Users WHERE Name = 'uid23', _type => core/server.query }
20.11 13:36:20 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
20.11 13:36:20 DB: SELECT nextval('Users_id_seq') AS id
20.11 13:36:20 ->>-: core/server.query { q => SELECT nextval('Users_id_seq') AS id, _type => core/server.query }
20.11 13:36:20 -<<-: core/server.query { list => {{ id => 23 }}, errorCode => ok, _type => core/server.query }
20.11 13:36:20 ->>-: core/user.register { password => uid23, name => uid23, fullParams => { password => uid23, name => uid23, networkid => , networktype => , messageType => user.register, id => 23 }, networkid => , connectionID => 38384743, networktype => , email => , id => 23, _type => core/user.register }
20.11 13:36:20 -<<-: core/user.register { errorCode => ok, _type => core/user.register }
20.11 13:36:20 -<<-: core/user.registerResponse { password => uid23, name => uid23, _isNotify => true, fullParams => { password => uid23, name => uid23, networkid => , networktype => , messageType => user.register, id => 23 }, networkid => , connectionID => 38384743, networktype => , email => , id => 23, _type => core/user.registerResponse }
20.11 13:36:20 DB: SELECT token FROM tokens WHERE userid = 23
20.11 13:36:20 ->>-: core/server.query { q => SELECT token FROM tokens WHERE userid = 23, _type => core/server.query }
20.11 13:36:20 -<<-: core/server.query { list => {{ token => f50e2a9461fa25b91ab7c4bbbeb7fbd2 }, { token => dbde0fa1295703d3bfa03eb61b17c977 }}, errorCode => ok, _type => core/server.query }
20.11 13:36:20 == NET: null ret: user.register { type => user.register, errorCode => ok, token => f50e2a9461fa25b91ab7c4bbbeb7fbd2 }
20.11 13:36:20 ++ NET: null req: user.login { messageType => user.login, token => dWlkMjM= }
20.11 13:36:20 DB: SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'uid23' AND Password = 'uid23'
20.11 13:36:20 ->>-: core/server.query { q => SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'uid23' AND Password = 'uid23', _type => core/server.query }
20.11 13:36:20 -<<-: core/server.query { list => {{ name => uid23, networkid => , isbanned => false, id => 23 }}, errorCode => ok, _type => core/server.query }
20.11 13:36:20 ->>-: core/user.isOnlineID { id => 23, _type => core/user.isOnlineID }
20.11 13:36:20 -<<-: core/user.isOnlineID { isOnline => false, errorCode => ok, _type => core/user.isOnlineID }
20.11 13:36:20 ->>-: core/cache.get { type => user, v => -1, id => 23, _type => core/cache.get }
20.11 13:36:20 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {name => uid23, deleted => false, school => 1, year => null, email => null, networktype =>   , password => uid23, isbanned => false, regdate => 2016-11-20 13:36:20.841503+00, city => 1, language =>   , region => 1, networkid => , params => { info => { city => , year => null, email => null }, inventory => { list => [] }, vars => { addAccess => , regionName => null, addDress => , cityName => null, schoolName => null, friendList => [], addWeapon => , addHeader =>  }, attrs => { level => 1, hints => 15 }, effects => { list => [] } }}, version => 19, id => 23 } }
20.11 13:36:20 ->>-: core/cache.get { type => questdata, v => -1, id => 23, _type => core/cache.get }
20.11 13:36:20 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {params => { quests => { list => [] } }}, version => 0, id => 23 } }
20.11 13:36:20 NET: Client login (conid:38384743, id:23, name:uid23)
20.11 13:36:20 ->>-: core/user.loginPost { lang => en, networkid => , platform => web, networktype =>   , id => 23, _type => core/user.loginPost, ipAddr => 91.225.76.192 }
20.11 13:36:20 -<<-: core/user.loginPost { _type => core/user.loginPost }
20.11 13:36:20 DB: SELECT token FROM tokens WHERE userid = 23
20.11 13:36:20 ->>-: core/server.query { q => SELECT token FROM tokens WHERE userid = 23, _type => core/server.query }
20.11 13:36:20 -<<-: core/server.query { list => {{ token => f50e2a9461fa25b91ab7c4bbbeb7fbd2 }, { token => dbde0fa1295703d3bfa03eb61b17c977 }}, errorCode => ok, _type => core/server.query }
20.11 13:36:20 DB: SELECT ID FROM TempUserLogins WHERE UserID = 23 AND Date = 'today'::timestamp
20.11 13:36:20 ->>-: core/server.query { q => SELECT ID FROM TempUserLogins WHERE UserID = 23 AND Date = 'today'::timestamp, _type => core/server.query }
20.11 13:36:20 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
20.11 13:36:20 PENDING: INSERT INTO TempUserLogins (UserID, Date) VALUES (23, 'today'::timestamp)
20.11 13:36:20 == NET: uid23 ret: user.login { name => uid23, type => user.login, errorCode => ok, id => 23, token => f50e2a9461fa25b91ab7c4bbbeb7fbd2 }
20.11 13:36:20 == NET: uid23 ret: user.join { name => uid23, type => user.join }
20.11 13:36:20 ->>-: core/server.ping { _type => core/server.ping, _notify => {{ q => INSERT INTO TempUserLogins (UserID, Date) VALUES (23, 'today'::timestamp), _type => core/server.pending }} }
20.11 13:36:20 -<<-: core/server.ping { errorCode => ok, _type => core/server.ping }
20.11 13:36:21 ++ NET: uid23 req: user.login { messageType => user.login, token => dWlkMjM= }
20.11 13:36:21 DB: SELECT id FROM battle WHERE firstid=23 OR secondid=23 AND finished <> true
20.11 13:36:21 ->>-: core/server.query { q => SELECT id FROM battle WHERE firstid=23 OR secondid=23 AND finished <> true, _type => core/server.query }
20.11 13:36:21 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
20.11 13:36:21 ->>-: vdl/cache.battle.infoRoom { roomId => 0, _type => vdl/cache.battle.infoRoom }
20.11 13:36:21 -<<-: vdl/cache.battle.infoRoom { errorCode => _requestException, _type => vdl/cache.battle.infoRoom }
20.11 13:36:21 TRACE: logoutPost battle exception: cacheRequest exception { roomId => 0, _type => vdl/cache.battle.infoRoom }
20.11 13:36:21 TRACE: 
Called from snipe/slave/CacheConnection.hx line 199
Called from modules/VDLBattleModule.hx line 502
Called from modules/VDLBattleModule.hx line 515
Called from snipe/slave/Server.hx line 1009
20.11 13:36:21 ->>-: core/cache.update { diff => {language => en, params => { attrs => { _lastTime.24hr => 1479648980, lastLoginDate => 325, lastLoadDate => 1121 } }}, type => user, unlock => true, id => 23, _type => core/cache.update }
20.11 13:36:21 -<<-: core/cache.update { errorCode => ok, version => 20, _type => core/cache.update }
20.11 13:36:21 ->>-: core/cache.update { diff => {}, type => questdata, unlock => true, id => 23, _type => core/cache.update }
20.11 13:36:21 -<<-: core/cache.update { errorCode => ok, version => 1, _type => core/cache.update }
20.11 13:36:21 ->>-: core/user.logoutPost { networkid => , networktype =>   , id => 23, _type => core/user.logoutPost }
20.11 13:36:21 -<<-: core/user.logoutPost { errorCode => ok, _type => core/user.logoutPost }
20.11 13:36:21 DB: SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'uid23' AND Password = 'uid23'
20.11 13:36:21 ->>-: core/server.query { q => SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'uid23' AND Password = 'uid23', _type => core/server.query }
20.11 13:36:21 -<<-: core/server.query { list => {{ name => uid23, networkid => , isbanned => false, id => 23 }}, errorCode => ok, _type => core/server.query }
20.11 13:36:21 ->>-: core/user.isOnlineID { id => 23, _type => core/user.isOnlineID }
20.11 13:36:21 -<<-: core/user.isOnlineID { isOnline => false, errorCode => ok, _type => core/user.isOnlineID }
20.11 13:36:21 ->>-: core/cache.get { type => user, v => -1, id => 23, _type => core/cache.get }
20.11 13:36:21 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {name => uid23, deleted => false, school => 1, year => null, email => null, networktype =>   , password => uid23, isbanned => false, regdate => 2016-11-20 13:36:20.841503+00, city => 1, language => en, region => 1, networkid => , params => { info => { city => , year => null, email => null }, inventory => { list => [] }, vars => { addAccess => , regionName => null, addDress => , cityName => null, schoolName => null, friendList => [], addWeapon => , addHeader =>  }, attrs => { level => 1, _lastTime.24hr => 1479648980, lastLoginDate => 325, lastLoadDate => 1121, hints => 15 }, effects => { list => [] } }}, version => 20, id => 23 } }
20.11 13:36:21 ->>-: core/cache.get { type => questdata, v => -1, id => 23, _type => core/cache.get }
20.11 13:36:21 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {params => { quests => { list => [] } }}, version => 1, id => 23 } }
20.11 13:36:21 NET: Client login (conid:38384743, id:23, name:uid23)
20.11 13:36:21 ->>-: core/user.loginPost { lang => en, networkid => , platform => web, networktype =>   , id => 23, _type => core/user.loginPost, ipAddr => 91.225.76.192 }
20.11 13:36:21 -<<-: core/user.loginPost { _type => core/user.loginPost }
20.11 13:36:21 DB: SELECT token FROM tokens WHERE userid = 23
20.11 13:36:21 ->>-: core/server.query { q => SELECT token FROM tokens WHERE userid = 23, _type => core/server.query }
20.11 13:36:21 -<<-: core/server.query { list => {{ token => f50e2a9461fa25b91ab7c4bbbeb7fbd2 }, { token => dbde0fa1295703d3bfa03eb61b17c977 }}, errorCode => ok, _type => core/server.query }
20.11 13:36:26 ++ NET: uid23 req: user.ping { messageType => user.ping, msg => ok }
20.11 13:36:26 TIME: user.ping 0.11 ms
20.11 13:36:29 NET: Client (name:uid23 conid:38384743 WS) disconnected from vdl.0 (clients:0)
20.11 13:36:29 DB: SELECT id FROM battle WHERE firstid=23 OR secondid=23 AND finished <> true
20.11 13:36:29 ->>-: core/server.query { q => SELECT id FROM battle WHERE firstid=23 OR secondid=23 AND finished <> true, _type => core/server.query }
20.11 13:36:29 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
20.11 13:36:29 ->>-: vdl/cache.battle.infoRoom { roomId => 0, _type => vdl/cache.battle.infoRoom }
20.11 13:36:29 -<<-: vdl/cache.battle.infoRoom { errorCode => _requestException, _type => vdl/cache.battle.infoRoom }
20.11 13:36:29 TRACE: logoutPost battle exception: cacheRequest exception { roomId => 0, _type => vdl/cache.battle.infoRoom }
20.11 13:36:29 TRACE: 
Called from snipe/slave/CacheConnection.hx line 199
Called from modules/VDLBattleModule.hx line 502
Called from modules/VDLBattleModule.hx line 515
Called from snipe/slave/Server.hx line 1009
20.11 13:36:29 ->>-: core/cache.update { diff => {language => en}, type => user, unlock => true, id => 23, _type => core/cache.update }
20.11 13:36:29 -<<-: core/cache.update { errorCode => ok, version => 21, _type => core/cache.update }
20.11 13:36:29 ->>-: core/cache.update { diff => {}, type => questdata, unlock => true, id => 23, _type => core/cache.update }
20.11 13:36:29 -<<-: core/cache.update { errorCode => ok, version => 2, _type => core/cache.update }
20.11 13:36:29 ->>-: core/user.logoutPost { networkid => , networktype =>   , id => 23, _type => core/user.logoutPost }
20.11 13:36:29 -<<-: core/user.logoutPost { errorCode => ok, _type => core/user.logoutPost }
20.11 13:36:29 NET: Client (conid:35028049) connected to vdl.0 (clients:1)
20.11 13:36:29 NET: Client (conid:35028049) switched protocol to WS
20.11 13:36:29 ++ NET: null req: user.login { messageType => user.login, token => dWlkMjM= }
20.11 13:36:29 DB: SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'uid23' AND Password = 'uid23'
20.11 13:36:29 ->>-: core/server.query { q => SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'uid23' AND Password = 'uid23', _type => core/server.query }
20.11 13:36:29 -<<-: core/server.query { list => {{ name => uid23, networkid => , isbanned => false, id => 23 }}, errorCode => ok, _type => core/server.query }
20.11 13:36:29 ->>-: core/user.isOnlineID { id => 23, _type => core/user.isOnlineID }
20.11 13:36:29 -<<-: core/user.isOnlineID { isOnline => false, errorCode => ok, _type => core/user.isOnlineID }
20.11 13:36:29 ->>-: core/cache.get { type => user, v => -1, id => 23, _type => core/cache.get }
20.11 13:36:29 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {name => uid23, deleted => false, school => 1, year => null, email => null, networktype =>   , password => uid23, isbanned => false, regdate => 2016-11-20 13:36:20.841503+00, city => 1, language => en, region => 1, networkid => , params => { info => { city => , year => null, email => null }, inventory => { list => [] }, vars => { addAccess => , regionName => null, addDress => , cityName => null, schoolName => null, friendList => [], addWeapon => , addHeader =>  }, attrs => { level => 1, _lastTime.24hr => 1479648980, lastLoginDate => 325, lastLoadDate => 1121, hints => 15 }, effects => { list => [] } }}, version => 21, id => 23 } }
20.11 13:36:29 ->>-: core/cache.get { type => questdata, v => -1, id => 23, _type => core/cache.get }
20.11 13:36:29 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {params => { quests => { list => [] } }}, version => 2, id => 23 } }
20.11 13:36:29 NET: Client login (conid:35028049, id:23, name:uid23)
20.11 13:36:29 ->>-: core/user.loginPost { lang => en, networkid => , platform => web, networktype =>   , id => 23, _type => core/user.loginPost, ipAddr => 91.225.76.192 }
20.11 13:36:29 -<<-: core/user.loginPost { _type => core/user.loginPost }
20.11 13:36:29 DB: SELECT token FROM tokens WHERE userid = 23
20.11 13:36:29 ->>-: core/server.query { q => SELECT token FROM tokens WHERE userid = 23, _type => core/server.query }
20.11 13:36:29 -<<-: core/server.query { list => {{ token => f50e2a9461fa25b91ab7c4bbbeb7fbd2 }, { token => dbde0fa1295703d3bfa03eb61b17c977 }}, errorCode => ok, _type => core/server.query }
20.11 13:36:29 == NET: uid23 ret: user.login { name => uid23, type => user.login, errorCode => ok, id => 23, token => f50e2a9461fa25b91ab7c4bbbeb7fbd2 }
20.11 13:36:29 == NET: uid23 ret: user.join { name => uid23, type => user.join }
20.11 13:36:34 ->>-: core/cache.update { diff => {language => en}, type => user, unlock => false, id => 23, _type => core/cache.update }
20.11 13:36:34 -<<-: core/cache.update { errorCode => ok, version => 22, _type => core/cache.update }
20.11 13:37:08 TIMER: Check auto-disconnect...
20.11 13:37:14 STATS: vdl.0 cache, locks:2
20.11 13:37:15 NET: Client (name:uid23 conid:35028049 WS) disconnected from vdl.0 (clients:0)
20.11 13:37:15 DB: SELECT id FROM battle WHERE firstid=23 OR secondid=23 AND finished <> true
20.11 13:37:15 ->>-: core/server.query { q => SELECT id FROM battle WHERE firstid=23 OR secondid=23 AND finished <> true, _type => core/server.query }
20.11 13:37:15 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
20.11 13:37:15 ->>-: vdl/cache.battle.infoRoom { roomId => 0, _type => vdl/cache.battle.infoRoom }
20.11 13:37:15 -<<-: vdl/cache.battle.infoRoom { errorCode => _requestException, _type => vdl/cache.battle.infoRoom }
20.11 13:37:15 TRACE: logoutPost battle exception: cacheRequest exception { roomId => 0, _type => vdl/cache.battle.infoRoom }
20.11 13:37:15 TRACE: 
Called from snipe/slave/CacheConnection.hx line 199
Called from modules/VDLBattleModule.hx line 502
Called from modules/VDLBattleModule.hx line 515
Called from snipe/slave/Server.hx line 1009
20.11 13:37:15 ->>-: core/cache.update { diff => {}, type => user, unlock => true, id => 23, _type => core/cache.update }
20.11 13:37:15 -<<-: core/cache.update { errorCode => ok, version => 23, _type => core/cache.update }
20.11 13:37:15 ->>-: core/cache.update { diff => {}, type => questdata, unlock => true, id => 23, _type => core/cache.update }
20.11 13:37:15 -<<-: core/cache.update { errorCode => ok, version => 3, _type => core/cache.update }
20.11 13:37:15 ->>-: core/user.logoutPost { networkid => , networktype =>   , id => 23, _type => core/user.logoutPost }
20.11 13:37:15 -<<-: core/user.logoutPost { errorCode => ok, _type => core/user.logoutPost }
20.11 13:37:15 NET: Client (conid:4833854) connected to vdl.0 (clients:1)
20.11 13:37:15 NET: Client (conid:4833854) switched protocol to WS
20.11 13:37:15 ++ NET: null req: user.register { messageType => user.register }
20.11 13:37:15 DB: SELECT * FROM users
20.11 13:37:15 ->>-: core/server.query { q => SELECT * FROM users, _type => core/server.query }
20.11 13:37:15 -<<-: core/server.query { list => {{ city => , password => , name => --- DEFAULT ATTRIBUTES ---, year => , networkid => , params => {"attrs":{},"inventory":{"list":[]}}, "info": {"city":"", "year": "", "email": ""}, networktype =>   , email => , isbanned => false, regdate => 2016-11-10 11:48:59.9391+00, language =>   , id => 1, deleted => false }, { city => , password => uid16, name => uid16, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479544800,"lastLoginDate":324,"lastLoadDate":1120},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-19 08:37:10.286209+00, language => en, id => 16, deleted => false }, { city => , password => uid2, name => uid2, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1478779175,"lastLoginDate":315,"lastLoadDate":1111},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 11:56:09.590311+00, language => en, id => 2, deleted => false }, { city => , password => uid3, name => uid3, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 12:08:05.144895+00, language =>   , id => 3, deleted => false }, { city => , password => uid4, name => uid4, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 12:24:23.638304+00, language =>   , id => 4, deleted => false }, { city => , password => uid5, name => uid5, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 12:28:38.741567+00, language =>   , id => 5, deleted => false }, { city => , password => uid11, name => uid11, year => null, networkid => , params => {"info":{"city":"","year":null,"email":null},"inventory":{"list":[]},"vars":{},"attrs":{"_lastTime.24hr":1479627940,"lastLoginDate":325,"lastLoadDate":1121},"effects":{"list":[]}}, networktype =>   , email => null, isbanned => false, regdate => 2016-11-13 20:03:37.670616+00, language => en, id => 11, deleted => false }, { city => , password => uid23, name => uid23, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-20 13:36:20.841503+00, language =>   , id => 23, deleted => false }, { city => , password => uid6, name => uid6, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479119901,"lastLoginDate":319,"lastLoadDate":1115},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 12:31:41.286497+00, language => en, id => 6, deleted => false }, { city => , password => uid13, name => uid13, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-16 11:16:26.870358+00, language =>   , id => 13, deleted => false }, { city => , password => uid14, name => uid14, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-16 11:17:20.119377+00, language =>   , id => 14, deleted => false }, { city => , password => uid7, name => uid7, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 13:32:51.765479+00, language =>   , id => 7, deleted => false }, { city => , password => uid17, name => uid17, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479557423,"lastLoginDate":324,"lastLoadDate":1120},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-19 12:06:11.008729+00, language => en, id => 17, deleted => false }, { city => , password => uid19, name => uid19, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-19 12:43:31.432703+00, language =>   , id => 19, deleted => false }, { city => , password => uid18, name => uid18, year => null, networkid => , params => {"info":{"city":"","year":null,"email":null},"inventory":{"list":[]},"vars":{},"attrs":{"_lastTime.24hr":1479558241,"lastLoginDate":324,"lastLoadDate":1120},"effects":{"list":[]}}, networktype =>   , email => null, isbanned => false, regdate => 2016-11-19 12:24:01.448243+00, language => en, id => 18, deleted => false }, { city => , password => uid20, name => uid20, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-19 15:34:13.927466+00, language =>   , id => 20, deleted => false }, { city => , password => uid21, name => uid21, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-19 16:38:50.046266+00, language =>   , id => 21, deleted => false }, { city => , password => uid22, name => uid22, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-19 19:28:32.319424+00, language =>   , id => 22, deleted => false }, { city => , password => uid12, name => uid12, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479299358,"lastLoginDate":321,"lastLoadDate":1117},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-14 12:05:08.368578+00, language => en, id => 12, deleted => false }, { city => , password => uid8, name => uid8, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479405440,"lastLoginDate":322,"lastLoadDate":1118},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 15:37:47.142701+00, language => en, id => 8, deleted => false }, { city => , password => uid10, name => uid10, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1478975056,"lastLoginDate":318,"lastLoadDate":1114},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-11 16:44:40.114978+00, language => en, id => 10, deleted => false }, { city => , password => uid9, name => uid9, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479481494,"lastLoginDate":323,"lastLoadDate":1119},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-11 07:57:55.30687+00, language => en, id => 9, deleted => false }, { city => , password => uid15, name => uid15, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-18 15:18:55.183965+00, language =>   , id => 15, deleted => false }}, errorCode => ok, _type => core/server.query }
20.11 13:37:15 == NET: null ret: user.auth { type => user.auth, token => dWlkMjQ= }
20.11 13:37:15 DB: SELECT ID FROM Users WHERE Name = 'uid24'
20.11 13:37:15 ->>-: core/server.query { q => SELECT ID FROM Users WHERE Name = 'uid24', _type => core/server.query }
20.11 13:37:15 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
20.11 13:37:15 DB: SELECT nextval('Users_id_seq') AS id
20.11 13:37:15 ->>-: core/server.query { q => SELECT nextval('Users_id_seq') AS id, _type => core/server.query }
20.11 13:37:15 -<<-: core/server.query { list => {{ id => 24 }}, errorCode => ok, _type => core/server.query }
20.11 13:37:15 ->>-: core/user.register { password => uid24, name => uid24, fullParams => { password => uid24, name => uid24, networkid => , networktype => , messageType => user.register, id => 24 }, networkid => , connectionID => 4833854, networktype => , email => , id => 24, _type => core/user.register }
20.11 13:37:15 -<<-: core/user.register { errorCode => ok, _type => core/user.register }
20.11 13:37:15 -<<-: core/user.registerResponse { password => uid24, name => uid24, _isNotify => true, fullParams => { password => uid24, name => uid24, networkid => , networktype => , messageType => user.register, id => 24 }, networkid => , connectionID => 4833854, networktype => , email => , id => 24, _type => core/user.registerResponse }
20.11 13:37:15 DB: SELECT token FROM tokens WHERE userid = 24
20.11 13:37:15 ->>-: core/server.query { q => SELECT token FROM tokens WHERE userid = 24, _type => core/server.query }
20.11 13:37:15 -<<-: core/server.query { list => {{ token => 718826c060560e51bc54bb49897db1a7 }, { token => 0b296b9614eb315259ad8151ca2c2551 }}, errorCode => ok, _type => core/server.query }
20.11 13:37:15 == NET: null ret: user.register { type => user.register, errorCode => ok, token => 718826c060560e51bc54bb49897db1a7 }
20.11 13:37:15 ++ NET: null req: user.login { messageType => user.login, token => dWlkMjQ= }
20.11 13:37:15 DB: SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'uid24' AND Password = 'uid24'
20.11 13:37:15 ->>-: core/server.query { q => SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'uid24' AND Password = 'uid24', _type => core/server.query }
20.11 13:37:15 -<<-: core/server.query { list => {{ name => uid24, networkid => , isbanned => false, id => 24 }}, errorCode => ok, _type => core/server.query }
20.11 13:37:15 ->>-: core/user.isOnlineID { id => 24, _type => core/user.isOnlineID }
20.11 13:37:15 -<<-: core/user.isOnlineID { isOnline => false, errorCode => ok, _type => core/user.isOnlineID }
20.11 13:37:15 ->>-: core/cache.get { type => user, v => -1, id => 24, _type => core/cache.get }
20.11 13:37:15 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {name => uid24, deleted => false, year => null, email => null, networktype =>   , password => uid24, isbanned => false, regdate => 2016-11-20 13:37:15.462999+00, city => , language =>   , networkid => , params => { info => { city => , year => null, email => null }, inventory => { list => [] }, vars => {}, attrs => {}, effects => { list => [] } }}, version => 4, id => 24 } }
20.11 13:37:15 ->>-: core/cache.get { type => questdata, v => -1, id => 24, _type => core/cache.get }
20.11 13:37:15 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {params => { quests => { list => [] } }}, version => 0, id => 24 } }
20.11 13:37:15 NET: Client login (conid:4833854, id:24, name:uid24)
20.11 13:37:15 ->>-: core/user.loginPost { lang => en, networkid => , platform => web, networktype =>   , id => 24, _type => core/user.loginPost, ipAddr => 91.225.76.192 }
20.11 13:37:15 -<<-: core/user.loginPost { _type => core/user.loginPost }
20.11 13:37:15 DB: SELECT token FROM tokens WHERE userid = 24
20.11 13:37:15 ->>-: core/server.query { q => SELECT token FROM tokens WHERE userid = 24, _type => core/server.query }
20.11 13:37:15 -<<-: core/server.query { list => {{ token => 718826c060560e51bc54bb49897db1a7 }, { token => 0b296b9614eb315259ad8151ca2c2551 }}, errorCode => ok, _type => core/server.query }
20.11 13:37:15 DB: SELECT ID FROM TempUserLogins WHERE UserID = 24 AND Date = 'today'::timestamp
20.11 13:37:15 ->>-: core/server.query { q => SELECT ID FROM TempUserLogins WHERE UserID = 24 AND Date = 'today'::timestamp, _type => core/server.query }
20.11 13:37:15 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
20.11 13:37:15 PENDING: INSERT INTO TempUserLogins (UserID, Date) VALUES (24, 'today'::timestamp)
20.11 13:37:15 == NET: uid24 ret: user.login { name => uid24, type => user.login, errorCode => ok, id => 24, token => 718826c060560e51bc54bb49897db1a7 }
20.11 13:37:15 == NET: uid24 ret: user.join { name => uid24, type => user.join }
20.11 13:37:15 ++ NET: uid24 req: user.login { password => kO2YJdf, name => Aimer, messageType => user.login }
20.11 13:37:15 DB: SELECT id FROM battle WHERE firstid=24 OR secondid=24 AND finished <> true
20.11 13:37:15 ->>-: core/server.query { q => SELECT id FROM battle WHERE firstid=24 OR secondid=24 AND finished <> true, _type => core/server.query, _notify => {{ q => INSERT INTO TempUserLogins (UserID, Date) VALUES (24, 'today'::timestamp), _type => core/server.pending }} }
20.11 13:37:15 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
20.11 13:37:15 ->>-: vdl/cache.battle.infoRoom { roomId => 0, _type => vdl/cache.battle.infoRoom }
20.11 13:37:15 -<<-: vdl/cache.battle.infoRoom { errorCode => _requestException, _type => vdl/cache.battle.infoRoom }
20.11 13:37:15 TRACE: logoutPost battle exception: cacheRequest exception { roomId => 0, _type => vdl/cache.battle.infoRoom }
20.11 13:37:15 TRACE: 
Called from snipe/slave/CacheConnection.hx line 199
Called from modules/VDLBattleModule.hx line 502
Called from modules/VDLBattleModule.hx line 515
Called from snipe/slave/Server.hx line 1009
20.11 13:37:15 ->>-: core/cache.update { diff => {language => en, params => { attrs => { _lastTime.24hr => 1479649035, lastLoginDate => 325, lastLoadDate => 1121 } }}, type => user, unlock => true, id => 24, _type => core/cache.update }
20.11 13:37:15 -<<-: core/cache.update { errorCode => ok, version => 5, _type => core/cache.update }
20.11 13:37:15 ->>-: core/cache.update { diff => {}, type => questdata, unlock => true, id => 24, _type => core/cache.update }
20.11 13:37:15 -<<-: core/cache.update { errorCode => ok, version => 1, _type => core/cache.update }
20.11 13:37:15 ->>-: core/user.logoutPost { networkid => , networktype =>   , id => 24, _type => core/user.logoutPost }
20.11 13:37:15 -<<-: core/user.logoutPost { errorCode => ok, _type => core/user.logoutPost }
20.11 13:37:15 DB: SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'Aimer' AND Password = 'kO2YJdf'
20.11 13:37:15 ->>-: core/server.query { q => SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'Aimer' AND Password = 'kO2YJdf', _type => core/server.query }
20.11 13:37:15 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
20.11 13:37:15 ++ NET: uid24 req: user.data { messageType => user.data }
20.11 13:37:15 ->>-: vdl/cache.user.getData { userId => 24, _type => vdl/cache.user.getData, money => 0 }
20.11 13:37:15 -<<-: vdl/cache.user.getData { info => { city => , year => null, email => null }, errorCode => ok, _type => vdl/cache.user.getData, money => 0 }
20.11 13:37:15 TIME: user.data 0.4 ms
20.11 13:37:26 ++ NET: uid24 req: user.ping { messageType => user.ping, msg => ok }
20.11 13:37:26 TIME: user.ping 0.12 ms
20.11 13:37:29 NET: Client (name:uid24 conid:4833854 WS) disconnected from vdl.0 (clients:0)
20.11 13:37:29 DB: SELECT id FROM battle WHERE firstid=24 OR secondid=24 AND finished <> true
20.11 13:37:29 ->>-: core/server.query { q => SELECT id FROM battle WHERE firstid=24 OR secondid=24 AND finished <> true, _type => core/server.query }
20.11 13:37:29 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
20.11 13:37:29 STATS: vdl.0 cache connection, 272 calls, total 0.168578147888184 sec spent, avg 0.62 ms
20.11 13:37:29 ->>-: vdl/cache.battle.infoRoom { roomId => 0, _type => vdl/cache.battle.infoRoom }
20.11 13:37:29 -<<-: vdl/cache.battle.infoRoom { errorCode => _requestException, _type => vdl/cache.battle.infoRoom }
20.11 13:37:29 TRACE: logoutPost battle exception: cacheRequest exception { roomId => 0, _type => vdl/cache.battle.infoRoom }
20.11 13:37:29 TRACE: 
Called from snipe/slave/CacheConnection.hx line 199
Called from modules/VDLBattleModule.hx line 502
Called from modules/VDLBattleModule.hx line 515
Called from snipe/slave/Server.hx line 1009
20.11 13:37:29 ->>-: core/cache.update { diff => {}, type => user, unlock => true, id => 24, _type => core/cache.update }
20.11 13:37:29 -<<-: core/cache.update { errorCode => mustBeLocked, version => 0, _type => core/cache.update }
20.11 13:37:29 ->>-: core/cache.update { diff => {}, type => questdata, unlock => true, id => 24, _type => core/cache.update }
20.11 13:37:29 -<<-: core/cache.update { errorCode => mustBeLocked, version => 0, _type => core/cache.update }
20.11 13:37:29 ->>-: core/user.logoutPost { networkid => , networktype =>   , id => 24, _type => core/user.logoutPost }
20.11 13:37:29 -<<-: core/user.logoutPost { errorCode => ok, _type => core/user.logoutPost }
20.11 13:37:29 NET: Client (conid:93388428) connected to vdl.0 (clients:1)
20.11 13:37:29 NET: Client (conid:93388428) switched protocol to WS
20.11 13:37:29 ++ NET: null req: user.login { password => kO2YJdf, name => Aimer, messageType => user.login }
20.11 13:37:29 DB: SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'Aimer' AND Password = 'kO2YJdf'
20.11 13:37:29 ->>-: core/server.query { q => SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'Aimer' AND Password = 'kO2YJdf', _type => core/server.query }
20.11 13:37:29 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
20.11 13:37:29 == NET: null ret: user.login { type => user.login, errorCode => userNotFound }
20.11 13:37:30 NET: Client (name:null conid:93388428 WS) disconnected from vdl.0 (clients:0)
20.11 13:37:30 NET: Client (conid:88380087) connected to vdl.0 (clients:1)
20.11 13:37:30 NET: Client (conid:88380087) switched protocol to WS
20.11 13:37:30 ++ NET: null req: user.register { messageType => user.register }
20.11 13:37:30 DB: SELECT * FROM users
20.11 13:37:30 ->>-: core/server.query { q => SELECT * FROM users, _type => core/server.query }
20.11 13:37:30 -<<-: core/server.query { list => {{ city => , password => , name => --- DEFAULT ATTRIBUTES ---, year => , networkid => , params => {"attrs":{},"inventory":{"list":[]}}, "info": {"city":"", "year": "", "email": ""}, networktype =>   , email => , isbanned => false, regdate => 2016-11-10 11:48:59.9391+00, language =>   , id => 1, deleted => false }, { city => , password => uid16, name => uid16, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479544800,"lastLoginDate":324,"lastLoadDate":1120},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-19 08:37:10.286209+00, language => en, id => 16, deleted => false }, { city => , password => uid2, name => uid2, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1478779175,"lastLoginDate":315,"lastLoadDate":1111},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 11:56:09.590311+00, language => en, id => 2, deleted => false }, { city => , password => uid3, name => uid3, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 12:08:05.144895+00, language =>   , id => 3, deleted => false }, { city => , password => uid4, name => uid4, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 12:24:23.638304+00, language =>   , id => 4, deleted => false }, { city => , password => uid5, name => uid5, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 12:28:38.741567+00, language =>   , id => 5, deleted => false }, { city => , password => uid11, name => uid11, year => null, networkid => , params => {"info":{"city":"","year":null,"email":null},"inventory":{"list":[]},"vars":{},"attrs":{"_lastTime.24hr":1479627940,"lastLoginDate":325,"lastLoadDate":1121},"effects":{"list":[]}}, networktype =>   , email => null, isbanned => false, regdate => 2016-11-13 20:03:37.670616+00, language => en, id => 11, deleted => false }, { city => , password => uid23, name => uid23, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-20 13:36:20.841503+00, language =>   , id => 23, deleted => false }, { city => , password => uid24, name => uid24, year => null, networkid => , params => {"info":{"city":"","year":null,"email":null},"inventory":{"list":[]},"vars":{},"attrs":{"_lastTime.24hr":1479649035,"lastLoginDate":325,"lastLoadDate":1121},"effects":{"list":[]}}, networktype =>   , email => null, isbanned => false, regdate => 2016-11-20 13:37:15.462999+00, language => en, id => 24, deleted => false }, { city => , password => uid6, name => uid6, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479119901,"lastLoginDate":319,"lastLoadDate":1115},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 12:31:41.286497+00, language => en, id => 6, deleted => false }, { city => , password => uid13, name => uid13, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-16 11:16:26.870358+00, language =>   , id => 13, deleted => false }, { city => , password => uid14, name => uid14, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-16 11:17:20.119377+00, language =>   , id => 14, deleted => false }, { city => , password => uid7, name => uid7, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 13:32:51.765479+00, language =>   , id => 7, deleted => false }, { city => , password => uid17, name => uid17, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479557423,"lastLoginDate":324,"lastLoadDate":1120},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-19 12:06:11.008729+00, language => en, id => 17, deleted => false }, { city => , password => uid19, name => uid19, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-19 12:43:31.432703+00, language =>   , id => 19, deleted => false }, { city => , password => uid18, name => uid18, year => null, networkid => , params => {"info":{"city":"","year":null,"email":null},"inventory":{"list":[]},"vars":{},"attrs":{"_lastTime.24hr":1479558241,"lastLoginDate":324,"lastLoadDate":1120},"effects":{"list":[]}}, networktype =>   , email => null, isbanned => false, regdate => 2016-11-19 12:24:01.448243+00, language => en, id => 18, deleted => false }, { city => , password => uid20, name => uid20, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-19 15:34:13.927466+00, language =>   , id => 20, deleted => false }, { city => , password => uid21, name => uid21, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-19 16:38:50.046266+00, language =>   , id => 21, deleted => false }, { city => , password => uid22, name => uid22, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-19 19:28:32.319424+00, language =>   , id => 22, deleted => false }, { city => , password => uid12, name => uid12, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479299358,"lastLoginDate":321,"lastLoadDate":1117},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-14 12:05:08.368578+00, language => en, id => 12, deleted => false }, { city => , password => uid8, name => uid8, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479405440,"lastLoginDate":322,"lastLoadDate":1118},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 15:37:47.142701+00, language => en, id => 8, deleted => false }, { city => , password => uid10, name => uid10, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1478975056,"lastLoginDate":318,"lastLoadDate":1114},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-11 16:44:40.114978+00, language => en, id => 10, deleted => false }, { city => , password => uid9, name => uid9, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479481494,"lastLoginDate":323,"lastLoadDate":1119},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-11 07:57:55.30687+00, language => en, id => 9, deleted => false }, { city => , password => uid15, name => uid15, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-18 15:18:55.183965+00, language =>   , id => 15, deleted => false }}, errorCode => ok, _type => core/server.query }
20.11 13:37:30 == NET: null ret: user.auth { type => user.auth, token => dWlkMjU= }
20.11 13:37:30 DB: SELECT ID FROM Users WHERE Name = 'uid25'
20.11 13:37:30 ->>-: core/server.query { q => SELECT ID FROM Users WHERE Name = 'uid25', _type => core/server.query }
20.11 13:37:30 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
20.11 13:37:30 DB: SELECT nextval('Users_id_seq') AS id
20.11 13:37:30 ->>-: core/server.query { q => SELECT nextval('Users_id_seq') AS id, _type => core/server.query }
20.11 13:37:30 -<<-: core/server.query { list => {{ id => 25 }}, errorCode => ok, _type => core/server.query }
20.11 13:37:30 ->>-: core/user.register { password => uid25, name => uid25, fullParams => { password => uid25, name => uid25, networkid => , networktype => , messageType => user.register, id => 25 }, networkid => , connectionID => 88380087, networktype => , email => , id => 25, _type => core/user.register }
20.11 13:37:30 -<<-: core/user.register { errorCode => ok, _type => core/user.register }
20.11 13:37:30 -<<-: core/user.registerResponse { password => uid25, name => uid25, _isNotify => true, fullParams => { password => uid25, name => uid25, networkid => , networktype => , messageType => user.register, id => 25 }, networkid => , connectionID => 88380087, networktype => , email => , id => 25, _type => core/user.registerResponse }
20.11 13:37:30 DB: SELECT token FROM tokens WHERE userid = 25
20.11 13:37:30 ->>-: core/server.query { q => SELECT token FROM tokens WHERE userid = 25, _type => core/server.query }
20.11 13:37:30 -<<-: core/server.query { list => {{ token => b425ee7e8a2d3053b223210d6c4c50db }, { token => 93f1a9cadab03e6c4c9f10eee4ed2b81 }}, errorCode => ok, _type => core/server.query }
20.11 13:37:30 == NET: null ret: user.register { type => user.register, errorCode => ok, token => b425ee7e8a2d3053b223210d6c4c50db }
20.11 13:37:30 ++ NET: null req: user.login { messageType => user.login, token => dWlkMjU= }
20.11 13:37:30 DB: SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'uid25' AND Password = 'uid25'
20.11 13:37:30 ->>-: core/server.query { q => SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'uid25' AND Password = 'uid25', _type => core/server.query }
20.11 13:37:30 -<<-: core/server.query { list => {{ name => uid25, networkid => , isbanned => false, id => 25 }}, errorCode => ok, _type => core/server.query }
20.11 13:37:30 ->>-: core/user.isOnlineID { id => 25, _type => core/user.isOnlineID }
20.11 13:37:30 -<<-: core/user.isOnlineID { isOnline => false, errorCode => ok, _type => core/user.isOnlineID }
20.11 13:37:30 ->>-: core/cache.get { type => user, v => -1, id => 25, _type => core/cache.get }
20.11 13:37:30 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {name => uid25, deleted => false, school => 1, year => null, email => null, networktype =>   , password => uid25, isbanned => false, regdate => 2016-11-20 13:37:30.330265+00, city => 1, language =>   , region => 1, networkid => , params => { info => { city => , year => null, email => null }, inventory => { list => [] }, vars => { addAccess => , regionName => null, addDress => , cityName => null, schoolName => null, friendList => [], addWeapon => , addHeader =>  }, attrs => { level => 1, hints => 15 }, effects => { list => [] } }}, version => 19, id => 25 } }
20.11 13:37:30 ->>-: core/cache.get { type => questdata, v => -1, id => 25, _type => core/cache.get }
20.11 13:37:30 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {params => { quests => { list => [] } }}, version => 0, id => 25 } }
20.11 13:37:30 NET: Client login (conid:88380087, id:25, name:uid25)
20.11 13:37:30 ->>-: core/user.loginPost { lang => en, networkid => , platform => web, networktype =>   , id => 25, _type => core/user.loginPost, ipAddr => 91.225.76.192 }
20.11 13:37:30 -<<-: core/user.loginPost { _type => core/user.loginPost }
20.11 13:37:30 DB: SELECT token FROM tokens WHERE userid = 25
20.11 13:37:30 ->>-: core/server.query { q => SELECT token FROM tokens WHERE userid = 25, _type => core/server.query }
20.11 13:37:30 -<<-: core/server.query { list => {{ token => b425ee7e8a2d3053b223210d6c4c50db }, { token => 93f1a9cadab03e6c4c9f10eee4ed2b81 }}, errorCode => ok, _type => core/server.query }
20.11 13:37:30 DB: SELECT ID FROM TempUserLogins WHERE UserID = 25 AND Date = 'today'::timestamp
20.11 13:37:30 ->>-: core/server.query { q => SELECT ID FROM TempUserLogins WHERE UserID = 25 AND Date = 'today'::timestamp, _type => core/server.query }
20.11 13:37:30 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
20.11 13:37:30 PENDING: INSERT INTO TempUserLogins (UserID, Date) VALUES (25, 'today'::timestamp)
20.11 13:37:30 ++ NET: uid25 req: user.login { messageType => user.login, token => dWlkMjU= }
20.11 13:37:30 == NET: uid25 ret: user.login { name => uid25, type => user.login, errorCode => ok, id => 25, token => b425ee7e8a2d3053b223210d6c4c50db }
20.11 13:37:30 DB: SELECT id FROM battle WHERE firstid=25 OR secondid=25 AND finished <> true
20.11 13:37:30 == NET: uid25 ret: user.join { name => uid25, type => user.join }
20.11 13:37:30 ->>-: core/server.query { q => SELECT id FROM battle WHERE firstid=25 OR secondid=25 AND finished <> true, _type => core/server.query, _notify => {{ q => INSERT INTO TempUserLogins (UserID, Date) VALUES (25, 'today'::timestamp), _type => core/server.pending }} }
20.11 13:37:30 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
20.11 13:37:30 ->>-: vdl/cache.battle.infoRoom { roomId => 0, _type => vdl/cache.battle.infoRoom }
20.11 13:37:30 -<<-: vdl/cache.battle.infoRoom { errorCode => _requestException, _type => vdl/cache.battle.infoRoom }
20.11 13:37:30 TRACE: logoutPost battle exception: cacheRequest exception { roomId => 0, _type => vdl/cache.battle.infoRoom }
20.11 13:37:30 TRACE: 
Called from snipe/slave/CacheConnection.hx line 199
Called from modules/VDLBattleModule.hx line 502
Called from modules/VDLBattleModule.hx line 515
Called from snipe/slave/Server.hx line 1009
20.11 13:37:30 ->>-: core/cache.update { diff => {language => en, params => { attrs => { _lastTime.24hr => 1479649050, lastLoginDate => 325, lastLoadDate => 1121 } }}, type => user, unlock => true, id => 25, _type => core/cache.update }
20.11 13:37:30 -<<-: core/cache.update { errorCode => ok, version => 20, _type => core/cache.update }
20.11 13:37:30 ->>-: core/cache.update { diff => {}, type => questdata, unlock => true, id => 25, _type => core/cache.update }
20.11 13:37:30 -<<-: core/cache.update { errorCode => ok, version => 1, _type => core/cache.update }
20.11 13:37:30 ->>-: core/user.logoutPost { networkid => , networktype =>   , id => 25, _type => core/user.logoutPost }
20.11 13:37:30 -<<-: core/user.logoutPost { errorCode => ok, _type => core/user.logoutPost }
20.11 13:37:30 DB: SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'uid25' AND Password = 'uid25'
20.11 13:37:30 ->>-: core/server.query { q => SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'uid25' AND Password = 'uid25', _type => core/server.query }
20.11 13:37:30 -<<-: core/server.query { list => {{ name => uid25, networkid => , isbanned => false, id => 25 }}, errorCode => ok, _type => core/server.query }
20.11 13:37:30 ->>-: core/user.isOnlineID { id => 25, _type => core/user.isOnlineID }
20.11 13:37:30 -<<-: core/user.isOnlineID { isOnline => false, errorCode => ok, _type => core/user.isOnlineID }
20.11 13:37:30 ->>-: core/cache.get { type => user, v => -1, id => 25, _type => core/cache.get }
20.11 13:37:30 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {name => uid25, deleted => false, school => 1, year => null, email => null, networktype =>   , password => uid25, isbanned => false, regdate => 2016-11-20 13:37:30.330265+00, city => 1, language => en, region => 1, networkid => , params => { info => { city => , year => null, email => null }, inventory => { list => [] }, vars => { addAccess => , regionName => null, addDress => , cityName => null, schoolName => null, friendList => [], addWeapon => , addHeader =>  }, attrs => { level => 1, _lastTime.24hr => 1479649050, lastLoginDate => 325, lastLoadDate => 1121, hints => 15 }, effects => { list => [] } }}, version => 20, id => 25 } }
20.11 13:37:30 ->>-: core/cache.get { type => questdata, v => -1, id => 25, _type => core/cache.get }
20.11 13:37:30 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {params => { quests => { list => [] } }}, version => 1, id => 25 } }
20.11 13:37:30 NET: Client login (conid:88380087, id:25, name:uid25)
20.11 13:37:30 ->>-: core/user.loginPost { lang => en, networkid => , platform => web, networktype =>   , id => 25, _type => core/user.loginPost, ipAddr => 91.225.76.192 }
20.11 13:37:30 -<<-: core/user.loginPost { _type => core/user.loginPost }
20.11 13:37:30 DB: SELECT token FROM tokens WHERE userid = 25
20.11 13:37:30 ->>-: core/server.query { q => SELECT token FROM tokens WHERE userid = 25, _type => core/server.query }
20.11 13:37:30 -<<-: core/server.query { list => {{ token => b425ee7e8a2d3053b223210d6c4c50db }, { token => 93f1a9cadab03e6c4c9f10eee4ed2b81 }}, errorCode => ok, _type => core/server.query }
20.11 13:37:39 ->>-: core/cache.update { diff => {language => en}, type => user, unlock => false, id => 25, _type => core/cache.update }
20.11 13:37:39 -<<-: core/cache.update { errorCode => ok, version => 21, _type => core/cache.update }
20.11 13:37:48 NET: Client (conid:40129174) connected to vdl.0 (clients:2)
20.11 13:37:48 NET: Client (conid:40129174) switched protocol to WS
20.11 13:37:49 ++ NET: null req: user.login { messageType => user.login, token => dWlkMjI= }
20.11 13:37:49 DB: SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'uid22' AND Password = 'uid22'
20.11 13:37:49 ->>-: core/server.query { q => SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'uid22' AND Password = 'uid22', _type => core/server.query }
20.11 13:37:49 -<<-: core/server.query { list => {{ name => uid22, networkid => , isbanned => false, id => 22 }}, errorCode => ok, _type => core/server.query }
20.11 13:37:49 ->>-: core/user.isOnlineID { id => 22, _type => core/user.isOnlineID }
20.11 13:37:49 -<<-: core/user.isOnlineID { isOnline => false, errorCode => ok, _type => core/user.isOnlineID }
20.11 13:37:49 ->>-: core/cache.get { type => user, v => -1, id => 22, _type => core/cache.get }
20.11 13:37:49 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {name => uid22, deleted => false, year => , email => mail, networktype =>   , password => uid22, isbanned => false, regdate => 2016-11-19 19:28:32.319424+00, city => , language =>   , networkid => , params => {}}, version => 0, id => 22 } }
20.11 13:37:49 ->>-: core/cache.get { type => questdata, v => -1, id => 22, _type => core/cache.get }
20.11 13:37:49 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {params => { quests => { list => [] } }}, version => 0, id => 22 } }
20.11 13:37:49 NET: Client login (conid:40129174, id:22, name:uid22)
20.11 13:37:49 ->>-: core/user.loginPost { lang => en, networkid => , platform => web, networktype =>   , id => 22, _type => core/user.loginPost, ipAddr => 91.225.76.192 }
20.11 13:37:49 -<<-: core/user.loginPost { _type => core/user.loginPost }
20.11 13:37:49 DB: SELECT token FROM tokens WHERE userid = 22
20.11 13:37:49 ->>-: core/server.query { q => SELECT token FROM tokens WHERE userid = 22, _type => core/server.query }
20.11 13:37:49 -<<-: core/server.query { list => {{ token => eabff67fd4352cc58225f2033da8e02c }, { token => 5927ae59cdb5582f650471bd917be6bd }}, errorCode => ok, _type => core/server.query }
20.11 13:37:49 DB: SELECT ID FROM TempUserLogins WHERE UserID = 22 AND Date = 'today'::timestamp
20.11 13:37:49 ->>-: core/server.query { q => SELECT ID FROM TempUserLogins WHERE UserID = 22 AND Date = 'today'::timestamp, _type => core/server.query }
20.11 13:37:49 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
20.11 13:37:49 PENDING: INSERT INTO TempUserLogins (UserID, Date) VALUES (22, 'today'::timestamp)
20.11 13:37:49 == NET: uid22 ret: user.login { name => uid22, type => user.login, errorCode => ok, id => 22, token => eabff67fd4352cc58225f2033da8e02c }
20.11 13:37:49 == NET: uid22 ret: user.join { name => uid22, type => user.join }
20.11 13:37:49 ->>-: core/server.ping { _type => core/server.ping, _notify => {{ q => INSERT INTO TempUserLogins (UserID, Date) VALUES (22, 'today'::timestamp), _type => core/server.pending }} }
20.11 13:37:49 -<<-: core/server.ping { errorCode => ok, _type => core/server.ping }
20.11 13:37:54 ->>-: core/cache.update { diff => {language => en, params => { attrs => { _lastTime.24hr => 1479649069, lastLoginDate => 325, lastLoadDate => 1121 }, effects => { list => [] } }}, type => user, unlock => false, id => 22, _type => core/cache.update }
20.11 13:37:54 -<<-: core/cache.update { errorCode => ok, version => 1, _type => core/cache.update }
20.11 13:37:57 ++ NET: uid22 req: user.ping { messageType => user.ping, msg => ok }
20.11 13:37:57 TIME: user.ping 0.11 ms
20.11 13:37:57 == NET: uid22 ret: user.ping { type => user.ping, errorCode => ok }
20.11 13:38:08 TIMER: Check auto-disconnect...
20.11 13:38:14 STATS: vdl.0 cache, locks:4
20.11 13:38:19 ++ NET: uid22 req: user.ping { messageType => user.ping, msg => ok }
20.11 13:38:19 == NET: uid22 ret: user.ping { type => user.ping, errorCode => ok }
20.11 13:38:19 TIME: user.ping 0.24 ms
20.11 13:38:27 ++ NET: uid25 req: user.ping { messageType => user.ping, msg => ok }
20.11 13:38:27 TIME: user.ping 0.1 ms
20.11 13:38:30 NET: Client (name:uid25 conid:88380087 WS) disconnected from vdl.0 (clients:1)
20.11 13:38:30 DB: SELECT id FROM battle WHERE firstid=25 OR secondid=25 AND finished <> true
20.11 13:38:30 ->>-: core/server.query { q => SELECT id FROM battle WHERE firstid=25 OR secondid=25 AND finished <> true, _type => core/server.query }
20.11 13:38:30 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
20.11 13:38:30 STATS: vdl.0 cache connection, 311 calls, total 0.194584369659424 sec spent, avg 0.63 ms
20.11 13:38:30 ->>-: vdl/cache.battle.infoRoom { roomId => 0, _type => vdl/cache.battle.infoRoom }
20.11 13:38:30 -<<-: vdl/cache.battle.infoRoom { errorCode => _requestException, _type => vdl/cache.battle.infoRoom }
20.11 13:38:30 TRACE: logoutPost battle exception: cacheRequest exception { roomId => 0, _type => vdl/cache.battle.infoRoom }
20.11 13:38:30 TRACE: 
Called from snipe/slave/CacheConnection.hx line 199
Called from modules/VDLBattleModule.hx line 502
Called from modules/VDLBattleModule.hx line 515
Called from snipe/slave/Server.hx line 1009
20.11 13:38:30 ->>-: core/cache.update { diff => {}, type => user, unlock => true, id => 25, _type => core/cache.update }
20.11 13:38:30 -<<-: core/cache.update { errorCode => ok, version => 22, _type => core/cache.update }
20.11 13:38:30 ->>-: core/cache.update { diff => {}, type => questdata, unlock => true, id => 25, _type => core/cache.update }
20.11 13:38:30 -<<-: core/cache.update { errorCode => ok, version => 2, _type => core/cache.update }
20.11 13:38:30 ->>-: core/user.logoutPost { networkid => , networktype =>   , id => 25, _type => core/user.logoutPost }
20.11 13:38:30 -<<-: core/user.logoutPost { errorCode => ok, _type => core/user.logoutPost }
20.11 13:38:30 NET: Client (conid:67223765) connected to vdl.0 (clients:2)
20.11 13:38:30 NET: Client (conid:67223765) switched protocol to WS
20.11 13:38:30 ++ NET: null req: user.login { messageType => user.login, token => dWlkMjU= }
20.11 13:38:30 DB: SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'uid25' AND Password = 'uid25'
20.11 13:38:30 ->>-: core/server.query { q => SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'uid25' AND Password = 'uid25', _type => core/server.query }
20.11 13:38:30 -<<-: core/server.query { list => {{ name => uid25, networkid => , isbanned => false, id => 25 }}, errorCode => ok, _type => core/server.query }
20.11 13:38:30 ->>-: core/user.isOnlineID { id => 25, _type => core/user.isOnlineID }
20.11 13:38:30 -<<-: core/user.isOnlineID { isOnline => false, errorCode => ok, _type => core/user.isOnlineID }
20.11 13:38:30 ->>-: core/cache.get { type => user, v => -1, id => 25, _type => core/cache.get }
20.11 13:38:30 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {name => uid25, deleted => false, school => 1, year => null, email => null, networktype =>   , password => uid25, isbanned => false, regdate => 2016-11-20 13:37:30.330265+00, city => 1, language => en, region => 1, networkid => , params => { info => { city => , year => null, email => null }, inventory => { list => [] }, vars => { addAccess => , regionName => null, addDress => , cityName => null, schoolName => null, friendList => [], addWeapon => , addHeader =>  }, attrs => { level => 1, _lastTime.24hr => 1479649050, lastLoginDate => 325, lastLoadDate => 1121, hints => 15 }, effects => { list => [] } }}, version => 22, id => 25 } }
20.11 13:38:30 ->>-: core/cache.get { type => questdata, v => -1, id => 25, _type => core/cache.get }
20.11 13:38:30 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {params => { quests => { list => [] } }}, version => 2, id => 25 } }
20.11 13:38:30 NET: Client login (conid:67223765, id:25, name:uid25)
20.11 13:38:30 ->>-: core/user.loginPost { lang => en, networkid => , platform => web, networktype =>   , id => 25, _type => core/user.loginPost, ipAddr => 91.225.76.192 }
20.11 13:38:30 -<<-: core/user.loginPost { _type => core/user.loginPost }
20.11 13:38:30 DB: SELECT token FROM tokens WHERE userid = 25
20.11 13:38:30 ->>-: core/server.query { q => SELECT token FROM tokens WHERE userid = 25, _type => core/server.query }
20.11 13:38:30 -<<-: core/server.query { list => {{ token => b425ee7e8a2d3053b223210d6c4c50db }, { token => 93f1a9cadab03e6c4c9f10eee4ed2b81 }}, errorCode => ok, _type => core/server.query }
20.11 13:38:30 == NET: uid25 ret: user.login { name => uid25, type => user.login, errorCode => ok, id => 25, token => b425ee7e8a2d3053b223210d6c4c50db }
20.11 13:38:30 == NET: uid22 ret: user.join { name => uid25, type => user.join }
20.11 13:38:30 == NET: uid25 ret: user.join { name => uid22, type => user.join }
20.11 13:38:30 == NET: uid25 ret: user.join { name => uid25, type => user.join }
20.11 13:38:34 NET: Client (name:uid22 conid:40129174 WS) disconnected from vdl.0 (clients:1)
20.11 13:38:34 DB: SELECT id FROM battle WHERE firstid=22 OR secondid=22 AND finished <> true
20.11 13:38:34 ->>-: core/server.query { q => SELECT id FROM battle WHERE firstid=22 OR secondid=22 AND finished <> true, _type => core/server.query }
20.11 13:38:34 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
20.11 13:38:34 ->>-: vdl/cache.battle.infoRoom { roomId => 0, _type => vdl/cache.battle.infoRoom }
20.11 13:38:34 -<<-: vdl/cache.battle.infoRoom { errorCode => _requestException, _type => vdl/cache.battle.infoRoom }
20.11 13:38:34 TRACE: logoutPost battle exception: cacheRequest exception { roomId => 0, _type => vdl/cache.battle.infoRoom }
20.11 13:38:34 TRACE: 
Called from snipe/slave/CacheConnection.hx line 199
Called from modules/VDLBattleModule.hx line 502
Called from modules/VDLBattleModule.hx line 515
Called from snipe/slave/Server.hx line 1009
20.11 13:38:34 ->>-: core/cache.update { diff => {}, type => user, unlock => true, id => 22, _type => core/cache.update }
20.11 13:38:34 -<<-: core/cache.update { errorCode => ok, version => 2, _type => core/cache.update }
20.11 13:38:34 ->>-: core/cache.update { diff => {}, type => questdata, unlock => true, id => 22, _type => core/cache.update }
20.11 13:38:34 -<<-: core/cache.update { errorCode => ok, version => 1, _type => core/cache.update }
20.11 13:38:34 ->>-: core/user.logoutPost { networkid => , networktype =>   , id => 22, _type => core/user.logoutPost }
20.11 13:38:34 -<<-: core/user.logoutPost { errorCode => ok, _type => core/user.logoutPost }
20.11 13:38:39 NET: Client (conid:28197427) connected to vdl.0 (clients:2)
20.11 13:38:39 NET: Client (conid:28197427) switched protocol to WS
20.11 13:38:39 ->>-: core/cache.update { diff => {language => en}, type => user, unlock => false, id => 25, _type => core/cache.update }
20.11 13:38:39 -<<-: core/cache.update { errorCode => ok, version => 23, _type => core/cache.update }
20.11 13:38:40 ++ NET: null req: user.register { messageType => user.register }
20.11 13:38:40 DB: SELECT * FROM users
20.11 13:38:40 ->>-: core/server.query { q => SELECT * FROM users, _type => core/server.query }
20.11 13:38:40 -<<-: core/server.query { list => {{ city => , password => , name => --- DEFAULT ATTRIBUTES ---, year => , networkid => , params => {"attrs":{},"inventory":{"list":[]}}, "info": {"city":"", "year": "", "email": ""}, networktype =>   , email => , isbanned => false, regdate => 2016-11-10 11:48:59.9391+00, language =>   , id => 1, deleted => false }, { city => , password => uid16, name => uid16, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479544800,"lastLoginDate":324,"lastLoadDate":1120},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-19 08:37:10.286209+00, language => en, id => 16, deleted => false }, { city => , password => uid2, name => uid2, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1478779175,"lastLoginDate":315,"lastLoadDate":1111},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 11:56:09.590311+00, language => en, id => 2, deleted => false }, { city => , password => uid3, name => uid3, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 12:08:05.144895+00, language =>   , id => 3, deleted => false }, { city => , password => uid4, name => uid4, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 12:24:23.638304+00, language =>   , id => 4, deleted => false }, { city => , password => uid5, name => uid5, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 12:28:38.741567+00, language =>   , id => 5, deleted => false }, { city => , password => uid11, name => uid11, year => null, networkid => , params => {"info":{"city":"","year":null,"email":null},"inventory":{"list":[]},"vars":{},"attrs":{"_lastTime.24hr":1479627940,"lastLoginDate":325,"lastLoadDate":1121},"effects":{"list":[]}}, networktype =>   , email => null, isbanned => false, regdate => 2016-11-13 20:03:37.670616+00, language => en, id => 11, deleted => false }, { city => , password => uid23, name => uid23, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-20 13:36:20.841503+00, language =>   , id => 23, deleted => false }, { city => , password => uid24, name => uid24, year => null, networkid => , params => {"info":{"city":"","year":null,"email":null},"inventory":{"list":[]},"vars":{},"attrs":{"_lastTime.24hr":1479649035,"lastLoginDate":325,"lastLoadDate":1121},"effects":{"list":[]}}, networktype =>   , email => null, isbanned => false, regdate => 2016-11-20 13:37:15.462999+00, language => en, id => 24, deleted => false }, { city => , password => uid6, name => uid6, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479119901,"lastLoginDate":319,"lastLoadDate":1115},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 12:31:41.286497+00, language => en, id => 6, deleted => false }, { city => , password => uid25, name => uid25, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-20 13:37:30.330265+00, language =>   , id => 25, deleted => false }, { city => , password => uid13, name => uid13, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-16 11:16:26.870358+00, language =>   , id => 13, deleted => false }, { city => , password => uid14, name => uid14, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-16 11:17:20.119377+00, language =>   , id => 14, deleted => false }, { city => , password => uid7, name => uid7, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 13:32:51.765479+00, language =>   , id => 7, deleted => false }, { city => , password => uid22, name => uid22, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479649069,"lastLoginDate":325,"lastLoadDate":1121},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-19 19:28:32.319424+00, language => en, id => 22, deleted => false }, { city => , password => uid17, name => uid17, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479557423,"lastLoginDate":324,"lastLoadDate":1120},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-19 12:06:11.008729+00, language => en, id => 17, deleted => false }, { city => , password => uid19, name => uid19, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-19 12:43:31.432703+00, language =>   , id => 19, deleted => false }, { city => , password => uid18, name => uid18, year => null, networkid => , params => {"info":{"city":"","year":null,"email":null},"inventory":{"list":[]},"vars":{},"attrs":{"_lastTime.24hr":1479558241,"lastLoginDate":324,"lastLoadDate":1120},"effects":{"list":[]}}, networktype =>   , email => null, isbanned => false, regdate => 2016-11-19 12:24:01.448243+00, language => en, id => 18, deleted => false }, { city => , password => uid20, name => uid20, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-19 15:34:13.927466+00, language =>   , id => 20, deleted => false }, { city => , password => uid21, name => uid21, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-19 16:38:50.046266+00, language =>   , id => 21, deleted => false }, { city => , password => uid12, name => uid12, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479299358,"lastLoginDate":321,"lastLoadDate":1117},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-14 12:05:08.368578+00, language => en, id => 12, deleted => false }, { city => , password => uid8, name => uid8, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479405440,"lastLoginDate":322,"lastLoadDate":1118},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 15:37:47.142701+00, language => en, id => 8, deleted => false }, { city => , password => uid10, name => uid10, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1478975056,"lastLoginDate":318,"lastLoadDate":1114},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-11 16:44:40.114978+00, language => en, id => 10, deleted => false }, { city => , password => uid9, name => uid9, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479481494,"lastLoginDate":323,"lastLoadDate":1119},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-11 07:57:55.30687+00, language => en, id => 9, deleted => false }, { city => , password => uid15, name => uid15, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-18 15:18:55.183965+00, language =>   , id => 15, deleted => false }}, errorCode => ok, _type => core/server.query }
20.11 13:38:40 == NET: null ret: user.auth { type => user.auth, token => dWlkMjY= }
20.11 13:38:40 DB: SELECT ID FROM Users WHERE Name = 'uid26'
20.11 13:38:40 ->>-: core/server.query { q => SELECT ID FROM Users WHERE Name = 'uid26', _type => core/server.query }
20.11 13:38:40 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
20.11 13:38:40 DB: SELECT nextval('Users_id_seq') AS id
20.11 13:38:40 ->>-: core/server.query { q => SELECT nextval('Users_id_seq') AS id, _type => core/server.query }
20.11 13:38:40 -<<-: core/server.query { list => {{ id => 26 }}, errorCode => ok, _type => core/server.query }
20.11 13:38:40 ->>-: core/user.register { password => uid26, name => uid26, fullParams => { password => uid26, name => uid26, networkid => , networktype => , messageType => user.register, id => 26 }, networkid => , connectionID => 28197427, networktype => , email => , id => 26, _type => core/user.register }
20.11 13:38:40 -<<-: core/user.register { errorCode => ok, _type => core/user.register }
20.11 13:38:40 -<<-: core/user.registerResponse { password => uid26, name => uid26, _isNotify => true, fullParams => { password => uid26, name => uid26, networkid => , networktype => , messageType => user.register, id => 26 }, networkid => , connectionID => 28197427, networktype => , email => , id => 26, _type => core/user.registerResponse }
20.11 13:38:40 DB: SELECT token FROM tokens WHERE userid = 26
20.11 13:38:40 ->>-: core/server.query { q => SELECT token FROM tokens WHERE userid = 26, _type => core/server.query }
20.11 13:38:40 -<<-: core/server.query { list => {{ token => b3064e3cfe149ee7a1edbee75de55c33 }, { token => ef6ac0b73dc7f454283d56f8ab5560dc }}, errorCode => ok, _type => core/server.query }
20.11 13:38:40 == NET: null ret: user.register { type => user.register, errorCode => ok, token => b3064e3cfe149ee7a1edbee75de55c33 }
20.11 13:38:40 ++ NET: null req: user.login { messageType => user.login, token => dWlkMjY= }
20.11 13:38:40 DB: SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'uid26' AND Password = 'uid26'
20.11 13:38:40 ->>-: core/server.query { q => SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'uid26' AND Password = 'uid26', _type => core/server.query }
20.11 13:38:40 -<<-: core/server.query { list => {{ name => uid26, networkid => , isbanned => false, id => 26 }}, errorCode => ok, _type => core/server.query }
20.11 13:38:40 ->>-: core/user.isOnlineID { id => 26, _type => core/user.isOnlineID }
20.11 13:38:40 -<<-: core/user.isOnlineID { isOnline => false, errorCode => ok, _type => core/user.isOnlineID }
20.11 13:38:40 ->>-: core/cache.get { type => user, v => -1, id => 26, _type => core/cache.get }
20.11 13:38:40 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {name => uid26, deleted => false, school => 1, year => null, email => null, networktype =>   , password => uid26, isbanned => false, regdate => 2016-11-20 13:38:40.17819+00, city => 1, language =>   , region => 1, networkid => , params => { info => { city => , year => null, email => null }, inventory => { list => [] }, vars => { addAccess => , regionName => null, addDress => , cityName => null, schoolName => null, friendList => [], addWeapon => , addHeader =>  }, attrs => { level => 1, hints => 15 }, effects => { list => [] } }}, version => 19, id => 26 } }
20.11 13:38:40 ->>-: core/cache.get { type => questdata, v => -1, id => 26, _type => core/cache.get }
20.11 13:38:40 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {params => { quests => { list => [] } }}, version => 0, id => 26 } }
20.11 13:38:40 NET: Client login (conid:28197427, id:26, name:uid26)
20.11 13:38:40 ->>-: core/user.loginPost { lang => en, networkid => , platform => web, networktype =>   , id => 26, _type => core/user.loginPost, ipAddr => 91.225.76.192 }
20.11 13:38:40 -<<-: core/user.loginPost { _type => core/user.loginPost }
20.11 13:38:40 DB: SELECT token FROM tokens WHERE userid = 26
20.11 13:38:40 ->>-: core/server.query { q => SELECT token FROM tokens WHERE userid = 26, _type => core/server.query }
20.11 13:38:40 -<<-: core/server.query { list => {{ token => b3064e3cfe149ee7a1edbee75de55c33 }, { token => ef6ac0b73dc7f454283d56f8ab5560dc }}, errorCode => ok, _type => core/server.query }
20.11 13:38:40 DB: SELECT ID FROM TempUserLogins WHERE UserID = 26 AND Date = 'today'::timestamp
20.11 13:38:40 ->>-: core/server.query { q => SELECT ID FROM TempUserLogins WHERE UserID = 26 AND Date = 'today'::timestamp, _type => core/server.query }
20.11 13:38:40 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
20.11 13:38:40 PENDING: INSERT INTO TempUserLogins (UserID, Date) VALUES (26, 'today'::timestamp)
20.11 13:38:40 == NET: uid26 ret: user.login { name => uid26, type => user.login, errorCode => ok, id => 26, token => b3064e3cfe149ee7a1edbee75de55c33 }
20.11 13:38:40 == NET: uid25 ret: user.join { name => uid26, type => user.join }
20.11 13:38:40 == NET: uid26 ret: user.join { name => uid25, type => user.join }
20.11 13:38:40 == NET: uid26 ret: user.join { name => uid26, type => user.join }
20.11 13:38:40 ->>-: core/server.ping { _type => core/server.ping, _notify => {{ q => INSERT INTO TempUserLogins (UserID, Date) VALUES (26, 'today'::timestamp), _type => core/server.pending }} }
20.11 13:38:40 -<<-: core/server.ping { errorCode => ok, _type => core/server.ping }
20.11 13:38:40 ++ NET: uid26 req: user.login { password => kO2YJdf, name => Aimer, messageType => user.login }
20.11 13:38:40 DB: SELECT id FROM battle WHERE firstid=26 OR secondid=26 AND finished <> true
20.11 13:38:40 ->>-: core/server.query { q => SELECT id FROM battle WHERE firstid=26 OR secondid=26 AND finished <> true, _type => core/server.query }
20.11 13:38:40 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
20.11 13:38:40 ->>-: vdl/cache.battle.infoRoom { roomId => 0, _type => vdl/cache.battle.infoRoom }
20.11 13:38:40 -<<-: vdl/cache.battle.infoRoom { errorCode => _requestException, _type => vdl/cache.battle.infoRoom }
20.11 13:38:40 TRACE: logoutPost battle exception: cacheRequest exception { roomId => 0, _type => vdl/cache.battle.infoRoom }
20.11 13:38:40 TRACE: 
Called from snipe/slave/CacheConnection.hx line 199
Called from modules/VDLBattleModule.hx line 502
Called from modules/VDLBattleModule.hx line 515
Called from snipe/slave/Server.hx line 1009
20.11 13:38:40 ->>-: core/cache.update { diff => {language => en, params => { attrs => { _lastTime.24hr => 1479649120, lastLoginDate => 325, lastLoadDate => 1121 } }}, type => user, unlock => true, id => 26, _type => core/cache.update }
20.11 13:38:40 -<<-: core/cache.update { errorCode => ok, version => 20, _type => core/cache.update }
20.11 13:38:40 ->>-: core/cache.update { diff => {}, type => questdata, unlock => true, id => 26, _type => core/cache.update }
20.11 13:38:40 -<<-: core/cache.update { errorCode => ok, version => 1, _type => core/cache.update }
20.11 13:38:40 ->>-: core/user.logoutPost { networkid => , networktype =>   , id => 26, _type => core/user.logoutPost }
20.11 13:38:40 -<<-: core/user.logoutPost { errorCode => ok, _type => core/user.logoutPost }
20.11 13:38:40 DB: SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'Aimer' AND Password = 'kO2YJdf'
20.11 13:38:40 ->>-: core/server.query { q => SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'Aimer' AND Password = 'kO2YJdf', _type => core/server.query }
20.11 13:38:40 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
20.11 13:38:40 ++ NET: uid26 req: user.data { messageType => user.data }
20.11 13:38:40 ->>-: vdl/cache.user.getData { userId => 26, _type => vdl/cache.user.getData, money => 0 }
20.11 13:38:40 -<<-: vdl/cache.user.getData { info => { city => , year => null, email => null }, errorCode => ok, _type => vdl/cache.user.getData, money => 0 }
20.11 13:38:40 TIME: user.data 0.38 ms
20.11 13:38:46 ++ NET: uid26 req: user.ping { messageType => user.ping, msg => ok }
20.11 13:38:46 TIME: user.ping 0.11 ms
20.11 13:38:49 NET: Client (name:uid26 conid:28197427 WS) disconnected from vdl.0 (clients:1)
20.11 13:38:49 DB: SELECT id FROM battle WHERE firstid=26 OR secondid=26 AND finished <> true
20.11 13:38:49 ->>-: core/server.query { q => SELECT id FROM battle WHERE firstid=26 OR secondid=26 AND finished <> true, _type => core/server.query }
20.11 13:38:49 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
20.11 13:38:49 ->>-: vdl/cache.battle.infoRoom { roomId => 0, _type => vdl/cache.battle.infoRoom }
20.11 13:38:49 -<<-: vdl/cache.battle.infoRoom { errorCode => _requestException, _type => vdl/cache.battle.infoRoom }
20.11 13:38:49 TRACE: logoutPost battle exception: cacheRequest exception { roomId => 0, _type => vdl/cache.battle.infoRoom }
20.11 13:38:49 TRACE: 
Called from snipe/slave/CacheConnection.hx line 199
Called from modules/VDLBattleModule.hx line 502
Called from modules/VDLBattleModule.hx line 515
Called from snipe/slave/Server.hx line 1009
20.11 13:38:49 ->>-: core/cache.update { diff => {}, type => user, unlock => true, id => 26, _type => core/cache.update }
20.11 13:38:49 -<<-: core/cache.update { errorCode => mustBeLocked, version => 0, _type => core/cache.update }
20.11 13:38:49 ->>-: core/cache.update { diff => {}, type => questdata, unlock => true, id => 26, _type => core/cache.update }
20.11 13:38:49 -<<-: core/cache.update { errorCode => mustBeLocked, version => 0, _type => core/cache.update }
20.11 13:38:49 ->>-: core/user.logoutPost { networkid => , networktype =>   , id => 26, _type => core/user.logoutPost }
20.11 13:38:49 -<<-: core/user.logoutPost { errorCode => ok, _type => core/user.logoutPost }
20.11 13:38:54 NET: Client (conid:9511026) connected to vdl.0 (clients:2)
20.11 13:38:55 NET: Client (conid:9511026) switched protocol to WS
20.11 13:38:55 ++ NET: null req: user.login { password => kO2YJdf, name => Aimer, messageType => user.login }
20.11 13:38:55 DB: SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'Aimer' AND Password = 'kO2YJdf'
20.11 13:38:55 ->>-: core/server.query { q => SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'Aimer' AND Password = 'kO2YJdf', _type => core/server.query }
20.11 13:38:55 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
20.11 13:38:55 == NET: null ret: user.login { type => user.login, errorCode => userNotFound }
20.11 13:38:55 NET: Client (name:null conid:9511026 WS) disconnected from vdl.0 (clients:1)
20.11 13:39:00 NET: Client (conid:42449249) connected to vdl.0 (clients:2)
20.11 13:39:00 NET: Client (conid:42449249) switched protocol to WS
20.11 13:39:00 ++ NET: null req: user.register { messageType => user.register }
20.11 13:39:00 DB: SELECT * FROM users
20.11 13:39:00 ->>-: core/server.query { q => SELECT * FROM users, _type => core/server.query }
20.11 13:39:00 -<<-: core/server.query { list => {{ city => , password => , name => --- DEFAULT ATTRIBUTES ---, year => , networkid => , params => {"attrs":{},"inventory":{"list":[]}}, "info": {"city":"", "year": "", "email": ""}, networktype =>   , email => , isbanned => false, regdate => 2016-11-10 11:48:59.9391+00, language =>   , id => 1, deleted => false }, { city => , password => uid16, name => uid16, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479544800,"lastLoginDate":324,"lastLoadDate":1120},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-19 08:37:10.286209+00, language => en, id => 16, deleted => false }, { city => , password => uid2, name => uid2, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1478779175,"lastLoginDate":315,"lastLoadDate":1111},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 11:56:09.590311+00, language => en, id => 2, deleted => false }, { city => , password => uid3, name => uid3, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 12:08:05.144895+00, language =>   , id => 3, deleted => false }, { city => , password => uid4, name => uid4, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 12:24:23.638304+00, language =>   , id => 4, deleted => false }, { city => , password => uid5, name => uid5, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 12:28:38.741567+00, language =>   , id => 5, deleted => false }, { city => , password => uid11, name => uid11, year => null, networkid => , params => {"info":{"city":"","year":null,"email":null},"inventory":{"list":[]},"vars":{},"attrs":{"_lastTime.24hr":1479627940,"lastLoginDate":325,"lastLoadDate":1121},"effects":{"list":[]}}, networktype =>   , email => null, isbanned => false, regdate => 2016-11-13 20:03:37.670616+00, language => en, id => 11, deleted => false }, { city => , password => uid23, name => uid23, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-20 13:36:20.841503+00, language =>   , id => 23, deleted => false }, { city => , password => uid24, name => uid24, year => null, networkid => , params => {"info":{"city":"","year":null,"email":null},"inventory":{"list":[]},"vars":{},"attrs":{"_lastTime.24hr":1479649035,"lastLoginDate":325,"lastLoadDate":1121},"effects":{"list":[]}}, networktype =>   , email => null, isbanned => false, regdate => 2016-11-20 13:37:15.462999+00, language => en, id => 24, deleted => false }, { city => , password => uid6, name => uid6, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479119901,"lastLoginDate":319,"lastLoadDate":1115},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 12:31:41.286497+00, language => en, id => 6, deleted => false }, { city => , password => uid25, name => uid25, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-20 13:37:30.330265+00, language =>   , id => 25, deleted => false }, { city => , password => uid13, name => uid13, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-16 11:16:26.870358+00, language =>   , id => 13, deleted => false }, { city => , password => uid14, name => uid14, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-16 11:17:20.119377+00, language =>   , id => 14, deleted => false }, { city => , password => uid7, name => uid7, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 13:32:51.765479+00, language =>   , id => 7, deleted => false }, { city => , password => uid22, name => uid22, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479649069,"lastLoginDate":325,"lastLoadDate":1121},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-19 19:28:32.319424+00, language => en, id => 22, deleted => false }, { city => , password => uid26, name => uid26, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-20 13:38:40.17819+00, language =>   , id => 26, deleted => false }, { city => , password => uid17, name => uid17, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479557423,"lastLoginDate":324,"lastLoadDate":1120},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-19 12:06:11.008729+00, language => en, id => 17, deleted => false }, { city => , password => uid19, name => uid19, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-19 12:43:31.432703+00, language =>   , id => 19, deleted => false }, { city => , password => uid18, name => uid18, year => null, networkid => , params => {"info":{"city":"","year":null,"email":null},"inventory":{"list":[]},"vars":{},"attrs":{"_lastTime.24hr":1479558241,"lastLoginDate":324,"lastLoadDate":1120},"effects":{"list":[]}}, networktype =>   , email => null, isbanned => false, regdate => 2016-11-19 12:24:01.448243+00, language => en, id => 18, deleted => false }, { city => , password => uid20, name => uid20, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-19 15:34:13.927466+00, language =>   , id => 20, deleted => false }, { city => , password => uid21, name => uid21, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-19 16:38:50.046266+00, language =>   , id => 21, deleted => false }, { city => , password => uid12, name => uid12, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479299358,"lastLoginDate":321,"lastLoadDate":1117},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-14 12:05:08.368578+00, language => en, id => 12, deleted => false }, { city => , password => uid8, name => uid8, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479405440,"lastLoginDate":322,"lastLoadDate":1118},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 15:37:47.142701+00, language => en, id => 8, deleted => false }, { city => , password => uid10, name => uid10, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1478975056,"lastLoginDate":318,"lastLoadDate":1114},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-11 16:44:40.114978+00, language => en, id => 10, deleted => false }, { city => , password => uid9, name => uid9, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479481494,"lastLoginDate":323,"lastLoadDate":1119},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-11 07:57:55.30687+00, language => en, id => 9, deleted => false }, { city => , password => uid15, name => uid15, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-18 15:18:55.183965+00, language =>   , id => 15, deleted => false }}, errorCode => ok, _type => core/server.query }
20.11 13:39:00 == NET: null ret: user.auth { type => user.auth, token => dWlkMjc= }
20.11 13:39:00 DB: SELECT ID FROM Users WHERE Name = 'uid27'
20.11 13:39:00 ->>-: core/server.query { q => SELECT ID FROM Users WHERE Name = 'uid27', _type => core/server.query }
20.11 13:39:00 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
20.11 13:39:00 DB: SELECT nextval('Users_id_seq') AS id
20.11 13:39:00 ->>-: core/server.query { q => SELECT nextval('Users_id_seq') AS id, _type => core/server.query }
20.11 13:39:00 -<<-: core/server.query { list => {{ id => 27 }}, errorCode => ok, _type => core/server.query }
20.11 13:39:00 ->>-: core/user.register { password => uid27, name => uid27, fullParams => { password => uid27, name => uid27, networkid => , networktype => , messageType => user.register, id => 27 }, networkid => , connectionID => 42449249, networktype => , email => , id => 27, _type => core/user.register }
20.11 13:39:00 -<<-: core/user.register { errorCode => ok, _type => core/user.register }
20.11 13:39:00 -<<-: core/user.registerResponse { password => uid27, name => uid27, _isNotify => true, fullParams => { password => uid27, name => uid27, networkid => , networktype => , messageType => user.register, id => 27 }, networkid => , connectionID => 42449249, networktype => , email => , id => 27, _type => core/user.registerResponse }
20.11 13:39:00 DB: SELECT token FROM tokens WHERE userid = 27
20.11 13:39:00 ->>-: core/server.query { q => SELECT token FROM tokens WHERE userid = 27, _type => core/server.query }
20.11 13:39:00 -<<-: core/server.query { list => {{ token => 42b1dc23fb94d90bd136fd1aebde3450 }, { token => e5897a4b2a0088ce147cf8618f5ce706 }}, errorCode => ok, _type => core/server.query }
20.11 13:39:00 == NET: null ret: user.register { type => user.register, errorCode => ok, token => 42b1dc23fb94d90bd136fd1aebde3450 }
20.11 13:39:01 ++ NET: null req: user.login { messageType => user.login, token => dWlkMjc= }
20.11 13:39:01 DB: SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'uid27' AND Password = 'uid27'
20.11 13:39:01 ->>-: core/server.query { q => SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'uid27' AND Password = 'uid27', _type => core/server.query }
20.11 13:39:01 -<<-: core/server.query { list => {{ name => uid27, networkid => , isbanned => false, id => 27 }}, errorCode => ok, _type => core/server.query }
20.11 13:39:01 ->>-: core/user.isOnlineID { id => 27, _type => core/user.isOnlineID }
20.11 13:39:01 -<<-: core/user.isOnlineID { isOnline => false, errorCode => ok, _type => core/user.isOnlineID }
20.11 13:39:01 ->>-: core/cache.get { type => user, v => -1, id => 27, _type => core/cache.get }
20.11 13:39:01 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {name => uid27, deleted => false, school => 1, year => null, email => null, networktype =>   , password => uid27, isbanned => false, regdate => 2016-11-20 13:39:00.818006+00, city => 1, language =>   , region => 1, networkid => , params => { info => { city => , year => null, email => null }, inventory => { list => [] }, vars => { addAccess => , regionName => null, addDress => , cityName => null, schoolName => null, friendList => [], addWeapon => , addHeader =>  }, attrs => { level => 1, hints => 15 }, effects => { list => [] } }}, version => 19, id => 27 } }
20.11 13:39:01 ->>-: core/cache.get { type => questdata, v => -1, id => 27, _type => core/cache.get }
20.11 13:39:01 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {params => { quests => { list => [] } }}, version => 0, id => 27 } }
20.11 13:39:01 NET: Client login (conid:42449249, id:27, name:uid27)
20.11 13:39:01 ->>-: core/user.loginPost { lang => en, networkid => , platform => web, networktype =>   , id => 27, _type => core/user.loginPost, ipAddr => 91.225.76.192 }
20.11 13:39:01 -<<-: core/user.loginPost { _type => core/user.loginPost }
20.11 13:39:01 DB: SELECT token FROM tokens WHERE userid = 27
20.11 13:39:01 ->>-: core/server.query { q => SELECT token FROM tokens WHERE userid = 27, _type => core/server.query }
20.11 13:39:01 -<<-: core/server.query { list => {{ token => 42b1dc23fb94d90bd136fd1aebde3450 }, { token => e5897a4b2a0088ce147cf8618f5ce706 }}, errorCode => ok, _type => core/server.query }
20.11 13:39:01 DB: SELECT ID FROM TempUserLogins WHERE UserID = 27 AND Date = 'today'::timestamp
20.11 13:39:01 ->>-: core/server.query { q => SELECT ID FROM TempUserLogins WHERE UserID = 27 AND Date = 'today'::timestamp, _type => core/server.query }
20.11 13:39:01 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
20.11 13:39:01 PENDING: INSERT INTO TempUserLogins (UserID, Date) VALUES (27, 'today'::timestamp)
20.11 13:39:01 == NET: uid27 ret: user.login { name => uid27, type => user.login, errorCode => ok, id => 27, token => 42b1dc23fb94d90bd136fd1aebde3450 }
20.11 13:39:01 == NET: uid27 ret: user.join { name => uid25, type => user.join }
20.11 13:39:01 == NET: uid27 ret: user.join { name => uid27, type => user.join }
20.11 13:39:01 == NET: uid25 ret: user.join { name => uid27, type => user.join }
20.11 13:39:01 ->>-: core/server.ping { _type => core/server.ping, _notify => {{ q => INSERT INTO TempUserLogins (UserID, Date) VALUES (27, 'today'::timestamp), _type => core/server.pending }} }
20.11 13:39:01 -<<-: core/server.ping { errorCode => ok, _type => core/server.ping }
20.11 13:39:01 ++ NET: uid27 req: user.login { messageType => user.login, token => dWlkMjc= }
20.11 13:39:01 DB: SELECT id FROM battle WHERE firstid=27 OR secondid=27 AND finished <> true
20.11 13:39:01 ->>-: core/server.query { q => SELECT id FROM battle WHERE firstid=27 OR secondid=27 AND finished <> true, _type => core/server.query }
20.11 13:39:01 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
20.11 13:39:01 ->>-: vdl/cache.battle.infoRoom { roomId => 0, _type => vdl/cache.battle.infoRoom }
20.11 13:39:01 -<<-: vdl/cache.battle.infoRoom { errorCode => _requestException, _type => vdl/cache.battle.infoRoom }
20.11 13:39:01 TRACE: logoutPost battle exception: cacheRequest exception { roomId => 0, _type => vdl/cache.battle.infoRoom }
20.11 13:39:01 TRACE: 
Called from snipe/slave/CacheConnection.hx line 199
Called from modules/VDLBattleModule.hx line 502
Called from modules/VDLBattleModule.hx line 515
Called from snipe/slave/Server.hx line 1009
20.11 13:39:01 ->>-: core/cache.update { diff => {language => en, params => { attrs => { _lastTime.24hr => 1479649141, lastLoginDate => 325, lastLoadDate => 1121 } }}, type => user, unlock => true, id => 27, _type => core/cache.update }
20.11 13:39:01 -<<-: core/cache.update { errorCode => ok, version => 20, _type => core/cache.update }
20.11 13:39:01 ->>-: core/cache.update { diff => {}, type => questdata, unlock => true, id => 27, _type => core/cache.update }
20.11 13:39:01 -<<-: core/cache.update { errorCode => ok, version => 1, _type => core/cache.update }
20.11 13:39:01 ->>-: core/user.logoutPost { networkid => , networktype =>   , id => 27, _type => core/user.logoutPost }
20.11 13:39:01 -<<-: core/user.logoutPost { errorCode => ok, _type => core/user.logoutPost }
20.11 13:39:01 DB: SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'uid27' AND Password = 'uid27'
20.11 13:39:01 ->>-: core/server.query { q => SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'uid27' AND Password = 'uid27', _type => core/server.query }
20.11 13:39:01 -<<-: core/server.query { list => {{ name => uid27, networkid => , isbanned => false, id => 27 }}, errorCode => ok, _type => core/server.query }
20.11 13:39:01 ->>-: core/user.isOnlineID { id => 27, _type => core/user.isOnlineID }
20.11 13:39:01 -<<-: core/user.isOnlineID { isOnline => false, errorCode => ok, _type => core/user.isOnlineID }
20.11 13:39:01 ->>-: core/cache.get { type => user, v => -1, id => 27, _type => core/cache.get }
20.11 13:39:01 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {name => uid27, deleted => false, school => 1, year => null, email => null, networktype =>   , password => uid27, isbanned => false, regdate => 2016-11-20 13:39:00.818006+00, city => 1, language => en, region => 1, networkid => , params => { info => { city => , year => null, email => null }, inventory => { list => [] }, vars => { addAccess => , regionName => null, addDress => , cityName => null, schoolName => null, friendList => [], addWeapon => , addHeader =>  }, attrs => { level => 1, _lastTime.24hr => 1479649141, lastLoginDate => 325, lastLoadDate => 1121, hints => 15 }, effects => { list => [] } }}, version => 20, id => 27 } }
20.11 13:39:01 ->>-: core/cache.get { type => questdata, v => -1, id => 27, _type => core/cache.get }
20.11 13:39:01 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {params => { quests => { list => [] } }}, version => 1, id => 27 } }
20.11 13:39:01 NET: Client login (conid:42449249, id:27, name:uid27)
20.11 13:39:01 ->>-: core/user.loginPost { lang => en, networkid => , platform => web, networktype =>   , id => 27, _type => core/user.loginPost, ipAddr => 91.225.76.192 }
20.11 13:39:01 -<<-: core/user.loginPost { _type => core/user.loginPost }
20.11 13:39:01 DB: SELECT token FROM tokens WHERE userid = 27
20.11 13:39:01 ->>-: core/server.query { q => SELECT token FROM tokens WHERE userid = 27, _type => core/server.query }
20.11 13:39:01 -<<-: core/server.query { list => {{ token => 42b1dc23fb94d90bd136fd1aebde3450 }, { token => e5897a4b2a0088ce147cf8618f5ce706 }}, errorCode => ok, _type => core/server.query }
20.11 13:39:01 == NET: uid25 ret: user.join { name => uid27, type => user.join }
20.11 13:39:08 TIMER: Check auto-disconnect...
20.11 13:39:09 ->>-: core/cache.update { diff => {language => en}, type => user, unlock => false, id => 27, _type => core/cache.update }
20.11 13:39:09 -<<-: core/cache.update { errorCode => ok, version => 21, _type => core/cache.update }
20.11 13:39:14 STATS: vdl.0 cache, locks:4
20.11 13:39:18 ++ NET: uid27 req: user.ping { messageType => user.ping, msg => ok }
20.11 13:39:18 TIME: user.ping 0.12 ms
20.11 13:39:21 NET: Client (name:uid27 conid:42449249 WS) disconnected from vdl.0 (clients:1)
20.11 13:39:21 DB: SELECT id FROM battle WHERE firstid=27 OR secondid=27 AND finished <> true
20.11 13:39:21 ->>-: core/server.query { q => SELECT id FROM battle WHERE firstid=27 OR secondid=27 AND finished <> true, _type => core/server.query }
20.11 13:39:21 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
20.11 13:39:21 ->>-: vdl/cache.battle.infoRoom { roomId => 0, _type => vdl/cache.battle.infoRoom }
20.11 13:39:21 -<<-: vdl/cache.battle.infoRoom { errorCode => _requestException, _type => vdl/cache.battle.infoRoom }
20.11 13:39:21 TRACE: logoutPost battle exception: cacheRequest exception { roomId => 0, _type => vdl/cache.battle.infoRoom }
20.11 13:39:21 TRACE: 
Called from snipe/slave/CacheConnection.hx line 199
Called from modules/VDLBattleModule.hx line 502
Called from modules/VDLBattleModule.hx line 515
Called from snipe/slave/Server.hx line 1009
20.11 13:39:21 ->>-: core/cache.update { diff => {}, type => user, unlock => true, id => 27, _type => core/cache.update }
20.11 13:39:21 -<<-: core/cache.update { errorCode => ok, version => 22, _type => core/cache.update }
20.11 13:39:21 ->>-: core/cache.update { diff => {}, type => questdata, unlock => true, id => 27, _type => core/cache.update }
20.11 13:39:21 -<<-: core/cache.update { errorCode => ok, version => 2, _type => core/cache.update }
20.11 13:39:21 ->>-: core/user.logoutPost { networkid => , networktype =>   , id => 27, _type => core/user.logoutPost }
20.11 13:39:21 -<<-: core/user.logoutPost { errorCode => ok, _type => core/user.logoutPost }
20.11 13:39:26 NET: Client (conid:84481087) connected to vdl.0 (clients:2)
20.11 13:39:26 NET: Client (conid:84481087) switched protocol to WS
20.11 13:39:27 ++ NET: null req: user.login { messageType => user.login, token => dWlkMjc= }
20.11 13:39:27 DB: SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'uid27' AND Password = 'uid27'
20.11 13:39:27 ->>-: core/server.query { q => SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'uid27' AND Password = 'uid27', _type => core/server.query }
20.11 13:39:27 -<<-: core/server.query { list => {{ name => uid27, networkid => , isbanned => false, id => 27 }}, errorCode => ok, _type => core/server.query }
20.11 13:39:27 ->>-: core/user.isOnlineID { id => 27, _type => core/user.isOnlineID }
20.11 13:39:27 -<<-: core/user.isOnlineID { isOnline => false, errorCode => ok, _type => core/user.isOnlineID }
20.11 13:39:27 ->>-: core/cache.get { type => user, v => -1, id => 27, _type => core/cache.get }
20.11 13:39:27 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {name => uid27, deleted => false, school => 1, year => null, email => null, networktype =>   , password => uid27, isbanned => false, regdate => 2016-11-20 13:39:00.818006+00, city => 1, language => en, region => 1, networkid => , params => { info => { city => , year => null, email => null }, inventory => { list => [] }, vars => { addAccess => , regionName => null, addDress => , cityName => null, schoolName => null, friendList => [], addWeapon => , addHeader =>  }, attrs => { level => 1, _lastTime.24hr => 1479649141, lastLoginDate => 325, lastLoadDate => 1121, hints => 15 }, effects => { list => [] } }}, version => 22, id => 27 } }
20.11 13:39:27 ->>-: core/cache.get { type => questdata, v => -1, id => 27, _type => core/cache.get }
20.11 13:39:27 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {params => { quests => { list => [] } }}, version => 2, id => 27 } }
20.11 13:39:27 NET: Client login (conid:84481087, id:27, name:uid27)
20.11 13:39:27 ->>-: core/user.loginPost { lang => en, networkid => , platform => web, networktype =>   , id => 27, _type => core/user.loginPost, ipAddr => 91.225.76.192 }
20.11 13:39:27 -<<-: core/user.loginPost { _type => core/user.loginPost }
20.11 13:39:27 DB: SELECT token FROM tokens WHERE userid = 27
20.11 13:39:27 ->>-: core/server.query { q => SELECT token FROM tokens WHERE userid = 27, _type => core/server.query }
20.11 13:39:27 -<<-: core/server.query { list => {{ token => 42b1dc23fb94d90bd136fd1aebde3450 }, { token => e5897a4b2a0088ce147cf8618f5ce706 }}, errorCode => ok, _type => core/server.query }
20.11 13:39:27 == NET: uid25 ret: user.join { name => uid27, type => user.join }
20.11 13:39:27 == NET: uid27 ret: user.login { name => uid27, type => user.login, errorCode => ok, id => 27, token => 42b1dc23fb94d90bd136fd1aebde3450 }
20.11 13:39:27 == NET: uid27 ret: user.join { name => uid25, type => user.join }
20.11 13:39:27 == NET: uid27 ret: user.join { name => uid27, type => user.join }
20.11 13:39:34 ->>-: core/cache.update { diff => {language => en}, type => user, unlock => false, id => 27, _type => core/cache.update }
20.11 13:39:34 -<<-: core/cache.update { errorCode => ok, version => 23, _type => core/cache.update }
20.11 13:39:34 STATS: vdl.0 cache connection, 390 calls, total 0.251262664794922 sec spent, avg 0.64 ms
20.11 13:39:45 ++ NET: uid27 req: user.ping { messageType => user.ping, msg => ok }
20.11 13:39:45 TIME: user.ping 0.11 ms
20.11 13:39:45 == NET: uid27 ret: user.ping { type => user.ping, errorCode => ok }
20.11 13:40:07 ++ NET: uid27 req: user.ping { messageType => user.ping, msg => ok }
20.11 13:40:07 TIME: user.ping 0.11 ms
20.11 13:40:07 == NET: uid27 ret: user.ping { type => user.ping, errorCode => ok }
20.11 13:40:08 TIMER: Check auto-disconnect...
20.11 13:40:14 STATS: vdl.0 cache, locks:4
20.11 13:40:29 ++ NET: uid27 req: user.ping { messageType => user.ping, msg => ok }
20.11 13:40:29 TIME: user.ping 0.16 ms
20.11 13:40:29 == NET: uid27 ret: user.ping { type => user.ping, errorCode => ok }
20.11 13:40:51 ++ NET: uid27 req: user.ping { messageType => user.ping, msg => ok }
20.11 13:40:51 TIME: user.ping 0.16 ms
20.11 13:40:51 == NET: uid27 ret: user.ping { type => user.ping, errorCode => ok }
20.11 13:41:08 TIMER: Check auto-disconnect...
20.11 13:41:13 ++ NET: uid27 req: user.ping { messageType => user.ping, msg => ok }
20.11 13:41:13 TIME: user.ping 0.14 ms
20.11 13:41:13 == NET: uid27 ret: user.ping { type => user.ping, errorCode => ok }
20.11 13:41:14 STATS: vdl.0 cache, locks:4
20.11 13:41:18 NET: Client (name:uid25 conid:67223765 WS) disconnected from vdl.0 (clients:1)
20.11 13:41:18 DB: SELECT id FROM battle WHERE firstid=25 OR secondid=25 AND finished <> true
20.11 13:41:18 ->>-: core/server.query { q => SELECT id FROM battle WHERE firstid=25 OR secondid=25 AND finished <> true, _type => core/server.query }
20.11 13:41:18 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
20.11 13:41:18 STATS: vdl.0 cache connection, 391 calls, total 0.252155780792236 sec spent, avg 0.64 ms
20.11 13:41:18 ->>-: vdl/cache.battle.infoRoom { roomId => 0, _type => vdl/cache.battle.infoRoom }
20.11 13:41:18 -<<-: vdl/cache.battle.infoRoom { errorCode => _requestException, _type => vdl/cache.battle.infoRoom }
20.11 13:41:18 TRACE: logoutPost battle exception: cacheRequest exception { roomId => 0, _type => vdl/cache.battle.infoRoom }
20.11 13:41:18 TRACE: 
Called from snipe/slave/CacheConnection.hx line 199
Called from modules/VDLBattleModule.hx line 502
Called from modules/VDLBattleModule.hx line 515
Called from snipe/slave/Server.hx line 1009
20.11 13:41:18 ->>-: core/cache.update { diff => {}, type => user, unlock => true, id => 25, _type => core/cache.update }
20.11 13:41:18 -<<-: core/cache.update { errorCode => ok, version => 24, _type => core/cache.update }
20.11 13:41:18 ->>-: core/cache.update { diff => {}, type => questdata, unlock => true, id => 25, _type => core/cache.update }
20.11 13:41:18 -<<-: core/cache.update { errorCode => ok, version => 3, _type => core/cache.update }
20.11 13:41:18 ->>-: core/user.logoutPost { networkid => , networktype =>   , id => 25, _type => core/user.logoutPost }
20.11 13:41:18 -<<-: core/user.logoutPost { errorCode => ok, _type => core/user.logoutPost }
20.11 13:42:08 TIMER: Check auto-disconnect...
20.11 13:42:14 STATS: vdl.0 cache, locks:2
20.11 13:43:08 TIMER: Check auto-disconnect...
20.11 13:43:14 STATS: vdl.0 cache, locks:2
20.11 13:44:08 TIMER: Check auto-disconnect...
20.11 13:44:14 STATS: vdl.0 cache, locks:2
20.11 13:45:08 TIMER: Check auto-disconnect...
20.11 13:45:14 STATS: vdl.0 cache, locks:2
20.11 13:46:08 TIMER: Check auto-disconnect...
20.11 13:46:14 STATS: vdl.0 cache, locks:2
20.11 13:47:08 TIMER: Check auto-disconnect...
20.11 13:47:14 STATS: vdl.0 cache, locks:2
20.11 13:48:08 TIMER: Check auto-disconnect...
20.11 13:48:14 STATS: vdl.0 cache, locks:2
20.11 13:48:55 NET: Client (name:uid27 conid:84481087 WS) disconnected from vdl.0 (clients:0)
20.11 13:48:55 DB: SELECT id FROM battle WHERE firstid=27 OR secondid=27 AND finished <> true
20.11 13:48:55 ->>-: core/server.query { q => SELECT id FROM battle WHERE firstid=27 OR secondid=27 AND finished <> true, _type => core/server.query }
20.11 13:48:55 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
20.11 13:48:55 STATS: vdl.0 cache connection, 396 calls, total 0.254661798477173 sec spent, avg 0.64 ms
20.11 13:48:55 ->>-: vdl/cache.battle.infoRoom { roomId => 0, _type => vdl/cache.battle.infoRoom }
20.11 13:48:55 -<<-: vdl/cache.battle.infoRoom { errorCode => _requestException, _type => vdl/cache.battle.infoRoom }
20.11 13:48:55 TRACE: logoutPost battle exception: cacheRequest exception { roomId => 0, _type => vdl/cache.battle.infoRoom }
20.11 13:48:55 TRACE: 
Called from snipe/slave/CacheConnection.hx line 199
Called from modules/VDLBattleModule.hx line 502
Called from modules/VDLBattleModule.hx line 515
Called from snipe/slave/Server.hx line 1009
20.11 13:48:55 ->>-: core/cache.update { diff => {}, type => user, unlock => true, id => 27, _type => core/cache.update }
20.11 13:48:55 -<<-: core/cache.update { errorCode => ok, version => 24, _type => core/cache.update }
20.11 13:48:55 ->>-: core/cache.update { diff => {}, type => questdata, unlock => true, id => 27, _type => core/cache.update }
20.11 13:48:55 -<<-: core/cache.update { errorCode => ok, version => 3, _type => core/cache.update }
20.11 13:48:55 ->>-: core/user.logoutPost { networkid => , networktype =>   , id => 27, _type => core/user.logoutPost }
20.11 13:48:55 -<<-: core/user.logoutPost { errorCode => ok, _type => core/user.logoutPost }
20.11 13:49:08 TIMER: Check auto-disconnect...
20.11 13:49:14 STATS: vdl.0 cache, locks:0
20.11 13:50:08 TIMER: Check auto-disconnect...
20.11 13:50:15 STATS: vdl.0 cache, locks:0
20.11 13:51:08 TIMER: Check auto-disconnect...
20.11 13:51:15 STATS: vdl.0 cache, locks:0
20.11 13:51:41 NET: Client (conid:22265367) connected to vdl.0 (clients:1)
20.11 13:51:41 NET: Client (conid:22265367) switched protocol to WS
20.11 13:51:42 ++ NET: null req: user.login { messageType => user.login, token => dWlkMjc= }
20.11 13:51:42 DB: SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'uid27' AND Password = 'uid27'
20.11 13:51:42 ->>-: core/server.query { q => SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'uid27' AND Password = 'uid27', _type => core/server.query }
20.11 13:51:42 -<<-: core/server.query { list => {{ name => uid27, networkid => , isbanned => false, id => 27 }}, errorCode => ok, _type => core/server.query }
20.11 13:51:42 STATS: vdl.0 cache connection, 401 calls, total 0.258114099502563 sec spent, avg 0.64 ms
20.11 13:51:42 ->>-: core/user.isOnlineID { id => 27, _type => core/user.isOnlineID }
20.11 13:51:42 -<<-: core/user.isOnlineID { isOnline => false, errorCode => ok, _type => core/user.isOnlineID }
20.11 13:51:42 ->>-: core/cache.get { type => user, v => -1, id => 27, _type => core/cache.get }
20.11 13:51:42 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {name => uid27, deleted => false, year => , email => mail, networktype =>   , password => uid27, isbanned => false, regdate => 2016-11-20 13:39:00.818006+00, city => , language =>   , networkid => , params => {}}, version => 0, id => 27 } }
20.11 13:51:42 ->>-: core/cache.get { type => questdata, v => -1, id => 27, _type => core/cache.get }
20.11 13:51:42 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {params => { quests => { list => [] } }}, version => 0, id => 27 } }
20.11 13:51:42 NET: Client login (conid:22265367, id:27, name:uid27)
20.11 13:51:42 ->>-: core/user.loginPost { lang => en, networkid => , platform => web, networktype =>   , id => 27, _type => core/user.loginPost, ipAddr => 91.225.76.192 }
20.11 13:51:42 -<<-: core/user.loginPost { _type => core/user.loginPost }
20.11 13:51:42 DB: SELECT token FROM tokens WHERE userid = 27
20.11 13:51:42 ->>-: core/server.query { q => SELECT token FROM tokens WHERE userid = 27, _type => core/server.query }
20.11 13:51:42 -<<-: core/server.query { list => {{ token => 42b1dc23fb94d90bd136fd1aebde3450 }, { token => e5897a4b2a0088ce147cf8618f5ce706 }}, errorCode => ok, _type => core/server.query }
20.11 13:51:42 DB: SELECT ID FROM TempUserLogins WHERE UserID = 27 AND Date = 'today'::timestamp
20.11 13:51:42 ->>-: core/server.query { q => SELECT ID FROM TempUserLogins WHERE UserID = 27 AND Date = 'today'::timestamp, _type => core/server.query }
20.11 13:51:42 -<<-: core/server.query { list => {{ id => 160 }}, errorCode => ok, _type => core/server.query }
20.11 13:51:42 == NET: uid27 ret: user.login { name => uid27, type => user.login, errorCode => ok, id => 27, token => 42b1dc23fb94d90bd136fd1aebde3450 }
20.11 13:51:42 == NET: uid27 ret: user.join { name => uid27, type => user.join }
20.11 13:51:46 ++ NET: uid27 req: user.ping { messageType => user.ping, msg => ok }
20.11 13:51:46 TIME: user.ping 0.13 ms
20.11 13:51:46 == NET: uid27 ret: user.ping { type => user.ping, errorCode => ok }
20.11 13:51:50 ->>-: core/cache.update { diff => {language => en, params => { attrs => { _lastTime.24hr => 1479649902, lastLoginDate => 325, lastLoadDate => 1121 }, effects => { list => [] } }}, type => user, unlock => false, id => 27, _type => core/cache.update }
20.11 13:51:50 -<<-: core/cache.update { errorCode => ok, version => 1, _type => core/cache.update }
20.11 13:52:08 TIMER: Check auto-disconnect...
20.11 13:52:08 ++ NET: uid27 req: user.ping { messageType => user.ping, msg => ok }
20.11 13:52:08 TIME: user.ping 0.13 ms
20.11 13:52:08 == NET: uid27 ret: user.ping { type => user.ping, errorCode => ok }
20.11 13:52:15 STATS: vdl.0 cache, locks:2
20.11 13:52:19 NET: Client (name:uid27 conid:22265367 WS) disconnected from vdl.0 (clients:0)
20.11 13:52:19 DB: SELECT id FROM battle WHERE firstid=27 OR secondid=27 AND finished <> true
20.11 13:52:19 ->>-: core/server.query { q => SELECT id FROM battle WHERE firstid=27 OR secondid=27 AND finished <> true, _type => core/server.query }
20.11 13:52:19 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
20.11 13:52:19 ->>-: vdl/cache.battle.infoRoom { roomId => 0, _type => vdl/cache.battle.infoRoom }
20.11 13:52:19 -<<-: vdl/cache.battle.infoRoom { errorCode => _requestException, _type => vdl/cache.battle.infoRoom }
20.11 13:52:19 TRACE: logoutPost battle exception: cacheRequest exception { roomId => 0, _type => vdl/cache.battle.infoRoom }
20.11 13:52:19 TRACE: 
Called from snipe/slave/CacheConnection.hx line 199
Called from modules/VDLBattleModule.hx line 502
Called from modules/VDLBattleModule.hx line 515
Called from snipe/slave/Server.hx line 1009
20.11 13:52:19 ->>-: core/cache.update { diff => {}, type => user, unlock => true, id => 27, _type => core/cache.update }
20.11 13:52:19 -<<-: core/cache.update { errorCode => ok, version => 2, _type => core/cache.update }
20.11 13:52:19 ->>-: core/cache.update { diff => {}, type => questdata, unlock => true, id => 27, _type => core/cache.update }
20.11 13:52:19 -<<-: core/cache.update { errorCode => ok, version => 1, _type => core/cache.update }
20.11 13:52:19 ->>-: core/user.logoutPost { networkid => , networktype =>   , id => 27, _type => core/user.logoutPost }
20.11 13:52:19 -<<-: core/user.logoutPost { errorCode => ok, _type => core/user.logoutPost }
20.11 13:52:24 NET: Client (conid:50201423) connected to vdl.0 (clients:1)
20.11 13:52:24 NET: Client (conid:50201423) switched protocol to WS
20.11 13:52:24 ++ NET: null req: user.register { city => Kazan, password => kO2YJdf, name => Aimer, year => 1993, email => raBpoLL1@ya.ru, messageType => user.register }
20.11 13:52:24 DB: SELECT ID FROM Users WHERE Name = 'Aimer'
20.11 13:52:24 ->>-: core/server.query { q => SELECT ID FROM Users WHERE Name = 'Aimer', _type => core/server.query }
20.11 13:52:24 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
20.11 13:52:24 DB: SELECT nextval('Users_id_seq') AS id
20.11 13:52:24 ->>-: core/server.query { q => SELECT nextval('Users_id_seq') AS id, _type => core/server.query }
20.11 13:52:24 -<<-: core/server.query { list => {{ id => 28 }}, errorCode => ok, _type => core/server.query }
20.11 13:52:24 ->>-: core/user.register { password => kO2YJdf, name => Aimer, fullParams => { city => Kazan, password => kO2YJdf, name => Aimer, year => 1993, networkid => , networktype => , email => raBpoLL1@ya.ru, messageType => user.register, id => 28 }, networkid => , connectionID => 50201423, networktype => , email => , id => 28, _type => core/user.register }
20.11 13:52:24 -<<-: core/user.register { errorCode => ok, _type => core/user.register }
20.11 13:52:24 -<<-: core/user.registerResponse { password => kO2YJdf, name => Aimer, _isNotify => true, fullParams => { city => Kazan, password => kO2YJdf, name => Aimer, year => 1993, networkid => , networktype => , email => raBpoLL1@ya.ru, messageType => user.register, id => 28 }, networkid => , connectionID => 50201423, networktype => , email => , id => 28, _type => core/user.registerResponse }
20.11 13:52:24 DB: SELECT token FROM tokens WHERE userid = 28
20.11 13:52:24 ->>-: core/server.query { q => SELECT token FROM tokens WHERE userid = 28, _type => core/server.query }
20.11 13:52:24 -<<-: core/server.query { list => {{ token => f8036965bfbe74fbafeb175107a122c4 }, { token => f430b4db749d48ed955ce2b85103338c }}, errorCode => ok, _type => core/server.query }
20.11 13:52:24 == NET: null ret: user.register { type => user.register, errorCode => ok, token => f8036965bfbe74fbafeb175107a122c4 }
20.11 13:52:35 ++ NET: null req: user.ping { messageType => user.ping, msg => ok }
20.11 13:52:35 TRACE: User not logon yet.
20.11 13:52:38 NET: Client (name:null conid:50201423 WS) disconnected from vdl.0 (clients:0)
20.11 13:52:43 NET: Client (conid:68124539) connected to vdl.0 (clients:1)
20.11 13:52:43 NET: Client (conid:68124539) switched protocol to WS
20.11 13:52:43 ++ NET: null req: user.login { password => kO2YJdf, name => Aimer, messageType => user.login }
20.11 13:52:43 DB: SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'Aimer' AND Password = 'kO2YJdf'
20.11 13:52:43 ->>-: core/server.query { q => SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'Aimer' AND Password = 'kO2YJdf', _type => core/server.query }
20.11 13:52:43 -<<-: core/server.query { list => {{ name => Aimer, networkid => , isbanned => false, id => 28 }}, errorCode => ok, _type => core/server.query }
20.11 13:52:43 STATS: vdl.0 cache connection, 418 calls, total 0.270360231399536 sec spent, avg 0.65 ms
20.11 13:52:43 ->>-: core/user.isOnlineID { id => 28, _type => core/user.isOnlineID }
20.11 13:52:43 -<<-: core/user.isOnlineID { isOnline => false, errorCode => ok, _type => core/user.isOnlineID }
20.11 13:52:43 ->>-: core/cache.get { type => user, v => -1, id => 28, _type => core/cache.get }
20.11 13:52:43 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {name => Aimer, deleted => false, year => , email => raBpoLL1@ya.ru, networktype =>   , password => kO2YJdf, isbanned => false, regdate => 2016-11-20 13:52:24.495988+00, city => , language =>   , networkid => , params => {}}, version => 0, id => 28 } }
20.11 13:52:43 ->>-: core/cache.get { type => questdata, v => -1, id => 28, _type => core/cache.get }
20.11 13:52:43 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {params => { quests => { list => [] } }}, version => 0, id => 28 } }
20.11 13:52:43 NET: Client login (conid:68124539, id:28, name:Aimer)
20.11 13:52:43 ->>-: core/user.loginPost { lang => en, networkid => , platform => web, networktype =>   , id => 28, _type => core/user.loginPost, ipAddr => 91.225.76.192 }
20.11 13:52:43 -<<-: core/user.loginPost { _type => core/user.loginPost }
20.11 13:52:43 DB: SELECT token FROM tokens WHERE userid = 28
20.11 13:52:43 ->>-: core/server.query { q => SELECT token FROM tokens WHERE userid = 28, _type => core/server.query }
20.11 13:52:43 -<<-: core/server.query { list => {{ token => f8036965bfbe74fbafeb175107a122c4 }, { token => f430b4db749d48ed955ce2b85103338c }}, errorCode => ok, _type => core/server.query }
20.11 13:52:43 DB: SELECT ID FROM TempUserLogins WHERE UserID = 28 AND Date = 'today'::timestamp
20.11 13:52:43 ->>-: core/server.query { q => SELECT ID FROM TempUserLogins WHERE UserID = 28 AND Date = 'today'::timestamp, _type => core/server.query }
20.11 13:52:43 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
20.11 13:52:43 PENDING: INSERT INTO TempUserLogins (UserID, Date) VALUES (28, 'today'::timestamp)
20.11 13:52:43 == NET: Aimer ret: user.login { name => Aimer, type => user.login, errorCode => ok, id => 28, token => f8036965bfbe74fbafeb175107a122c4 }
20.11 13:52:43 == NET: Aimer ret: user.join { name => Aimer, type => user.join }
20.11 13:52:43 ->>-: core/server.ping { _type => core/server.ping, _notify => {{ q => INSERT INTO TempUserLogins (UserID, Date) VALUES (28, 'today'::timestamp), _type => core/server.pending }} }
20.11 13:52:43 -<<-: core/server.ping { errorCode => ok, _type => core/server.ping }
20.11 13:52:43 ++ NET: Aimer req: user.data { messageType => user.data }
20.11 13:52:43 ->>-: vdl/cache.user.getData { userId => 28, _type => vdl/cache.user.getData, money => 0 }
20.11 13:52:43 -<<-: vdl/cache.user.getData { info => { city => null, year => null, email => null }, errorCode => ok, _type => vdl/cache.user.getData, money => 0 }
20.11 13:52:43 TIME: user.data 0.3 ms
20.11 13:52:43 == NET: Aimer ret: user.data { info => { city => null, year => null, email => null }, type => user.data, errorCode => ok, _type => vdl/cache.user.getData, money => 0 }
20.11 13:52:50 ->>-: core/cache.update { diff => {language => en, params => { attrs => { _lastTime.24hr => 1479649963, lastLoginDate => 325, lastLoadDate => 1121 }, effects => { list => [] } }}, type => user, unlock => false, id => 28, _type => core/cache.update }
20.11 13:52:50 -<<-: core/cache.update { errorCode => ok, version => 1, _type => core/cache.update }
20.11 13:53:02 ++ NET: Aimer req: user.ping { messageType => user.ping, msg => ok }
20.11 13:53:02 TIME: user.ping 0.14 ms
20.11 13:53:02 == NET: Aimer ret: user.ping { type => user.ping, errorCode => ok }
20.11 13:53:08 TIMER: Check auto-disconnect...
20.11 13:53:15 STATS: vdl.0 cache, locks:2
20.11 13:53:23 ++ NET: Aimer req: user.ping { messageType => user.ping, msg => ok }
20.11 13:53:23 TIME: user.ping 0.12 ms
20.11 13:53:23 == NET: Aimer ret: user.ping { type => user.ping, errorCode => ok }
20.11 13:53:45 ++ NET: Aimer req: user.ping { messageType => user.ping, msg => ok }
20.11 13:53:45 TIME: user.ping 0.13 ms
20.11 13:53:45 == NET: Aimer ret: user.ping { type => user.ping, errorCode => ok }
20.11 13:54:07 ++ NET: Aimer req: user.ping { messageType => user.ping, msg => ok }
20.11 13:54:07 TIME: user.ping 0.12 ms
20.11 13:54:07 == NET: Aimer ret: user.ping { type => user.ping, errorCode => ok }
20.11 13:54:08 TIMER: Check auto-disconnect...
20.11 13:54:15 STATS: vdl.0 cache, locks:2
20.11 13:54:26 NET: Client (name:Aimer conid:68124539 WS) disconnected from vdl.0 (clients:0)
20.11 13:54:26 DB: SELECT id FROM battle WHERE firstid=28 OR secondid=28 AND finished <> true
20.11 13:54:26 ->>-: core/server.query { q => SELECT id FROM battle WHERE firstid=28 OR secondid=28 AND finished <> true, _type => core/server.query }
20.11 13:54:26 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
20.11 13:54:26 STATS: vdl.0 cache connection, 428 calls, total 0.275530338287354 sec spent, avg 0.64 ms
20.11 13:54:26 ->>-: vdl/cache.battle.infoRoom { roomId => 0, _type => vdl/cache.battle.infoRoom }
20.11 13:54:26 -<<-: vdl/cache.battle.infoRoom { errorCode => _requestException, _type => vdl/cache.battle.infoRoom }
20.11 13:54:26 TRACE: logoutPost battle exception: cacheRequest exception { roomId => 0, _type => vdl/cache.battle.infoRoom }
20.11 13:54:26 TRACE: 
Called from snipe/slave/CacheConnection.hx line 199
Called from modules/VDLBattleModule.hx line 502
Called from modules/VDLBattleModule.hx line 515
Called from snipe/slave/Server.hx line 1009
20.11 13:54:26 ->>-: core/cache.update { diff => {}, type => user, unlock => true, id => 28, _type => core/cache.update }
20.11 13:54:26 -<<-: core/cache.update { errorCode => ok, version => 2, _type => core/cache.update }
20.11 13:54:26 ->>-: core/cache.update { diff => {}, type => questdata, unlock => true, id => 28, _type => core/cache.update }
20.11 13:54:26 -<<-: core/cache.update { errorCode => ok, version => 1, _type => core/cache.update }
20.11 13:54:26 ->>-: core/user.logoutPost { networkid => , networktype =>   , id => 28, _type => core/user.logoutPost }
20.11 13:54:26 -<<-: core/user.logoutPost { errorCode => ok, _type => core/user.logoutPost }
20.11 13:54:31 NET: Client (conid:34944339) connected to vdl.0 (clients:1)
20.11 13:54:31 NET: Client (conid:34944339) switched protocol to WS
20.11 13:54:32 ++ NET: null req: user.register { messageType => user.register }
20.11 13:54:32 DB: SELECT * FROM users
20.11 13:54:32 ->>-: core/server.query { q => SELECT * FROM users, _type => core/server.query }
20.11 13:54:32 -<<-: core/server.query { list => {{ city => , password => , name => --- DEFAULT ATTRIBUTES ---, year => , networkid => , params => {"attrs":{},"inventory":{"list":[]}}, "info": {"city":"", "year": "", "email": ""}, networktype =>   , email => , isbanned => false, regdate => 2016-11-10 11:48:59.9391+00, language =>   , id => 1, deleted => false }, { city => , password => uid16, name => uid16, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479544800,"lastLoginDate":324,"lastLoadDate":1120},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-19 08:37:10.286209+00, language => en, id => 16, deleted => false }, { city => , password => uid2, name => uid2, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1478779175,"lastLoginDate":315,"lastLoadDate":1111},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 11:56:09.590311+00, language => en, id => 2, deleted => false }, { city => , password => uid3, name => uid3, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 12:08:05.144895+00, language =>   , id => 3, deleted => false }, { city => , password => uid4, name => uid4, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 12:24:23.638304+00, language =>   , id => 4, deleted => false }, { city => , password => uid5, name => uid5, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 12:28:38.741567+00, language =>   , id => 5, deleted => false }, { city => , password => uid11, name => uid11, year => null, networkid => , params => {"info":{"city":"","year":null,"email":null},"inventory":{"list":[]},"vars":{},"attrs":{"_lastTime.24hr":1479627940,"lastLoginDate":325,"lastLoadDate":1121},"effects":{"list":[]}}, networktype =>   , email => null, isbanned => false, regdate => 2016-11-13 20:03:37.670616+00, language => en, id => 11, deleted => false }, { city => , password => uid23, name => uid23, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-20 13:36:20.841503+00, language =>   , id => 23, deleted => false }, { city => , password => uid24, name => uid24, year => null, networkid => , params => {"info":{"city":"","year":null,"email":null},"inventory":{"list":[]},"vars":{},"attrs":{"_lastTime.24hr":1479649035,"lastLoginDate":325,"lastLoadDate":1121},"effects":{"list":[]}}, networktype =>   , email => null, isbanned => false, regdate => 2016-11-20 13:37:15.462999+00, language => en, id => 24, deleted => false }, { city => , password => uid6, name => uid6, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479119901,"lastLoginDate":319,"lastLoadDate":1115},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 12:31:41.286497+00, language => en, id => 6, deleted => false }, { city => , password => uid25, name => uid25, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-20 13:37:30.330265+00, language =>   , id => 25, deleted => false }, { city => , password => uid13, name => uid13, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-16 11:16:26.870358+00, language =>   , id => 13, deleted => false }, { city => , password => uid14, name => uid14, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-16 11:17:20.119377+00, language =>   , id => 14, deleted => false }, { city => , password => uid7, name => uid7, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 13:32:51.765479+00, language =>   , id => 7, deleted => false }, { city => , password => uid22, name => uid22, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479649069,"lastLoginDate":325,"lastLoadDate":1121},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-19 19:28:32.319424+00, language => en, id => 22, deleted => false }, { city => , password => uid26, name => uid26, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-20 13:38:40.17819+00, language =>   , id => 26, deleted => false }, { city => , password => uid27, name => uid27, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479649902,"lastLoginDate":325,"lastLoadDate":1121},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-20 13:39:00.818006+00, language => en, id => 27, deleted => false }, { city => , password => uid17, name => uid17, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479557423,"lastLoginDate":324,"lastLoadDate":1120},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-19 12:06:11.008729+00, language => en, id => 17, deleted => false }, { city => , password => uid19, name => uid19, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-19 12:43:31.432703+00, language =>   , id => 19, deleted => false }, { city => , password => uid18, name => uid18, year => null, networkid => , params => {"info":{"city":"","year":null,"email":null},"inventory":{"list":[]},"vars":{},"attrs":{"_lastTime.24hr":1479558241,"lastLoginDate":324,"lastLoadDate":1120},"effects":{"list":[]}}, networktype =>   , email => null, isbanned => false, regdate => 2016-11-19 12:24:01.448243+00, language => en, id => 18, deleted => false }, { city => , password => uid20, name => uid20, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-19 15:34:13.927466+00, language =>   , id => 20, deleted => false }, { city => , password => uid21, name => uid21, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-19 16:38:50.046266+00, language =>   , id => 21, deleted => false }, { city => , password => kO2YJdf, name => Aimer, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479649963,"lastLoginDate":325,"lastLoadDate":1121},"effects":{"list":[]}}, networktype =>   , email => raBpoLL1@ya.ru, isbanned => false, regdate => 2016-11-20 13:52:24.495988+00, language => en, id => 28, deleted => false }, { city => , password => uid12, name => uid12, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479299358,"lastLoginDate":321,"lastLoadDate":1117},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-14 12:05:08.368578+00, language => en, id => 12, deleted => false }, { city => , password => uid8, name => uid8, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479405440,"lastLoginDate":322,"lastLoadDate":1118},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-10 15:37:47.142701+00, language => en, id => 8, deleted => false }, { city => , password => uid10, name => uid10, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1478975056,"lastLoginDate":318,"lastLoadDate":1114},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-11 16:44:40.114978+00, language => en, id => 10, deleted => false }, { city => , password => uid9, name => uid9, year => , networkid => , params => {"attrs":{"_lastTime.24hr":1479481494,"lastLoginDate":323,"lastLoadDate":1119},"effects":{"list":[]}}, networktype =>   , email => mail, isbanned => false, regdate => 2016-11-11 07:57:55.30687+00, language => en, id => 9, deleted => false }, { city => , password => uid15, name => uid15, year => , networkid => , params => , networktype =>   , email => mail, isbanned => false, regdate => 2016-11-18 15:18:55.183965+00, language =>   , id => 15, deleted => false }}, errorCode => ok, _type => core/server.query }
20.11 13:54:32 == NET: null ret: user.auth { type => user.auth, token => dWlkMjk= }
20.11 13:54:32 DB: SELECT ID FROM Users WHERE Name = 'uid29'
20.11 13:54:32 ->>-: core/server.query { q => SELECT ID FROM Users WHERE Name = 'uid29', _type => core/server.query }
20.11 13:54:32 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
20.11 13:54:32 DB: SELECT nextval('Users_id_seq') AS id
20.11 13:54:32 ->>-: core/server.query { q => SELECT nextval('Users_id_seq') AS id, _type => core/server.query }
20.11 13:54:32 -<<-: core/server.query { list => {{ id => 29 }}, errorCode => ok, _type => core/server.query }
20.11 13:54:32 ->>-: core/user.register { password => uid29, name => uid29, fullParams => { password => uid29, name => uid29, networkid => , networktype => , messageType => user.register, id => 29 }, networkid => , connectionID => 34944339, networktype => , email => , id => 29, _type => core/user.register }
20.11 13:54:32 -<<-: core/user.register { errorCode => ok, _type => core/user.register }
20.11 13:54:32 -<<-: core/user.registerResponse { password => uid29, name => uid29, _isNotify => true, fullParams => { password => uid29, name => uid29, networkid => , networktype => , messageType => user.register, id => 29 }, networkid => , connectionID => 34944339, networktype => , email => , id => 29, _type => core/user.registerResponse }
20.11 13:54:32 DB: SELECT token FROM tokens WHERE userid = 29
20.11 13:54:32 ->>-: core/server.query { q => SELECT token FROM tokens WHERE userid = 29, _type => core/server.query }
20.11 13:54:32 -<<-: core/server.query { list => {{ token => c2a33c8d65e1afa0cda341f2773c95e6 }, { token => 74ed08951c96cbcc4ba0195cb04f5212 }}, errorCode => ok, _type => core/server.query }
20.11 13:54:32 == NET: null ret: user.register { type => user.register, errorCode => ok, token => c2a33c8d65e1afa0cda341f2773c95e6 }
20.11 13:54:32 ++ NET: null req: user.login { messageType => user.login, token => dWlkMjk= }
20.11 13:54:32 DB: SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'uid29' AND Password = 'uid29'
20.11 13:54:32 ->>-: core/server.query { q => SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'uid29' AND Password = 'uid29', _type => core/server.query }
20.11 13:54:32 -<<-: core/server.query { list => {{ name => uid29, networkid => , isbanned => false, id => 29 }}, errorCode => ok, _type => core/server.query }
20.11 13:54:32 ->>-: core/user.isOnlineID { id => 29, _type => core/user.isOnlineID }
20.11 13:54:32 -<<-: core/user.isOnlineID { isOnline => false, errorCode => ok, _type => core/user.isOnlineID }
20.11 13:54:32 ->>-: core/cache.get { type => user, v => -1, id => 29, _type => core/cache.get }
20.11 13:54:32 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {name => uid29, deleted => false, school => 1, year => null, email => null, networktype =>   , password => uid29, isbanned => false, regdate => 2016-11-20 13:54:32.445211+00, city => 1, language =>   , region => 1, networkid => , params => { info => { city => , year => null, email => null }, inventory => { list => [] }, vars => { addAccess => , regionName => null, addDress => , cityName => null, schoolName => null, friendList => [], addWeapon => , addHeader =>  }, attrs => { level => 1, hints => 15 }, effects => { list => [] } }}, version => 19, id => 29 } }
20.11 13:54:32 ->>-: core/cache.get { type => questdata, v => -1, id => 29, _type => core/cache.get }
20.11 13:54:32 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {params => { quests => { list => [] } }}, version => 0, id => 29 } }
20.11 13:54:32 NET: Client login (conid:34944339, id:29, name:uid29)
20.11 13:54:32 ->>-: core/user.loginPost { lang => en, networkid => , platform => web, networktype =>   , id => 29, _type => core/user.loginPost, ipAddr => 91.225.76.192 }
20.11 13:54:32 -<<-: core/user.loginPost { _type => core/user.loginPost }
20.11 13:54:32 DB: SELECT token FROM tokens WHERE userid = 29
20.11 13:54:32 ->>-: core/server.query { q => SELECT token FROM tokens WHERE userid = 29, _type => core/server.query }
20.11 13:54:32 -<<-: core/server.query { list => {{ token => c2a33c8d65e1afa0cda341f2773c95e6 }, { token => 74ed08951c96cbcc4ba0195cb04f5212 }}, errorCode => ok, _type => core/server.query }
20.11 13:54:32 DB: SELECT ID FROM TempUserLogins WHERE UserID = 29 AND Date = 'today'::timestamp
20.11 13:54:32 ->>-: core/server.query { q => SELECT ID FROM TempUserLogins WHERE UserID = 29 AND Date = 'today'::timestamp, _type => core/server.query }
20.11 13:54:32 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
20.11 13:54:32 PENDING: INSERT INTO TempUserLogins (UserID, Date) VALUES (29, 'today'::timestamp)
20.11 13:54:32 == NET: uid29 ret: user.login { name => uid29, type => user.login, errorCode => ok, id => 29, token => c2a33c8d65e1afa0cda341f2773c95e6 }
20.11 13:54:32 == NET: uid29 ret: user.join { name => uid29, type => user.join }
20.11 13:54:32 ->>-: core/server.ping { _type => core/server.ping, _notify => {{ q => INSERT INTO TempUserLogins (UserID, Date) VALUES (29, 'today'::timestamp), _type => core/server.pending }} }
20.11 13:54:32 -<<-: core/server.ping { errorCode => ok, _type => core/server.ping }
20.11 13:54:32 ++ NET: uid29 req: user.login { messageType => user.login, token => dWlkMjk= }
20.11 13:54:32 DB: SELECT id FROM battle WHERE firstid=29 OR secondid=29 AND finished <> true
20.11 13:54:32 ->>-: core/server.query { q => SELECT id FROM battle WHERE firstid=29 OR secondid=29 AND finished <> true, _type => core/server.query }
20.11 13:54:32 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
20.11 13:54:32 ->>-: vdl/cache.battle.infoRoom { roomId => 0, _type => vdl/cache.battle.infoRoom }
20.11 13:54:32 -<<-: vdl/cache.battle.infoRoom { errorCode => _requestException, _type => vdl/cache.battle.infoRoom }
20.11 13:54:32 TRACE: logoutPost battle exception: cacheRequest exception { roomId => 0, _type => vdl/cache.battle.infoRoom }
20.11 13:54:32 TRACE: 
Called from snipe/slave/CacheConnection.hx line 199
Called from modules/VDLBattleModule.hx line 502
Called from modules/VDLBattleModule.hx line 515
Called from snipe/slave/Server.hx line 1009
20.11 13:54:32 ->>-: core/cache.update { diff => {language => en, params => { attrs => { _lastTime.24hr => 1479650072, lastLoginDate => 325, lastLoadDate => 1121 } }}, type => user, unlock => true, id => 29, _type => core/cache.update }
20.11 13:54:32 -<<-: core/cache.update { errorCode => ok, version => 20, _type => core/cache.update }
20.11 13:54:32 ->>-: core/cache.update { diff => {}, type => questdata, unlock => true, id => 29, _type => core/cache.update }
20.11 13:54:32 -<<-: core/cache.update { errorCode => ok, version => 1, _type => core/cache.update }
20.11 13:54:32 ->>-: core/user.logoutPost { networkid => , networktype =>   , id => 29, _type => core/user.logoutPost }
20.11 13:54:32 -<<-: core/user.logoutPost { errorCode => ok, _type => core/user.logoutPost }
20.11 13:54:32 DB: SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'uid29' AND Password = 'uid29'
20.11 13:54:32 ->>-: core/server.query { q => SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'uid29' AND Password = 'uid29', _type => core/server.query }
20.11 13:54:32 -<<-: core/server.query { list => {{ name => uid29, networkid => , isbanned => false, id => 29 }}, errorCode => ok, _type => core/server.query }
20.11 13:54:32 ->>-: core/user.isOnlineID { id => 29, _type => core/user.isOnlineID }
20.11 13:54:32 -<<-: core/user.isOnlineID { isOnline => false, errorCode => ok, _type => core/user.isOnlineID }
20.11 13:54:32 ->>-: core/cache.get { type => user, v => -1, id => 29, _type => core/cache.get }
20.11 13:54:32 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {name => uid29, deleted => false, school => 1, year => null, email => null, networktype =>   , password => uid29, isbanned => false, regdate => 2016-11-20 13:54:32.445211+00, city => 1, language => en, region => 1, networkid => , params => { info => { city => , year => null, email => null }, inventory => { list => [] }, vars => { addAccess => , regionName => null, addDress => , cityName => null, schoolName => null, friendList => [], addWeapon => , addHeader =>  }, attrs => { level => 1, _lastTime.24hr => 1479650072, lastLoginDate => 325, lastLoadDate => 1121, hints => 15 }, effects => { list => [] } }}, version => 20, id => 29 } }
20.11 13:54:32 ->>-: core/cache.get { type => questdata, v => -1, id => 29, _type => core/cache.get }
20.11 13:54:32 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {params => { quests => { list => [] } }}, version => 1, id => 29 } }
20.11 13:54:32 NET: Client login (conid:34944339, id:29, name:uid29)
20.11 13:54:32 ->>-: core/user.loginPost { lang => en, networkid => , platform => web, networktype =>   , id => 29, _type => core/user.loginPost, ipAddr => 91.225.76.192 }
20.11 13:54:32 -<<-: core/user.loginPost { _type => core/user.loginPost }
20.11 13:54:32 DB: SELECT token FROM tokens WHERE userid = 29
20.11 13:54:32 ->>-: core/server.query { q => SELECT token FROM tokens WHERE userid = 29, _type => core/server.query }
20.11 13:54:32 -<<-: core/server.query { list => {{ token => c2a33c8d65e1afa0cda341f2773c95e6 }, { token => 74ed08951c96cbcc4ba0195cb04f5212 }}, errorCode => ok, _type => core/server.query }
20.11 13:54:34 ++ NET: uid29 req: user.ping { messageType => user.ping, msg => ok }
20.11 13:54:34 TIME: user.ping 0.1 ms
20.11 13:54:37 NET: Client (name:uid29 conid:34944339 WS) disconnected from vdl.0 (clients:0)
20.11 13:54:37 DB: SELECT id FROM battle WHERE firstid=29 OR secondid=29 AND finished <> true
20.11 13:54:37 ->>-: core/server.query { q => SELECT id FROM battle WHERE firstid=29 OR secondid=29 AND finished <> true, _type => core/server.query }
20.11 13:54:37 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
20.11 13:54:37 ->>-: vdl/cache.battle.infoRoom { roomId => 0, _type => vdl/cache.battle.infoRoom }
20.11 13:54:37 -<<-: vdl/cache.battle.infoRoom { errorCode => _requestException, _type => vdl/cache.battle.infoRoom }
20.11 13:54:37 TRACE: logoutPost battle exception: cacheRequest exception { roomId => 0, _type => vdl/cache.battle.infoRoom }
20.11 13:54:37 TRACE: 
Called from snipe/slave/CacheConnection.hx line 199
Called from modules/VDLBattleModule.hx line 502
Called from modules/VDLBattleModule.hx line 515
Called from snipe/slave/Server.hx line 1009
20.11 13:54:37 ->>-: core/cache.update { diff => {language => en}, type => user, unlock => true, id => 29, _type => core/cache.update }
20.11 13:54:37 -<<-: core/cache.update { errorCode => ok, version => 21, _type => core/cache.update }
20.11 13:54:37 ->>-: core/cache.update { diff => {}, type => questdata, unlock => true, id => 29, _type => core/cache.update }
20.11 13:54:37 -<<-: core/cache.update { errorCode => ok, version => 2, _type => core/cache.update }
20.11 13:54:37 ->>-: core/user.logoutPost { networkid => , networktype =>   , id => 29, _type => core/user.logoutPost }
20.11 13:54:37 -<<-: core/user.logoutPost { errorCode => ok, _type => core/user.logoutPost }
20.11 13:54:42 NET: Client (conid:6656986) connected to vdl.0 (clients:1)
20.11 13:54:42 NET: Client (conid:6656986) switched protocol to WS
20.11 13:54:42 ++ NET: null req: user.login { messageType => user.login, token => dWlkMjk= }
20.11 13:54:42 DB: SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'uid29' AND Password = 'uid29'
20.11 13:54:42 ->>-: core/server.query { q => SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'uid29' AND Password = 'uid29', _type => core/server.query }
20.11 13:54:42 -<<-: core/server.query { list => {{ name => uid29, networkid => , isbanned => false, id => 29 }}, errorCode => ok, _type => core/server.query }
20.11 13:54:42 ->>-: core/user.isOnlineID { id => 29, _type => core/user.isOnlineID }
20.11 13:54:42 -<<-: core/user.isOnlineID { isOnline => false, errorCode => ok, _type => core/user.isOnlineID }
20.11 13:54:42 ->>-: core/cache.get { type => user, v => -1, id => 29, _type => core/cache.get }
20.11 13:54:42 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {name => uid29, deleted => false, school => 1, year => null, email => null, networktype =>   , password => uid29, isbanned => false, regdate => 2016-11-20 13:54:32.445211+00, city => 1, language => en, region => 1, networkid => , params => { info => { city => , year => null, email => null }, inventory => { list => [] }, vars => { addAccess => , regionName => null, addDress => , cityName => null, schoolName => null, friendList => [], addWeapon => , addHeader =>  }, attrs => { level => 1, _lastTime.24hr => 1479650072, lastLoginDate => 325, lastLoadDate => 1121, hints => 15 }, effects => { list => [] } }}, version => 21, id => 29 } }
20.11 13:54:42 ->>-: core/cache.get { type => questdata, v => -1, id => 29, _type => core/cache.get }
20.11 13:54:42 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {params => { quests => { list => [] } }}, version => 2, id => 29 } }
20.11 13:54:42 NET: Client login (conid:6656986, id:29, name:uid29)
20.11 13:54:42 ->>-: core/user.loginPost { lang => en, networkid => , platform => web, networktype =>   , id => 29, _type => core/user.loginPost, ipAddr => 91.225.76.192 }
20.11 13:54:42 -<<-: core/user.loginPost { _type => core/user.loginPost }
20.11 13:54:42 DB: SELECT token FROM tokens WHERE userid = 29
20.11 13:54:42 ->>-: core/server.query { q => SELECT token FROM tokens WHERE userid = 29, _type => core/server.query }
20.11 13:54:42 -<<-: core/server.query { list => {{ token => c2a33c8d65e1afa0cda341f2773c95e6 }, { token => 74ed08951c96cbcc4ba0195cb04f5212 }}, errorCode => ok, _type => core/server.query }
20.11 13:54:42 == NET: uid29 ret: user.login { name => uid29, type => user.login, errorCode => ok, id => 29, token => c2a33c8d65e1afa0cda341f2773c95e6 }
20.11 13:54:42 == NET: uid29 ret: user.join { name => uid29, type => user.join }
20.11 13:54:50 ->>-: core/cache.update { diff => {language => en}, type => user, unlock => false, id => 29, _type => core/cache.update }
20.11 13:54:50 -<<-: core/cache.update { errorCode => ok, version => 22, _type => core/cache.update }
20.11 13:55:01 ++ NET: uid29 req: user.ping { messageType => user.ping, msg => ok }
20.11 13:55:01 TIME: user.ping 0.14 ms
20.11 13:55:01 == NET: uid29 ret: user.ping { type => user.ping, errorCode => ok }
20.11 13:55:08 TIMER: Check auto-disconnect...
20.11 13:55:09 NET: Client (name:uid29 conid:6656986 WS) disconnected from vdl.0 (clients:0)
20.11 13:55:09 DB: SELECT id FROM battle WHERE firstid=29 OR secondid=29 AND finished <> true
20.11 13:55:09 ->>-: core/server.query { q => SELECT id FROM battle WHERE firstid=29 OR secondid=29 AND finished <> true, _type => core/server.query }
20.11 13:55:09 -<<-: core/server.query { list => {}, errorCode => ok, _type => core/server.query }
20.11 13:55:09 ->>-: vdl/cache.battle.infoRoom { roomId => 0, _type => vdl/cache.battle.infoRoom }
20.11 13:55:09 -<<-: vdl/cache.battle.infoRoom { errorCode => _requestException, _type => vdl/cache.battle.infoRoom }
20.11 13:55:09 TRACE: logoutPost battle exception: cacheRequest exception { roomId => 0, _type => vdl/cache.battle.infoRoom }
20.11 13:55:09 TRACE: 
Called from snipe/slave/CacheConnection.hx line 199
Called from modules/VDLBattleModule.hx line 502
Called from modules/VDLBattleModule.hx line 515
Called from snipe/slave/Server.hx line 1009
20.11 13:55:09 ->>-: core/cache.update { diff => {}, type => user, unlock => true, id => 29, _type => core/cache.update }
20.11 13:55:09 -<<-: core/cache.update { errorCode => ok, version => 23, _type => core/cache.update }
20.11 13:55:09 ->>-: core/cache.update { diff => {}, type => questdata, unlock => true, id => 29, _type => core/cache.update }
20.11 13:55:09 -<<-: core/cache.update { errorCode => ok, version => 3, _type => core/cache.update }
20.11 13:55:09 ->>-: core/user.logoutPost { networkid => , networktype =>   , id => 29, _type => core/user.logoutPost }
20.11 13:55:09 -<<-: core/user.logoutPost { errorCode => ok, _type => core/user.logoutPost }
20.11 13:55:14 NET: Client (conid:14523211) connected to vdl.0 (clients:1)
20.11 13:55:14 NET: Client (conid:14523211) switched protocol to WS
20.11 13:55:14 ++ NET: null req: user.login { password => kO2YJdf, name => Aimer, messageType => user.login }
20.11 13:55:14 DB: SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'Aimer' AND Password = 'kO2YJdf'
20.11 13:55:14 ->>-: core/server.query { q => SELECT ID, Name, NetworkID, IsBanned FROM Users WHERE Name = 'Aimer' AND Password = 'kO2YJdf', _type => core/server.query }
20.11 13:55:14 -<<-: core/server.query { list => {{ name => Aimer, networkid => , isbanned => false, id => 28 }}, errorCode => ok, _type => core/server.query }
20.11 13:55:14 ->>-: core/user.isOnlineID { id => 28, _type => core/user.isOnlineID }
20.11 13:55:14 -<<-: core/user.isOnlineID { isOnline => false, errorCode => ok, _type => core/user.isOnlineID }
20.11 13:55:14 ->>-: core/cache.get { type => user, v => -1, id => 28, _type => core/cache.get }
20.11 13:55:14 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {name => Aimer, deleted => false, year => , email => raBpoLL1@ya.ru, networktype =>   , password => kO2YJdf, isbanned => false, regdate => 2016-11-20 13:52:24.495988+00, city => , language => en, networkid => , params => { attrs => { _lastTime.24hr => 1479649963, lastLoginDate => 325, lastLoadDate => 1121 }, effects => { list => [] } }}, version => 0, id => 28 } }
20.11 13:55:14 ->>-: core/cache.get { type => questdata, v => -1, id => 28, _type => core/cache.get }
20.11 13:55:14 -<<-: core/cache.get { errorCode => ok, _type => core/cache.get, block => { list => {params => { quests => { list => [] } }}, version => 0, id => 28 } }
20.11 13:55:14 NET: Client login (conid:14523211, id:28, name:Aimer)
20.11 13:55:14 ->>-: core/user.loginPost { lang => en, networkid => , platform => web, networktype =>   , id => 28, _type => core/user.loginPost, ipAddr => 91.225.76.192 }
20.11 13:55:14 -<<-: core/user.loginPost { _type => core/user.loginPost }
20.11 13:55:14 DB: SELECT token FROM tokens WHERE userid = 28
20.11 13:55:14 ->>-: core/server.query { q => SELECT token FROM tokens WHERE userid = 28, _type => core/server.query }
20.11 13:55:14 -<<-: core/server.query { list => {{ token => f8036965bfbe74fbafeb175107a122c4 }, { token => f430b4db749d48ed955ce2b85103338c }}, errorCode => ok, _type => core/server.query }
20.11 13:55:14 == NET: Aimer ret: user.login { name => Aimer, type => user.login, errorCode => ok, id => 28, token => f8036965bfbe74fbafeb175107a122c4 }
20.11 13:55:14 == NET: Aimer ret: user.join { name => Aimer, type => user.join }
20.11 13:55:14 ++ NET: Aimer req: user.data { messageType => user.data }
20.11 13:55:14 ->>-: vdl/cache.user.getData { userId => 28, _type => vdl/cache.user.getData, money => 0 }
20.11 13:55:14 -<<-: vdl/cache.user.getData { info => { city => null, year => null, email => null }, errorCode => ok, _type => vdl/cache.user.getData, money => 0 }
20.11 13:55:14 TIME: user.data 0.37 ms
20.11 13:55:14 == NET: Aimer ret: user.data { info => { city => null, year => null, email => null }, type => user.data, errorCode => ok, _type => vdl/cache.user.getData, money => 0 }
20.11 13:55:15 STATS: vdl.0 cache, locks:2
20.11 13:55:20 ->>-: core/cache.update { diff => {language => en}, type => user, unlock => false, id => 28, _type => core/cache.update }
20.11 13:55:20 -<<-: core/cache.update { errorCode => ok, version => 1, _type => core/cache.update }
20.11 13:55:28 ++ NET: Aimer req: user.ping { messageType => user.ping, msg => ok }
20.11 13:55:28 TIME: user.ping 0.13 ms
20.11 13:55:28 == NET: Aimer ret: user.ping { type => user.ping, errorCode => ok }
20.11 13:55:50 ++ NET: Aimer req: user.ping { messageType => user.ping, msg => ok }
20.11 13:55:50 TIME: user.ping 0.1 ms
20.11 13:55:50 == NET: Aimer ret: user.ping { type => user.ping, errorCode => ok }
20.11 13:56:08 TIMER: Check auto-disconnect...
20.11 13:56:11 ++ NET: Aimer req: user.ping { messageType => user.ping, msg => ok }
20.11 13:56:11 TIME: user.ping 0.14 ms
20.11 13:56:11 == NET: Aimer ret: user.ping { type => user.ping, errorCode => ok }
20.11 13:56:15 STATS: vdl.0 cache, locks:2
20.11 13:56:33 ++ NET: Aimer req: user.ping { messageType => user.ping, msg => ok }
20.11 13:56:33 TIME: user.ping 0.14 ms
20.11 13:56:33 == NET: Aimer ret: user.ping { type => user.ping, errorCode => ok }
20.11 13:56:55 ++ NET: Aimer req: user.ping { messageType => user.ping, msg => ok }
20.11 13:56:55 TIME: user.ping 0.12 ms
20.11 13:56:55 == NET: Aimer ret: user.ping { type => user.ping, errorCode => ok }
20.11 13:57:08 TIMER: Check auto-disconnect...
20.11 13:57:15 STATS: vdl.0 cache, locks:2
20.11 13:57:16 ++ NET: Aimer req: user.ping { messageType => user.ping, msg => ok }
20.11 13:57:16 TIME: user.ping 0.13 ms
20.11 13:57:16 == NET: Aimer ret: user.ping { type => user.ping, errorCode => ok }
20.11 13:57:38 ++ NET: Aimer req: user.ping { messageType => user.ping, msg => ok }
20.11 13:57:38 TIME: user.ping 0.2 ms
20.11 13:57:38 == NET: Aimer ret: user.ping { type => user.ping, errorCode => ok }
20.11 13:58:00 ++ NET: Aimer req: user.ping { messageType => user.ping, msg => ok }
20.11 13:58:00 TIME: user.ping 0.13 ms
20.11 13:58:00 == NET: Aimer ret: user.ping { type => user.ping, errorCode => ok }
20.11 13:58:08 TIMER: Check auto-disconnect...
20.11 13:58:15 STATS: vdl.0 cache, locks:2
20.11 13:58:22 ++ NET: Aimer req: user.ping { messageType => user.ping, msg => ok }
20.11 13:58:22 == NET: Aimer ret: user.ping { type => user.ping, errorCode => ok }
20.11 13:58:22 TIME: user.ping 0.36 ms
20.11 13:58:43 ++ NET: Aimer req: user.ping { messageType => user.ping, msg => ok }
20.11 13:58:43 TIME: user.ping 0.11 ms
20.11 13:58:43 == NET: Aimer ret: user.ping { type => user.ping, errorCode => ok }
20.11 13:59:05 ++ NET: Aimer req: user.ping { messageType => user.ping, msg => ok }
20.11 13:59:05 TIME: user.ping 0.13 ms
20.11 13:59:05 == NET: Aimer ret: user.ping { type => user.ping, errorCode => ok }
20.11 13:59:08 TIMER: Check auto-disconnect...
20.11 13:59:15 STATS: vdl.0 cache, locks:2
20.11 13:59:27 ++ NET: Aimer req: user.ping { messageType => user.ping, msg => ok }
20.11 13:59:27 TIME: user.ping 0.12 ms
20.11 13:59:27 == NET: Aimer ret: user.ping { type => user.ping, errorCode => ok }
20.11 13:59:48 ++ NET: Aimer req: user.ping { messageType => user.ping, msg => ok }
20.11 13:59:48 TIME: user.ping 0.11 ms
20.11 13:59:48 == NET: Aimer ret: user.ping { type => user.ping, errorCode => ok }
